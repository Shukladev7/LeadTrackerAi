{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 111, "column": 0}, "map": {"version":3,"sources":["file:///Users/gauravshukla/Downloads/ll/src/lib/firebase.ts"],"sourcesContent":["// Import the functions you need from the SDKs you need\nimport { initializeApp } from \"firebase/app\";\nimport { getFirestore, connectFirestoreEmulator } from \"firebase/firestore\";\nimport { getAuth, connectAuthEmulator } from \"firebase/auth\";\nimport { getStorage, connectStorageEmulator } from \"firebase/storage\";\n\n// Your web app's Firebase configuration\nconst firebaseConfig = {\n  apiKey: \"AIzaSyCjA4ek_FRNB61JM7xrYAT3s1eoL94qhnE\",\n  authDomain: \"studio-5063047183-aa053.firebaseapp.com\",\n  projectId: \"studio-5063047183-aa053\",\n  storageBucket: \"studio-5063047183-aa053.firebasestorage.app\",\n  messagingSenderId: \"311176415853\",\n  appId: \"1:311176415853:web:52798531c528415cf94d64\"\n};\n\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\n\n// Initialize Firebase services\nexport const db = getFirestore(app);\nexport const auth = getAuth(app);\nexport const storage = getStorage(app);\n\n// Connect to emulators in development (optional)\nif (process.env.NODE_ENV === 'development' && typeof window !== 'undefined') {\n  // Only connect to emulators if they haven't been connected already\n  try {\n    // Uncomment these lines if you want to use Firebase emulators in development\n    // connectFirestoreEmulator(db, 'localhost', 8080);\n    // connectAuthEmulator(auth, 'http://localhost:9099');\n    \n    // Storage emulator disabled - using production Firebase Storage with CORS configured\n    // connectStorageEmulator(storage, 'localhost', 9299);\n    // console.log('Connected to Firebase Storage emulator');\n  } catch (error) {\n    console.log('Emulators already connected or not available');\n  }\n}\n\nexport default app;\n"],"names":[],"mappings":"AAAA,uDAAuD;;;;;;;AACvD;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;;;;;AAEA,wCAAwC;AACxC,MAAM,iBAAiB;IACrB,QAAQ;IACR,YAAY;IACZ,WAAW;IACX,eAAe;IACf,mBAAmB;IACnB,OAAO;AACT;AAEA,sBAAsB;AACtB,MAAM,MAAM,CAAA,GAAA,oLAAA,CAAA,gBAAa,AAAD,EAAE;AAGnB,MAAM,KAAK,CAAA,GAAA,iKAAA,CAAA,eAAY,AAAD,EAAE;AACxB,MAAM,OAAO,CAAA,GAAA,yOAAA,CAAA,UAAO,AAAD,EAAE;AACrB,MAAM,UAAU,CAAA,GAAA,oLAAA,CAAA,aAAU,AAAD,EAAE;AAElC,iDAAiD;AACjD,uCAA6E;;AAa7E;uCAEe","debugId":null}},
    {"offset": {"line": 155, "column": 0}, "map": {"version":3,"sources":["file:///Users/gauravshukla/Downloads/ll/src/lib/business-types.ts"],"sourcesContent":["import { Timestamp } from \"firebase/firestore\";\n\n// Base interface for all business documents\nexport interface BusinessDocument {\n  id?: string;\n  createdAt?: Timestamp | string;\n  updatedAt?: Timestamp;\n}\n\n// Employee interface\nexport interface Employee extends BusinessDocument {\n  name: string;\n  email: string;\n  phone: string;\n  role: string;\n  department: string;\n  address: string;\n  isActive?: boolean;\n  hireDate?: Timestamp | string;\n  salary?: number;\n  emergencyContact?: {\n    name: string;\n    phone: string;\n    relationship: string;\n  };\n}\n\n// Department interface\nexport interface Department extends BusinessDocument {\n  name: string;\n  description?: string;\n  managerId?: string;\n  budget?: number;\n  employeeCount?: number;\n}\n\n// Employee Role interface\nexport interface EmployeeRole extends BusinessDocument {\n  name: string;\n  description?: string;\n  permissions?: string[];\n  level?: number;\n}\n\n// Lead Source interface\nexport interface LeadSource extends BusinessDocument {\n  name: string;\n  description?: string;\n  isActive?: boolean;\n  cost?: number;\n  conversionRate?: number;\n}\n\n// Product Category interface\nexport interface ProductCategory extends BusinessDocument {\n  name: string;\n  description: string;\n  isActive?: boolean;\n}\n\n// Product interface\nexport interface Product extends BusinessDocument {\n  name: string;\n  price: number;\n  gstRate: number;\n  categoryId?: string;\n  description?: string;\n  skus?: string[];\n  catalogueUrl?: string; // Legacy field - will be deprecated\n  cataloguePdf?: {\n    url: string; // Firebase Storage download URL\n    fileName: string;\n    filePath: string;\n    uploadedAt: string;\n  };\n  productImage?: {\n    url: string; // Firebase Storage download URL\n    fileName: string;\n    filePath: string;\n    uploadedAt: string;\n  };\n  category?: string;\n  isActive?: boolean;\n  stockQuantity?: number;\n  minStockLevel?: number;\n  supplier?: string;\n  tags?: string[];\n}\n\n// Lead Activity interface\nexport interface LeadActivity {\n  id: string;\n  date: Timestamp | string;\n  type: 'Email' | 'WhatsApp' | 'Call' | 'Meeting' | 'Proposal Sent' | 'Revision Request' | 'Negotiation' | 'Follow-up' | 'Status Change' | 'Other';\n  notes?: string;\n  userId?: string;\n  attachments?: string[];\n  // Additional fields for status change tracking\n  previousStatus?: string;\n  newStatus?: string;\n  changedBy?: string;\n}\n\n// Lead Product interface\nexport interface LeadProduct {\n  productId: string;\n  quantity: number;\n  rate: number;\n  discount?: number;\n  notes?: string;\n}\n\n// Lead interface\nexport interface Lead extends BusinessDocument {\n  name: string;\n  company: string;\n  email: string;\n  phone: string;\n  whatsappNumber?: string;\n  client_address?: string;\n  client_gst_no?: string;\n  status: 'New' | 'In Discussion' | 'Negotiation' | 'Closed - Won' | 'Closed - Lost' | 'On Hold';\n  source: string;\n  products: LeadProduct[];\n  activities: LeadActivity[];\n  assignedTo?: string;\n  priority?: 'Low' | 'Medium' | 'High' | 'Urgent';\n  expectedCloseDate?: Timestamp | string;\n  estimatedValue?: number;\n  tags?: string[];\n  customFields?: Record<string, any>;\n  createdBy?: string; // Name or email of the user who created the lead\n}\n\n// Quotation Product interface\nexport interface QuotationProduct {\n  productId: string;\n  quantity: number;\n  rate: number;\n  gstRate: number;\n  discount?: number;\n  description?: string;\n  total?: number;\n}\n\n// Populated Quotation Product interface (with product details)\nexport interface PopulatedQuotationProduct extends QuotationProduct {\n  product: Product;\n  amount: number;\n  gstAmount: number;\n}\n\n// Quotation Template interface\nexport interface QuotationTemplate extends BusinessDocument {\n  name: string;\n  prefix: string;\n  companyName: string;\n  companyAddress: string;\n  companyGst?: string;\n  termsAndConditions: string;\n  logoUrl?: string;\n  isDefault?: boolean;\n  emailTemplate?: string;\n  footerText?: string;\n}\n\n// Quotation interface\nexport interface Quotation extends BusinessDocument {\n  leadId: string;\n  templateId: string;\n  quotationNumber: string;\n  date: string;\n  validUntil: string;\n  status: 'Draft' | 'Sent' | 'Accepted' | 'Rejected' | 'Expired';\n  products: QuotationProduct[];\n  subTotal: number;\n  totalGst: number;\n  grandTotal: number;\n  discount?: number;\n  // Company fields (seller)\n  companyName?: string;\n  companyAddress?: string;\n  companyGst?: string;\n  // Client fields (buyer)\n  client_address?: string;\n  client_gst_no?: string;\n  termsAndConditions?: string;\n  logoUrl?: string;\n  notes?: string;\n  sentAt?: Timestamp | string;\n  acceptedAt?: Timestamp | string;\n  rejectedAt?: Timestamp | string;\n  // Additional charges (can be number or string for backward compatibility)\n  freightCharges?: string | number;\n  courierCharges?: string | number;\n  // Flags to show/hide charges in PDF\n  showFreight?: boolean;\n  showCourier?: boolean;\n  // GST visibility control\n  showGst?: boolean;\n  // Currency fields\n  currencyCode?: string; // Selected currency code (default: INR)\n  currencySymbol?: string; // Currency symbol for display\n  conversionRate?: number; // Conversion rate at time of quotation creation\n}\n\n// Customer interface (derived from successful leads)\nexport interface Customer extends BusinessDocument {\n  name: string;\n  company: string;\n  email: string;\n  phone: string;\n  whatsappNumber?: string;\n  address?: string;\n  gstNumber?: string;\n  contactPerson?: string;\n  leadId?: string; // Reference to original lead\n  totalValue?: number;\n  lastOrderDate?: Timestamp | string;\n  status: 'Active' | 'Inactive' | 'Blocked';\n  paymentTerms?: string;\n  creditLimit?: number;\n  tags?: string[];\n}\n\n// Order interface\nexport interface Order extends BusinessDocument {\n  customerId: string;\n  quotationId?: string;\n  orderNumber: string;\n  orderDate: Timestamp | string;\n  expectedDeliveryDate?: Timestamp | string;\n  actualDeliveryDate?: Timestamp | string;\n  status: 'Pending' | 'Confirmed' | 'In Production' | 'Ready' | 'Shipped' | 'Delivered' | 'Cancelled';\n  products: QuotationProduct[];\n  subTotal: number;\n  totalGst: number;\n  grandTotal: number;\n  discount?: number;\n  shippingAddress?: string;\n  billingAddress?: string;\n  paymentStatus: 'Pending' | 'Partial' | 'Paid' | 'Overdue';\n  paymentMethod?: string;\n  notes?: string;\n  assignedTo?: string;\n}\n\n// Invoice interface\nexport interface Invoice extends BusinessDocument {\n  orderId: string;\n  customerId: string;\n  invoiceNumber: string;\n  invoiceDate: Timestamp | string;\n  dueDate: Timestamp | string;\n  status: 'Draft' | 'Sent' | 'Paid' | 'Overdue' | 'Cancelled';\n  products: QuotationProduct[];\n  subTotal: number;\n  totalGst: number;\n  grandTotal: number;\n  amountPaid?: number;\n  balanceAmount?: number;\n  paymentTerms?: string;\n  notes?: string;\n}\n\n// Payment interface\nexport interface Payment extends BusinessDocument {\n  invoiceId: string;\n  customerId: string;\n  amount: number;\n  paymentDate: Timestamp | string;\n  paymentMethod: 'Cash' | 'Cheque' | 'Bank Transfer' | 'UPI' | 'Card' | 'Other';\n  referenceNumber?: string;\n  notes?: string;\n  status: 'Pending' | 'Cleared' | 'Failed' | 'Cancelled';\n}\n\n// Task interface\nexport interface Task extends BusinessDocument {\n  title: string;\n  description?: string;\n  assignedTo: string;\n  assignedBy?: string;\n  dueDate?: Timestamp | string;\n  priority: 'Low' | 'Medium' | 'High' | 'Urgent';\n  status: 'Todo' | 'In Progress' | 'Review' | 'Done' | 'Cancelled';\n  category?: string;\n  tags?: string[];\n  relatedTo?: {\n    type: 'lead' | 'customer' | 'order' | 'quotation';\n    id: string;\n  };\n  completedAt?: Timestamp | string;\n  estimatedHours?: number;\n  actualHours?: number;\n}\n\n// Company Settings interface\nexport interface CompanySettings extends BusinessDocument {\n  companyName: string;\n  companyAddress: string;\n  companyPhone: string;\n  companyEmail: string;\n  companyWebsite?: string;\n  gstNumber: string;\n  logoUrl?: string;\n  currency: string;\n  timezone: string;\n  fiscalYearStart: string;\n  defaultPaymentTerms: string;\n  emailSignature?: string;\n  bankDetails?: {\n    bankName: string;\n    accountNumber: string;\n    ifscCode: string;\n    accountHolderName: string;\n  };\n}\n\n// Analytics/Dashboard data interfaces\nexport interface DashboardMetrics {\n  totalLeads: number;\n  activeLeads: number;\n  convertedLeads: number;\n  totalRevenue: number;\n  monthlyRevenue: number;\n  pendingQuotations: number;\n  overdueInvoices: number;\n  topProducts: Array<{\n    productId: string;\n    productName: string;\n    totalSold: number;\n    revenue: number;\n  }>;\n  leadsBySource: Array<{\n    source: string;\n    count: number;\n    conversionRate: number;\n  }>;\n  salesByMonth: Array<{\n    month: string;\n    revenue: number;\n    orders: number;\n  }>;\n}\n\n// Notification interface\nexport interface Notification extends BusinessDocument {\n  userId: string;\n  title: string;\n  message: string;\n  type: 'info' | 'success' | 'warning' | 'error';\n  isRead: boolean;\n  actionUrl?: string;\n  relatedTo?: {\n    type: string;\n    id: string;\n  };\n}\n\n// User Activity Log interface\nexport interface ActivityLog extends BusinessDocument {\n  userId: string;\n  action: string;\n  entityType: string;\n  entityId: string;\n  details?: Record<string, any>;\n  ipAddress?: string;\n  userAgent?: string;\n}\n\n// Currency interface\nexport interface Currency extends BusinessDocument {\n  code: string; // e.g., USD, EUR, GBP, INR\n  name: string; // e.g., US Dollar, Euro, British Pound, Indian Rupee\n  symbol: string; // e.g., $, €, £, ₹\n  conversionRate: number; // How many INR = 1 unit of this currency (INR = 1.0)\n}\n\n// Collection names constants\nexport const COLLECTIONS = {\n  EMPLOYEES: 'employees',\n  DEPARTMENTS: 'departments',\n  EMPLOYEE_ROLES: 'employeeRoles',\n  LEAD_SOURCES: 'leadSources',\nPRODUCT_CATEGORIES: 'productModels',\n  PRODUCTS: 'products',\n  LEADS: 'leads',\n  QUOTATIONS: 'quotations',\n  QUOTATION_TEMPLATES: 'quotationTemplates',\n  CUSTOMERS: 'customers',\n  ORDERS: 'orders',\n  INVOICES: 'invoices',\n  PAYMENTS: 'payments',\n  TASKS: 'tasks',\n  COMPANY_SETTINGS: 'companySettings',\n  NOTIFICATIONS: 'notifications',\n  ACTIVITY_LOGS: 'activityLogs',\n  CURRENCIES: 'currencies',\n} as const;\n\n// Type for collection names\nexport type CollectionName = typeof COLLECTIONS[keyof typeof COLLECTIONS];\n"],"names":[],"mappings":";;;AA4XO,MAAM,cAAc;IACzB,WAAW;IACX,aAAa;IACb,gBAAgB;IAChB,cAAc;IAChB,oBAAoB;IAClB,UAAU;IACV,OAAO;IACP,YAAY;IACZ,qBAAqB;IACrB,WAAW;IACX,QAAQ;IACR,UAAU;IACV,UAAU;IACV,OAAO;IACP,kBAAkB;IAClB,eAAe;IACf,eAAe;IACf,YAAY;AACd","debugId":null}},
    {"offset": {"line": 184, "column": 0}, "map": {"version":3,"sources":["file:///Users/gauravshukla/Downloads/ll/src/lib/firestore-service.ts"],"sourcesContent":["import {\n  collection,\n  doc,\n  addDoc,\n  getDoc,\n  getDocs,\n  updateDoc,\n  deleteDoc,\n  setDoc,\n  query,\n  where,\n  orderBy,\n  limit,\n  startAfter,\n  onSnapshot,\n  writeBatch,\n  runTransaction,\n  serverTimestamp,\n  Timestamp,\n  DocumentReference,\n  Query,\n  QuerySnapshot,\n  DocumentSnapshot,\n  Unsubscribe,\n  WhereFilterOp\n} from \"firebase/firestore\";\nimport { db } from \"./firebase\";\nimport { FirestoreDocument, QueryOptions, PaginationResult } from \"./firestore-types\";\n\n/**\n * Generic Firestore service class for CRUD operations\n */\nexport class FirestoreService<T extends FirestoreDocument> {\n  private collectionName: string;\n\n  constructor(collectionName: string) {\n    this.collectionName = collectionName;\n  }\n\n  /**\n   * Create a new document\n   */\n  async create(data: Omit<T, 'id' | 'createdAt' | 'updatedAt'>): Promise<string> {\n    try {\n      // Remove undefined values as Firestore doesn't accept them\n      const cleanData: any = {};\n      for (const [key, value] of Object.entries(data)) {\n        if (value !== undefined) {\n          cleanData[key] = value;\n        }\n      }\n      \n      const docData = {\n        ...cleanData,\n        createdAt: serverTimestamp(),\n        updatedAt: serverTimestamp(),\n      };\n      \n      const docRef = await addDoc(collection(db, this.collectionName), docData);\n      return docRef.id;\n    } catch (error) {\n      console.error(`Error creating document in ${this.collectionName}:`, error);\n      throw error;\n    }\n  }\n\n  /**\n   * Create a document with a specific ID\n   */\n  async createWithId(id: string, data: Omit<T, 'id' | 'createdAt' | 'updatedAt'>): Promise<void> {\n    try {\n      // Remove undefined values as Firestore doesn't accept them\n      const cleanData: any = {};\n      for (const [key, value] of Object.entries(data)) {\n        if (value !== undefined) {\n          cleanData[key] = value;\n        }\n      }\n      \n      const docData = {\n        ...cleanData,\n        createdAt: serverTimestamp(),\n        updatedAt: serverTimestamp(),\n      };\n      \n      const docRef = doc(db, this.collectionName, id);\n      await setDoc(docRef, docData);\n    } catch (error) {\n      console.error(`Error creating document with ID ${id} in ${this.collectionName}:`, error);\n      throw error;\n    }\n  }\n\n  /**\n   * Get a document by ID\n   */\n  async getById(id: string): Promise<T | null> {\n    try {\n      const docRef = doc(db, this.collectionName, id);\n      const docSnap = await getDoc(docRef);\n      \n      if (docSnap.exists()) {\n        return {\n          id: docSnap.id,\n          ...docSnap.data(),\n        } as T;\n      }\n      \n      return null;\n    } catch (error) {\n      console.error(`Error getting document ${id} from ${this.collectionName}:`, error);\n      throw error;\n    }\n  }\n\n  /**\n   * Get all documents\n   */\n  async getAll(): Promise<T[]> {\n    try {\n      const querySnapshot = await getDocs(collection(db, this.collectionName));\n      return querySnapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data(),\n      })) as T[];\n    } catch (error) {\n      console.error(`Error getting all documents from ${this.collectionName}:`, error);\n      throw error;\n    }\n  }\n\n  /**\n   * Get documents with query options\n   */\n  async getWithQuery(options: QueryOptions = {}): Promise<T[]> {\n    try {\n      let q = collection(db, this.collectionName) as Query;\n\n      // Apply where conditions\n      if (options.where) {\n        options.where.forEach(condition => {\n          q = query(q, where(condition.field, condition.operator as WhereFilterOp, condition.value));\n        });\n      }\n\n      // Apply ordering\n      if (options.orderBy) {\n        q = query(q, orderBy(options.orderBy.field, options.orderBy.direction));\n      }\n\n      // Apply limit\n      if (options.limit) {\n        q = query(q, limit(options.limit));\n      }\n\n      // Apply pagination\n      if (options.startAfter) {\n        q = query(q, startAfter(options.startAfter));\n      }\n\n      const querySnapshot = await getDocs(q);\n      return querySnapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data(),\n      })) as T[];\n    } catch (error) {\n      console.error(`Error querying documents from ${this.collectionName}:`, error);\n      throw error;\n    }\n  }\n\n  /**\n   * Get paginated results\n   */\n  async getPaginated(options: QueryOptions & { pageSize: number }): Promise<PaginationResult<T>> {\n    try {\n      const queryOptions = { ...options, limit: options.pageSize };\n      const documents = await this.getWithQuery(queryOptions);\n      \n      const hasMore = documents.length === options.pageSize;\n      const lastDoc = documents.length > 0 ? documents[documents.length - 1] : undefined;\n\n      return {\n        data: documents,\n        hasMore,\n        lastDoc,\n      };\n    } catch (error) {\n      console.error(`Error getting paginated documents from ${this.collectionName}:`, error);\n      throw error;\n    }\n  }\n\n  /**\n   * Update a document\n   */\n  async update(id: string, data: Partial<Omit<T, 'id' | 'createdAt'>>): Promise<void> {\n    try {\n      const docRef = doc(db, this.collectionName, id);\n      \n      // Remove undefined values as Firestore doesn't accept them\n      const cleanData: any = {};\n      for (const [key, value] of Object.entries(data)) {\n        if (value !== undefined) {\n          cleanData[key] = value;\n        }\n      }\n      \n      const updateData = {\n        ...cleanData,\n        updatedAt: serverTimestamp(),\n      };\n      \n      await updateDoc(docRef, updateData);\n    } catch (error) {\n      console.error(`Error updating document ${id} in ${this.collectionName}:`, error);\n      throw error;\n    }\n  }\n\n  /**\n   * Delete a document\n   */\n  async delete(id: string): Promise<void> {\n    try {\n      const docRef = doc(db, this.collectionName, id);\n      await deleteDoc(docRef);\n    } catch (error) {\n      console.error(`Error deleting document ${id} from ${this.collectionName}:`, error);\n      throw error;\n    }\n  }\n\n  /**\n   * Delete multiple documents\n   */\n  async deleteMultiple(ids: string[]): Promise<void> {\n    try {\n      const batch = writeBatch(db);\n      \n      ids.forEach(id => {\n        const docRef = doc(db, this.collectionName, id);\n        batch.delete(docRef);\n      });\n      \n      await batch.commit();\n    } catch (error) {\n      console.error(`Error deleting multiple documents from ${this.collectionName}:`, error);\n      throw error;\n    }\n  }\n\n  /**\n   * Listen to real-time updates for a document\n   */\n  onDocumentSnapshot(id: string, callback: (doc: T | null) => void): Unsubscribe {\n    const docRef = doc(db, this.collectionName, id);\n    \n    return onSnapshot(docRef, (docSnap) => {\n      if (docSnap.exists()) {\n        const document = {\n          id: docSnap.id,\n          ...docSnap.data(),\n        } as T;\n        callback(document);\n      } else {\n        callback(null);\n      }\n    }, (error) => {\n      console.error(`Error listening to document ${id} in ${this.collectionName}:`, error);\n    });\n  }\n\n  /**\n   * Listen to real-time updates for a collection\n   */\n  onCollectionSnapshot(options: QueryOptions = {}, callback: (docs: T[]) => void): Unsubscribe {\n    let q = collection(db, this.collectionName) as Query;\n\n    // Apply query options (similar to getWithQuery)\n    if (options.where) {\n      options.where.forEach(condition => {\n        q = query(q, where(condition.field, condition.operator as WhereFilterOp, condition.value));\n      });\n    }\n\n    if (options.orderBy) {\n      q = query(q, orderBy(options.orderBy.field, options.orderBy.direction));\n    }\n\n    if (options.limit) {\n      q = query(q, limit(options.limit));\n    }\n\n    return onSnapshot(q, (querySnapshot) => {\n      const documents = querySnapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data(),\n      })) as T[];\n      callback(documents);\n    }, (error) => {\n      console.error(`Error listening to collection ${this.collectionName}:`, error);\n    });\n  }\n\n  /**\n   * Batch write operations\n   */\n  async batchWrite(operations: Array<{\n    type: 'create' | 'update' | 'delete';\n    id?: string;\n    data?: Partial<T>;\n  }>): Promise<void> {\n    try {\n      const batch = writeBatch(db);\n\n      operations.forEach(operation => {\n        switch (operation.type) {\n          case 'create':\n            if (operation.id && operation.data) {\n              const docRef = doc(db, this.collectionName, operation.id);\n              batch.set(docRef, {\n                ...operation.data,\n                createdAt: serverTimestamp(),\n                updatedAt: serverTimestamp(),\n              });\n            }\n            break;\n          case 'update':\n            if (operation.id && operation.data) {\n              const docRef = doc(db, this.collectionName, operation.id);\n              batch.update(docRef, {\n                ...operation.data,\n                updatedAt: serverTimestamp(),\n              });\n            }\n            break;\n          case 'delete':\n            if (operation.id) {\n              const docRef = doc(db, this.collectionName, operation.id);\n              batch.delete(docRef);\n            }\n            break;\n        }\n      });\n\n      await batch.commit();\n    } catch (error) {\n      console.error(`Error performing batch operations on ${this.collectionName}:`, error);\n      throw error;\n    }\n  }\n\n  /**\n   * Transaction example\n   */\n  async runTransaction<R>(\n    updateFunction: (transaction: any) => Promise<R>\n  ): Promise<R> {\n    try {\n      return await runTransaction(db, updateFunction);\n    } catch (error) {\n      console.error(`Error running transaction on ${this.collectionName}:`, error);\n      throw error;\n    }\n  }\n\n  /**\n   * Count documents (Note: This is an expensive operation for large collections)\n   */\n  async count(options: QueryOptions = {}): Promise<number> {\n    try {\n      const documents = await this.getWithQuery(options);\n      return documents.length;\n    } catch (error) {\n      console.error(`Error counting documents in ${this.collectionName}:`, error);\n      throw error;\n    }\n  }\n\n  /**\n   * Check if document exists\n   */\n  async exists(id: string): Promise<boolean> {\n    try {\n      const docRef = doc(db, this.collectionName, id);\n      const docSnap = await getDoc(docRef);\n      return docSnap.exists();\n    } catch (error) {\n      console.error(`Error checking if document ${id} exists in ${this.collectionName}:`, error);\n      throw error;\n    }\n  }\n}\n\n// Utility functions\nexport const createTimestamp = () => Timestamp.now();\nexport const serverTime = () => serverTimestamp();\n\n// Helper function to convert Firestore timestamp to Date\nexport const timestampToDate = (timestamp: Timestamp): Date => {\n  return timestamp.toDate();\n};\n\n// Helper function to format timestamp\nexport const formatTimestamp = (timestamp: Timestamp, locale = 'en-US'): string => {\n  return timestamp.toDate().toLocaleDateString(locale);\n};\n\n// Currency-specific functions\nimport { Currency, COLLECTIONS } from './business-types';\n\nexport async function getAllCurrencies(): Promise<Currency[]> {\n  const snapshot = await getDocs(collection(db, COLLECTIONS.CURRENCIES));\n  return snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() } as Currency));\n}\n\nexport async function getActiveCurrencies(): Promise<Currency[]> {\n  const q = query(\n    collection(db, COLLECTIONS.CURRENCIES),\n    orderBy('code', 'asc')\n  );\n  const snapshot = await getDocs(q);\n  return snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() } as Currency));\n}\n\nexport async function getCurrencyById(id: string): Promise<Currency | null> {\n  const docRef = doc(db, COLLECTIONS.CURRENCIES, id);\n  const docSnap = await getDoc(docRef);\n  if (docSnap.exists()) {\n    return { id: docSnap.id, ...docSnap.data() } as Currency;\n  }\n  return null;\n}\n\nexport async function addCurrency(currencyData: Omit<Currency, 'id' | 'createdAt' | 'updatedAt'>): Promise<string> {\n  const docRef = await addDoc(collection(db, COLLECTIONS.CURRENCIES), {\n    ...currencyData,\n    createdAt: serverTimestamp(),\n    updatedAt: serverTimestamp()\n  });\n  return docRef.id;\n}\n\nexport async function updateCurrency(id: string, currencyData: Partial<Currency>): Promise<void> {\n  const docRef = doc(db, COLLECTIONS.CURRENCIES, id);\n  await updateDoc(docRef, {\n    ...currencyData,\n    updatedAt: serverTimestamp()\n  });\n}\n\nexport async function deleteCurrency(id: string): Promise<void> {\n  const docRef = doc(db, COLLECTIONS.CURRENCIES, id);\n  await deleteDoc(docRef);\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 567, "column": 0}, "map": {"version":3,"sources":["file:///Users/gauravshukla/Downloads/ll/src/lib/business-services.ts"],"sourcesContent":["import { FirestoreService } from './firestore-service';\nimport {\n  Employee,\n  Department,\n  EmployeeRole,\n  LeadSource,\n  ProductCategory,\n  Product,\n  Lead,\n  Quotation,\n  QuotationTemplate,\n  Customer,\n  Order,\n  Invoice,\n  Payment,\n  Task,\n  CompanySettings,\n  Notification,\n  ActivityLog,\n  COLLECTIONS\n} from './business-types';\n\n// Create service instances for all business collections\nexport const employeesService = new FirestoreService<Employee>(COLLECTIONS.EMPLOYEES);\nexport const departmentsService = new FirestoreService<Department>(COLLECTIONS.DEPARTMENTS);\nexport const employeeRolesService = new FirestoreService<EmployeeRole>(COLLECTIONS.EMPLOYEE_ROLES);\nexport const leadSourcesService = new FirestoreService<LeadSource>(COLLECTIONS.LEAD_SOURCES);\nexport const productCategoriesService = new FirestoreService<ProductCategory>(COLLECTIONS.PRODUCT_CATEGORIES);\nexport const productsService = new FirestoreService<Product>(COLLECTIONS.PRODUCTS);\nexport const leadsService = new FirestoreService<Lead>(COLLECTIONS.LEADS);\nexport const quotationsService = new FirestoreService<Quotation>(COLLECTIONS.QUOTATIONS);\nexport const quotationTemplatesService = new FirestoreService<QuotationTemplate>(COLLECTIONS.QUOTATION_TEMPLATES);\nexport const customersService = new FirestoreService<Customer>(COLLECTIONS.CUSTOMERS);\nexport const ordersService = new FirestoreService<Order>(COLLECTIONS.ORDERS);\nexport const invoicesService = new FirestoreService<Invoice>(COLLECTIONS.INVOICES);\nexport const paymentsService = new FirestoreService<Payment>(COLLECTIONS.PAYMENTS);\nexport const tasksService = new FirestoreService<Task>(COLLECTIONS.TASKS);\nexport const companySettingsService = new FirestoreService<CompanySettings>(COLLECTIONS.COMPANY_SETTINGS);\nexport const notificationsService = new FirestoreService<Notification>(COLLECTIONS.NOTIFICATIONS);\nexport const activityLogsService = new FirestoreService<ActivityLog>(COLLECTIONS.ACTIVITY_LOGS);\n\n// Extended service classes with business logic\nexport class EmployeeService extends FirestoreService<Employee> {\n  constructor() {\n    super(COLLECTIONS.EMPLOYEES);\n  }\n\n  async getEmployeeByEmail(email: string): Promise<Employee | null> {\n    const employees = await this.getWithQuery({\n      where: [{ field: 'email', operator: '==', value: email }],\n      limit: 1\n    });\n    return employees.length > 0 ? employees[0] : null;\n  }\n\n  async getEmployeesByDepartment(department: string): Promise<Employee[]> {\n    return this.getWithQuery({\n      where: [{ field: 'department', operator: '==', value: department }],\n      orderBy: { field: 'name', direction: 'asc' }\n    });\n  }\n\n  async getEmployeesByRole(role: string): Promise<Employee[]> {\n    return this.getWithQuery({\n      where: [{ field: 'role', operator: '==', value: role }],\n      orderBy: { field: 'name', direction: 'asc' }\n    });\n  }\n\n  async getActiveEmployees(): Promise<Employee[]> {\n    return this.getWithQuery({\n      where: [{ field: 'isActive', operator: '==', value: true }],\n      orderBy: { field: 'name', direction: 'asc' }\n    });\n  }\n}\n\nexport class LeadService extends FirestoreService<Lead> {\n  constructor() {\n    super(COLLECTIONS.LEADS);\n  }\n\n  async getLeadsByStatus(status: Lead['status']): Promise<Lead[]> {\n    return this.getWithQuery({\n      where: [{ field: 'status', operator: '==', value: status }],\n      orderBy: { field: 'createdAt', direction: 'desc' }\n    });\n  }\n\n  async getLeadsBySource(source: string): Promise<Lead[]> {\n    return this.getWithQuery({\n      where: [{ field: 'source', operator: '==', value: source }],\n      orderBy: { field: 'createdAt', direction: 'desc' }\n    });\n  }\n\n  async getLeadsByAssignee(assignedTo: string): Promise<Lead[]> {\n    return this.getWithQuery({\n      where: [{ field: 'assignedTo', operator: '==', value: assignedTo }],\n      orderBy: { field: 'createdAt', direction: 'desc' }\n    });\n  }\n\n  async getRecentLeads(limit: number = 10): Promise<Lead[]> {\n    return this.getWithQuery({\n      orderBy: { field: 'createdAt', direction: 'desc' },\n      limit\n    });\n  }\n\n  async addActivity(leadId: string, activity: Omit<Lead['activities'][0], 'id'>): Promise<void> {\n    const lead = await this.getById(leadId);\n    if (lead) {\n      // Remove undefined values before persisting\n      const sanitized = Object.fromEntries(\n        Object.entries(activity as Record<string, unknown>).filter(([, v]) => v !== undefined)\n      ) as Omit<Lead['activities'][0], 'id'>;\n      const newActivity = {\n        ...sanitized,\n        id: `act-${leadId}-${Date.now()}`\n      };\n      \n      const updatedActivities = [...(lead.activities || []), newActivity];\n      await this.update(leadId, { activities: updatedActivities });\n    }\n  }\n\n  async updateStatus(leadId: string, status: Lead['status'], notes?: string): Promise<void> {\n    await this.update(leadId, { status });\n    \n    if (notes) {\n      await this.addActivity(leadId, {\n        date: new Date().toISOString(),\n        type: 'Other',\n        notes: `Status changed to ${status}. ${notes}`\n      });\n    }\n  }\n}\n\nexport class ProductService extends FirestoreService<Product> {\n  constructor() {\n    super(COLLECTIONS.PRODUCTS);\n  }\n\n  async getActiveProducts(): Promise<Product[]> {\n    return this.getWithQuery({\n      where: [{ field: 'isActive', operator: '==', value: true }],\n      orderBy: { field: 'name', direction: 'asc' }\n    });\n  }\n}\n\nexport class ProductCategoryService extends FirestoreService<ProductCategory> {\n  constructor() {\n    super(COLLECTIONS.PRODUCT_CATEGORIES);\n  }\n}\n\nexport class QuotationService extends FirestoreService<Quotation> {\n  constructor() {\n    super(COLLECTIONS.QUOTATIONS);\n  }\n\n  async getQuotationsByLead(leadId: string): Promise<Quotation[]> {\n    return this.getWithQuery({\n      where: [{ field: 'leadId', operator: '==', value: leadId }],\n      orderBy: { field: 'createdAt', direction: 'desc' }\n    });\n  }\n\n  async getQuotationsByStatus(status: Quotation['status']): Promise<Quotation[]> {\n    return this.getWithQuery({\n      where: [{ field: 'status', operator: '==', value: status }],\n      orderBy: { field: 'createdAt', direction: 'desc' }\n    });\n  }\n\n  async getRecentQuotations(limit: number = 10): Promise<Quotation[]> {\n    return this.getWithQuery({\n      orderBy: { field: 'createdAt', direction: 'desc' },\n      limit\n    });\n  }\n\n  async generateQuotationNumber(prefix: string): Promise<string> {\n    const quotations = await this.getAll();\n    const regex = new RegExp(`^${prefix}-\\\\d{4}$`);\n    const numberRegex = new RegExp(`^${prefix}-(\\\\d+)$`);\n    const maxNumber = quotations.reduce((max, quotation) => {\n      if (!quotation.quotationNumber) return max;\n      if (!regex.test(quotation.quotationNumber)) return max;\n      const match = quotation.quotationNumber.match(numberRegex);\n      if (match) {\n        const num = parseInt(match[1], 10);\n        return num > max ? num : max;\n      }\n      return max;\n    }, 0);\n    return `${prefix}-${String(maxNumber + 1).padStart(4, '0')}`;\n  }\n\n  async markAsSent(quotationId: string): Promise<void> {\n    await this.update(quotationId, {\n      status: 'Sent',\n      sentAt: new Date().toISOString()\n    });\n  }\n\n  async markAsAccepted(quotationId: string): Promise<void> {\n    await this.update(quotationId, {\n      status: 'Accepted',\n      acceptedAt: new Date().toISOString()\n    });\n  }\n}\n\nexport class CustomerService extends FirestoreService<Customer> {\n  constructor() {\n    super(COLLECTIONS.CUSTOMERS);\n  }\n\n  async getCustomerByEmail(email: string): Promise<Customer | null> {\n    const customers = await this.getWithQuery({\n      where: [{ field: 'email', operator: '==', value: email }],\n      limit: 1\n    });\n    return customers.length > 0 ? customers[0] : null;\n  }\n\n  async getActiveCustomers(): Promise<Customer[]> {\n    return this.getWithQuery({\n      where: [{ field: 'status', operator: '==', value: 'Active' }],\n      orderBy: { field: 'name', direction: 'asc' }\n    });\n  }\n\n  async getTopCustomers(limit: number = 10): Promise<Customer[]> {\n    return this.getWithQuery({\n      where: [{ field: 'status', operator: '==', value: 'Active' }],\n      orderBy: { field: 'totalValue', direction: 'desc' },\n      limit\n    });\n  }\n\n  async createFromLead(lead: Lead): Promise<string> {\n    const customer: Omit<Customer, 'id' | 'createdAt' | 'updatedAt'> = {\n      name: lead.name,\n      company: lead.company,\n      email: lead.email,\n      phone: lead.phone,\n      whatsappNumber: lead.whatsappNumber,\n      leadId: lead.id,\n      status: 'Active',\n      totalValue: 0\n    };\n    \n    return this.create(customer);\n  }\n}\n\nexport class OrderService extends FirestoreService<Order> {\n  constructor() {\n    super(COLLECTIONS.ORDERS);\n  }\n\n  async getOrdersByCustomer(customerId: string): Promise<Order[]> {\n    return this.getWithQuery({\n      where: [{ field: 'customerId', operator: '==', value: customerId }],\n      orderBy: { field: 'orderDate', direction: 'desc' }\n    });\n  }\n\n  async getOrdersByStatus(status: Order['status']): Promise<Order[]> {\n    return this.getWithQuery({\n      where: [{ field: 'status', operator: '==', value: status }],\n      orderBy: { field: 'orderDate', direction: 'desc' }\n    });\n  }\n\n  async getRecentOrders(limit: number = 10): Promise<Order[]> {\n    return this.getWithQuery({\n      orderBy: { field: 'orderDate', direction: 'desc' },\n      limit\n    });\n  }\n\n  async generateOrderNumber(): Promise<string> {\n    const orders = await this.getAll();\n    const maxNumber = orders.reduce((max, order) => {\n      const match = order.orderNumber.match(/ORD-(\\d+)/);\n      if (match) {\n        const num = parseInt(match[1]);\n        return num > max ? num : max;\n      }\n      return max;\n    }, 0);\n    \n    return `ORD-${String(maxNumber + 1).padStart(4, '0')}`;\n  }\n\n  async updateStatus(orderId: string, status: Order['status']): Promise<void> {\n    const updateData: Partial<Order> = { status };\n    \n    if (status === 'Delivered') {\n      updateData.actualDeliveryDate = new Date().toISOString();\n    }\n    \n    await this.update(orderId, updateData);\n  }\n}\n\nexport class TaskService extends FirestoreService<Task> {\n  constructor() {\n    super(COLLECTIONS.TASKS);\n  }\n\n  async getTasksByAssignee(assignedTo: string): Promise<Task[]> {\n    return this.getWithQuery({\n      where: [{ field: 'assignedTo', operator: '==', value: assignedTo }],\n      orderBy: { field: 'dueDate', direction: 'asc' }\n    });\n  }\n\n  async getTasksByStatus(status: Task['status']): Promise<Task[]> {\n    return this.getWithQuery({\n      where: [{ field: 'status', operator: '==', value: status }],\n      orderBy: { field: 'dueDate', direction: 'asc' }\n    });\n  }\n\n  async getOverdueTasks(): Promise<Task[]> {\n    const now = new Date().toISOString();\n    const tasks = await this.getWithQuery({\n      where: [\n        { field: 'status', operator: '!=', value: 'Done' },\n        { field: 'status', operator: '!=', value: 'Cancelled' }\n      ]\n    });\n    \n    return tasks.filter(task => \n      task.dueDate && task.dueDate < now\n    );\n  }\n\n  async markAsCompleted(taskId: string): Promise<void> {\n    await this.update(taskId, {\n      status: 'Done',\n      completedAt: new Date().toISOString()\n    });\n  }\n}\n\n// Create instances of extended services\nexport const employeeService = new EmployeeService();\nexport const leadService = new LeadService();\nexport const productService = new ProductService();\nexport const productCategoryService = new ProductCategoryService();\nexport const quotationService = new QuotationService();\nexport const customerService = new CustomerService();\nexport const orderService = new OrderService();\nexport const taskService = new TaskService();\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1072, "column": 0}, "map": {"version":3,"sources":["file:///Users/gauravshukla/Downloads/ll/src/lib/firestore-data-service.ts"],"sourcesContent":["'use server';\n\nimport { \n  employeeService, \n  leadService, \n  productService, \n  productCategoryService,\n  quotationService,\n  departmentsService,\n  employeeRolesService,\n  leadSourcesService,\n  productCategoriesService,\n  quotationTemplatesService\n} from './business-services';\nimport { \n  Employee, \n  Lead, \n  Product, \n  Quotation, \n  QuotationTemplate,\n  Department,\n  EmployeeRole,\n  LeadSource,\n  ProductCategory,\n  LeadActivity\n} from './business-types';\nimport { Timestamp } from 'firebase/firestore';\n\n// Helper function to convert Firestore Timestamps to plain objects\nfunction convertTimestampToPlain(obj: any): any {\n  if (!obj) return obj;\n  \n  if (obj instanceof Timestamp) {\n    return obj.toDate().toISOString();\n  }\n  \n  if (Array.isArray(obj)) {\n    return obj.map(item => convertTimestampToPlain(item));\n  }\n  \n  if (typeof obj === 'object') {\n    const converted: any = {};\n    for (const key in obj) {\n      if (obj.hasOwnProperty(key)) {\n        converted[key] = convertTimestampToPlain(obj[key]);\n      }\n    }\n    return converted;\n  }\n  \n  return obj;\n}\n\n// Helper function to convert Firestore documents to plain objects\nfunction convertFirestoreDocToPlain<T>(doc: T): T {\n  return convertTimestampToPlain(doc);\n}\n\n// Type definitions to match your existing types\nexport interface Activity extends LeadActivity {}\n\nexport interface NewEmployee {\n  name: string;\n  email: string;\n  phone: string;\n  role: string;\n  department: string;\n  address: string;\n}\n\nexport interface NewProduct {\n  name: string;\n  price: number;\n  gstRate: number;\n  categoryId?: string;\n  description?: string;\n  skus?: string[];\n  catalogueUrl?: string;\n  cataloguePdf?: {\n    url: string;\n    fileName: string;\n    filePath: string;\n    uploadedAt: string;\n  };\n  productImage?: {\n    url: string;\n    fileName: string;\n    filePath: string;\n    uploadedAt: string;\n  };\n}\n\nexport interface UpdatableLeadData {\n  name?: string;\n  company?: string;\n  email?: string;\n  phone?: string;\n  whatsappNumber?: string;\n  status?: Lead['status'];\n  source?: string;\n  products?: Lead['products'];\n}\n\n// Employee functions\nexport const getEmployees = async (): Promise<Employee[]> => {\n  const employees = await employeeService.getAll();\n  return employees.map(emp => convertFirestoreDocToPlain(emp));\n};\n\nexport const getEmployeeById = async (id: string): Promise<Employee | undefined> => {\n  const employee = await employeeService.getById(id);\n  return employee ? convertFirestoreDocToPlain(employee) : undefined;\n};\n\nexport const getEmployeeByEmail = async (email: string): Promise<Employee | null> => {\n  const employee = await employeeService.getEmployeeByEmail(email);\n  return employee ? convertFirestoreDocToPlain(employee) : null;\n};\n\nexport const addEmployee = async (employeeData: NewEmployee): Promise<Employee> => {\n  const id = await employeeService.create({\n    ...employeeData,\n    isActive: true\n  });\n  \n  const newEmployee = await employeeService.getById(id);\n  if (!newEmployee) {\n    throw new Error('Failed to create employee');\n  }\n  \n  return convertFirestoreDocToPlain(newEmployee);\n};\n\nexport const updateEmployee = async (id: string, employeeData: Partial<NewEmployee>): Promise<Employee> => {\n  await employeeService.update(id, employeeData);\n  const updatedEmployee = await employeeService.getById(id);\n  if (!updatedEmployee) {\n    throw new Error('Employee not found after update');\n  }\n  return convertFirestoreDocToPlain(updatedEmployee);\n};\n\nexport const deleteEmployee = async (id: string): Promise<{ success: boolean }> => {\n  await employeeService.delete(id);\n  return { success: true };\n};\n\n// Lead functions\nexport const getLeads = async (query?: string, status?: string, source?: string, product?: string): Promise<Lead[]> => {\n  let leads: Lead[] = [];\n  \n  if (status) {\n    leads = await leadService.getLeadsByStatus(status as Lead['status']);\n  } else {\n    leads = await leadService.getAll();\n  }\n  \n  // Convert to plain objects\n  leads = leads.map(lead => convertFirestoreDocToPlain(lead));\n  \n  // Apply text search filter\n  if (query) {\n    const lowercasedQuery = query.toLowerCase();\n    leads = leads.filter(\n      lead =>\n        lead.name.toLowerCase().includes(lowercasedQuery) ||\n        lead.company.toLowerCase().includes(lowercasedQuery)\n    );\n  }\n  \n  // Apply source filter\n  if (source) {\n    leads = leads.filter(lead => lead.source === source);\n  }\n  \n  // Apply product filter\n  if (product) {\n    leads = leads.filter(lead => \n      lead.products && lead.products.some(p => p.productId === product)\n    );\n  }\n  \n  return leads.sort((a, b) => {\n    const aDate = a.createdAt ? new Date(a.createdAt.toString()).getTime() : 0;\n    const bDate = b.createdAt ? new Date(b.createdAt.toString()).getTime() : 0;\n    return bDate - aDate;\n  });\n};\n\nexport const getLeadById = async (id: string): Promise<Lead | undefined> => {\n  const lead = await leadService.getById(id);\n  if (!lead) return undefined;\n  \n  const plainLead = convertFirestoreDocToPlain(lead);\n  return {\n    ...plainLead,\n    activities: plainLead.activities.sort((a: any, b: any) => {\n      const aDate = new Date(a.date.toString()).getTime();\n      const bDate = new Date(b.date.toString()).getTime();\n      return bDate - aDate;\n    })\n  };\n};\n\nexport const getRecentActivities = async (limit: number): Promise<{ lead: Lead; activity: Activity }[]> => {\n  const leads = await leadService.getAll();\n  const plainLeads = leads.map(lead => convertFirestoreDocToPlain(lead));\n  \n  const allActivities = plainLeads.flatMap(lead => \n    lead.activities.map(activity => ({ lead, activity }))\n  );\n  \n  return allActivities\n    .sort((a, b) => {\n      const aDate = new Date(a.activity.date.toString()).getTime();\n      const bDate = new Date(b.activity.date.toString()).getTime();\n      return bDate - aDate;\n    })\n    .slice(0, limit);\n};\n\nexport const addLead = async (leadData: Omit<Lead, 'id' | 'createdAt' | 'activities'> & { notes?: string }): Promise<Lead> => {\n  const { notes, ...restOfLeadData } = leadData;\n  \n  const initialActivity: LeadActivity[] = [];\n  if (notes) {\n    initialActivity.push({\n      id: `act-${Date.now()}-1`,\n      date: new Date().toISOString(),\n      type: 'Email',\n      notes: `Lead created in the system. Initial notes: ${notes}`,\n    });\n  }\n\n  const id = await leadService.create({\n    ...restOfLeadData,\n    activities: initialActivity,\n    priority: 'Medium',\n    estimatedValue: leadData.products?.reduce((sum, product) => \n      sum + (product.quantity * product.rate), 0) || 0\n  });\n  \n  const newLead = await leadService.getById(id);\n  if (!newLead) {\n    throw new Error('Failed to create lead');\n  }\n  \n  return convertFirestoreDocToPlain(newLead);\n};\n\nexport const addActivityToLead = async (leadId: string, activityData: Omit<Activity, 'id' | 'date'>): Promise<Activity> => {\n  const lead = await leadService.getById(leadId);\n  if (!lead) {\n    throw new Error('Lead not found');\n  }\n\n  // Remove any undefined values since Firestore does not allow them\n  const sanitizedActivityData = Object.fromEntries(\n    Object.entries(activityData as Record<string, unknown>).filter(([, value]) => value !== undefined)\n  ) as Omit<Activity, 'id' | 'date'>;\n\n  const newActivity: LeadActivity = {\n    ...sanitizedActivityData,\n    id: `act-${leadId}-${Date.now()}`,\n    date: new Date().toISOString(),\n  };\n  \n  await leadService.addActivity(leadId, newActivity);\n  return convertFirestoreDocToPlain(newActivity);\n};\n\nexport const updateLeadStatus = async (leadId: string, status: Lead['status']): Promise<Lead> => {\n  await leadService.updateStatus(leadId, status);\n  const updatedLead = await leadService.getById(leadId);\n  if (!updatedLead) {\n    throw new Error('Lead not found after update');\n  }\n  return convertFirestoreDocToPlain(updatedLead);\n};\n\nexport const updateLead = async (leadId: string, leadData: UpdatableLeadData): Promise<Lead> => {\n  await leadService.update(leadId, leadData);\n  const updatedLead = await leadService.getById(leadId);\n  if (!updatedLead) {\n    throw new Error('Lead not found after update');\n  }\n  return convertFirestoreDocToPlain(updatedLead);\n};\n\nexport const deleteLead = async (id: string): Promise<{ success: boolean }> => {\n  await leadService.delete(id);\n  return { success: true };\n};\n\n// Product functions\nexport const getProducts = async (): Promise<Product[]> => {\n  const products = await productService.getAll();\n  return products.map(product => convertFirestoreDocToPlain(product));\n};\n\nexport const addProduct = async (productData: NewProduct): Promise<Product> => {\n  const id = await productService.create({\n    ...productData,\n    isActive: true,\n    stockQuantity: 100,\n    minStockLevel: 10\n  });\n  \n  const newProduct = await productService.getById(id);\n  if (!newProduct) {\n    throw new Error('Failed to create product');\n  }\n  \n  return convertFirestoreDocToPlain(newProduct);\n};\n\nexport const updateProduct = async (id: string, productData: NewProduct): Promise<Product> => {\n  await productService.update(id, productData);\n  const updatedProduct = await productService.getById(id);\n  if (!updatedProduct) {\n    throw new Error('Product not found after update');\n  }\n  return convertFirestoreDocToPlain(updatedProduct);\n};\n\nexport const deleteProduct = async (id: string): Promise<{ success: boolean }> => {\n  await productService.delete(id);\n  return { success: true };\n};\n\n// Lead Source functions\nexport const getLeadSources = async (): Promise<LeadSource[]> => {\n  const sources = await leadSourcesService.getAll();\n  return sources.map(source => convertFirestoreDocToPlain(source));\n};\n\nexport const addLeadSource = async (name: string): Promise<LeadSource> => {\n  const id = await leadSourcesService.create({\n    name,\n    isActive: true\n  });\n  \n  const newSource = await leadSourcesService.getById(id);\n  if (!newSource) {\n    throw new Error('Failed to create lead source');\n  }\n  \n  return convertFirestoreDocToPlain(newSource);\n};\n\nexport const deleteLeadSource = async (id: string): Promise<{ success: boolean }> => {\n  await leadSourcesService.delete(id);\n  return { success: true };\n};\n\n// Product Category functions\nexport const getProductCategories = async (): Promise<ProductCategory[]> => {\n  const categories = await productCategoriesService.getAll();\n  return categories.map(cat => convertFirestoreDocToPlain(cat));\n};\n\nexport const getProductCategoryById = async (id: string): Promise<ProductCategory | undefined> => {\n  const category = await productCategoriesService.getById(id);\n  return category ? convertFirestoreDocToPlain(category) : undefined;\n};\n\nexport const addProductCategory = async (name: string, description: string): Promise<ProductCategory> => {\n  const id = await productCategoriesService.create({\n    name,\n    description,\n    isActive: true\n  });\n  \n  const newCategory = await productCategoriesService.getById(id);\n  if (!newCategory) {\n    throw new Error('Failed to create product category');\n  }\n  \n  return convertFirestoreDocToPlain(newCategory);\n};\n\nexport const updateProductCategory = async (id: string, name: string, description: string): Promise<ProductCategory> => {\n  await productCategoriesService.update(id, { name, description });\n  const updatedCategory = await productCategoriesService.getById(id);\n  if (!updatedCategory) {\n    throw new Error('Product category not found after update');\n  }\n  return convertFirestoreDocToPlain(updatedCategory);\n};\n\nexport const deleteProductCategory = async (id: string): Promise<{ success: boolean }> => {\n  await productCategoriesService.delete(id);\n  return { success: true };\n};\n\n// Quotation functions\nexport const getQuotations = async (): Promise<Quotation[]> => {\n  const quotations = await quotationService.getWithQuery({\n    orderBy: { field: 'createdAt', direction: 'desc' }\n  });\n  return quotations.map(q => convertFirestoreDocToPlain(q));\n};\n\nexport const getQuotationById = async (id: string): Promise<Quotation | undefined> => {\n  const quotation = await quotationService.getById(id);\n  return quotation ? convertFirestoreDocToPlain(quotation) : undefined;\n};\n\nexport const addQuotation = async (quotationData: Omit<Quotation, 'id' | 'createdAt' | 'quotationNumber'>, quotationPrefix: string): Promise<Quotation> => {\n  console.log('Data service received prefix:', quotationPrefix);\n  const prefix = quotationPrefix?.trim() || 'QUO';\n  console.log('Final prefix being used:', prefix);\n  const quotationNumber = await quotationService.generateQuotationNumber(prefix);\n  console.log('Generated quotation number:', quotationNumber);\n  \n  const id = await quotationService.create({\n    ...quotationData,\n    quotationNumber\n  });\n  \n  const newQuotation = await quotationService.getById(id);\n  if (!newQuotation) {\n    throw new Error('Failed to create quotation');\n  }\n  \n  return convertFirestoreDocToPlain(newQuotation);\n};\n\nexport const updateQuotation = async (id: string, quotationData: Partial<Quotation>): Promise<Quotation> => {\n  await quotationService.update(id, quotationData);\n  const updatedQuotation = await quotationService.getById(id);\n  if (!updatedQuotation) {\n    throw new Error('Quotation not found after update');\n  }\n  return convertFirestoreDocToPlain(updatedQuotation);\n};\n\nexport const deleteQuotation = async (id: string): Promise<{ success: boolean }> => {\n  await quotationService.delete(id);\n  return { success: true };\n};\n\n// Quotation Template functions\nexport const getQuotationTemplates = async (): Promise<QuotationTemplate[]> => {\n  const templates = await quotationTemplatesService.getAll();\n  return templates.map(template => convertFirestoreDocToPlain(template));\n};\n\nexport const getQuotationTemplateById = async (id: string): Promise<QuotationTemplate | undefined> => {\n  const template = await quotationTemplatesService.getById(id);\n  return template ? convertFirestoreDocToPlain(template) : undefined;\n};\n\nexport const addQuotationTemplate = async (templateData: Omit<QuotationTemplate, 'id'>): Promise<QuotationTemplate> => {\n  const id = await quotationTemplatesService.create({\n    ...templateData,\n    isDefault: false\n  });\n  \n  const newTemplate = await quotationTemplatesService.getById(id);\n  if (!newTemplate) {\n    throw new Error('Failed to create quotation template');\n  }\n  \n  return convertFirestoreDocToPlain(newTemplate);\n};\n\nexport const updateQuotationTemplate = async (id: string, templateData: QuotationTemplate): Promise<QuotationTemplate> => {\n  await quotationTemplatesService.update(id, templateData);\n  const updatedTemplate = await quotationTemplatesService.getById(id);\n  if (!updatedTemplate) {\n    throw new Error('Template not found after update');\n  }\n  return convertFirestoreDocToPlain(updatedTemplate);\n};\n\nexport const deleteQuotationTemplate = async (id: string): Promise<{ success: boolean }> => {\n  await quotationTemplatesService.delete(id);\n  return { success: true };\n};\n\n// Employee Role functions\nexport const getEmployeeRoles = async (): Promise<EmployeeRole[]> => {\n  const roles = await employeeRolesService.getAll();\n  return roles.map(role => convertFirestoreDocToPlain(role));\n};\n\nexport const addEmployeeRole = async (name: string): Promise<EmployeeRole> => {\n  const id = await employeeRolesService.create({ name });\n  \n  const newRole = await employeeRolesService.getById(id);\n  if (!newRole) {\n    throw new Error('Failed to create employee role');\n  }\n  \n  return convertFirestoreDocToPlain(newRole);\n};\n\nexport const deleteEmployeeRole = async (id: string): Promise<{ success: boolean }> => {\n  await employeeRolesService.delete(id);\n  return { success: true };\n};\n\n// Department functions\nexport const getDepartments = async (): Promise<Department[]> => {\n  const departments = await departmentsService.getAll();\n  return departments.map(dept => convertFirestoreDocToPlain(dept));\n};\n\nexport const addDepartment = async (name: string): Promise<Department> => {\n  const id = await departmentsService.create({ name });\n  \n  const newDepartment = await departmentsService.getById(id);\n  if (!newDepartment) {\n    throw new Error('Failed to create department');\n  }\n  \n  return convertFirestoreDocToPlain(newDepartment);\n};\n\nexport const deleteDepartment = async (id: string): Promise<{ success: boolean }> => {\n  await departmentsService.delete(id);\n  return { success: true };\n};\n\n// Count functions\nexport const getLeadsCount = async (): Promise<number> => {\n  return await leadService.count();\n};\n\nexport const getQuotationsCount = async (): Promise<number> => {\n  return await quotationService.count();\n};\n\nexport const getProductsCount = async (): Promise<number> => {\n  return await productService.count();\n};\n\nexport const getEmployeesCount = async (): Promise<number> => {\n  return await employeeService.count();\n};\n\n// Count by status functions\nexport const getLeadsCountByStatus = async (status: Lead['status']): Promise<number> => {\n  return await leadService.count({\n    where: [{ field: 'status', operator: '==', value: status }]\n  });\n};\n\nexport const getQuotationsCountByStatus = async (status: Quotation['status']): Promise<number> => {\n  return await quotationService.count({\n    where: [{ field: 'status', operator: '==', value: status }]\n  });\n};\n\nexport const getActiveProductsCount = async (): Promise<number> => {\n  return await productService.count({\n    where: [{ field: 'isActive', operator: '==', value: true }]\n  });\n};\n\nexport const getActiveEmployeesCount = async (): Promise<number> => {\n  return await employeeService.count({\n    where: [{ field: 'isActive', operator: '==', value: true }]\n  });\n};\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1811, "column": 0}, "map": {"version":3,"sources":["file:///Users/gauravshukla/Downloads/ll/src/ai/genkit.ts"],"sourcesContent":["import {genkit} from 'genkit';\nimport {googleAI} from '@genkit-ai/googleai';\n\nexport const ai = genkit({\n  plugins: [googleAI()],\n  model: 'googleai/gemini-2.5-flash',\n});\n"],"names":[],"mappings":";;;AAAA;AAAA;AACA;AAAA;;;AAEO,MAAM,KAAK,CAAA,GAAA,uIAAA,CAAA,SAAM,AAAD,EAAE;IACvB,SAAS;QAAC,CAAA,GAAA,2KAAA,CAAA,WAAQ,AAAD;KAAI;IACrB,OAAO;AACT","debugId":null}},
    {"offset": {"line": 1832, "column": 0}, "map": {"version":3,"sources":["file:///Users/gauravshukla/Downloads/ll/src/ai/flows/summarize-meeting-notes.ts"],"sourcesContent":["// Summarize Meeting Notes Flow\n'use server';\n/**\n * @fileOverview Summarizes lengthy meeting notes into concise summaries using GenAI.\n *\n * - summarizeMeetingNotes - A function that handles the summarization of meeting notes.\n * - SummarizeMeetingNotesInput - The input type for the summarizeMeetingNotes function.\n * - SummarizeMeetingNotesOutput - The return type for the summarizeMeetingNotes function.\n */\n\nimport {ai} from '@/ai/genkit';\nimport {z} from 'genkit';\n\nconst SummarizeMeetingNotesInputSchema = z.object({\n  notes: z\n    .string()\n    .describe('The lengthy meeting notes to be summarized.'),\n});\nexport type SummarizeMeetingNotesInput = z.infer<typeof SummarizeMeetingNotesInputSchema>;\n\nconst SummarizeMeetingNotesOutputSchema = z.object({\n  summary: z.string().describe('A concise summary of the meeting notes.'),\n});\nexport type SummarizeMeetingNotesOutput = z.infer<typeof SummarizeMeetingNotesOutputSchema>;\n\nexport async function summarizeMeetingNotes(input: SummarizeMeetingNotesInput): Promise<SummarizeMeetingNotesOutput> {\n  return summarizeMeetingNotesFlow(input);\n}\n\nconst prompt = ai.definePrompt({\n  name: 'summarizeMeetingNotesPrompt',\n  input: {schema: SummarizeMeetingNotesInputSchema},\n  output: {schema: SummarizeMeetingNotesOutputSchema},\n  prompt: `Summarize the following meeting notes into a concise summary:\n\n  {{{notes}}}`,\n});\n\nconst summarizeMeetingNotesFlow = ai.defineFlow(\n  {\n    name: 'summarizeMeetingNotesFlow',\n    inputSchema: SummarizeMeetingNotesInputSchema,\n    outputSchema: SummarizeMeetingNotesOutputSchema,\n  },\n  async input => {\n    const {output} = await prompt(input);\n    return output!;\n  }\n);\n"],"names":[],"mappings":"AAAA,+BAA+B;;;;;;AAE/B;;;;;;CAMC,GAED;AACA;AAAA;;;;;;AAEA,MAAM,mCAAmC,uIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IAChD,OAAO,uIAAA,CAAA,IAAC,CACL,MAAM,GACN,QAAQ,CAAC;AACd;AAGA,MAAM,oCAAoC,uIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IACjD,SAAS,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;AAC/B;AAGO,eAAe,sBAAsB,KAAiC;IAC3E,OAAO,0BAA0B;AACnC;AAEA,MAAM,SAAS,mHAAA,CAAA,KAAE,CAAC,YAAY,CAAC;IAC7B,MAAM;IACN,OAAO;QAAC,QAAQ;IAAgC;IAChD,QAAQ;QAAC,QAAQ;IAAiC;IAClD,QAAQ,CAAC;;aAEE,CAAC;AACd;AAEA,MAAM,4BAA4B,mHAAA,CAAA,KAAE,CAAC,UAAU,CAC7C;IACE,MAAM;IACN,aAAa;IACb,cAAc;AAChB,GACA,OAAM;IACJ,MAAM,EAAC,MAAM,EAAC,GAAG,MAAM,OAAO;IAC9B,OAAO;AACT;;;IAtBoB;;AAAA,+OAAA","debugId":null}},
    {"offset": {"line": 1892, "column": 0}, "map": {"version":3,"sources":["file:///Users/gauravshukla/Downloads/ll/src/lib/data/index.ts"],"sourcesContent":["// Firestore-based data service - replaces JSON file operations\n// Original JSON-based service backed up as index-json-backup.ts\n\nexport * from '../firestore-data-service';\n"],"names":[],"mappings":"AAAA,+DAA+D;AAC/D,gEAAgE;;AAEhE","debugId":null}},
    {"offset": {"line": 1912, "column": 0}, "map": {"version":3,"sources":["file:///Users/gauravshukla/Downloads/ll/src/lib/storage-utils.ts"],"sourcesContent":["// Firebase Storage utilities for PDF file management\n// Generate UUID without external dependency\nfunction generateUUID(): string {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    const r = Math.random() * 16 | 0;\n    const v = c == 'x' ? r : (r & 0x3 | 0x8);\n    return v.toString(16);\n  });\n}\n\nexport interface UploadResult {\n  url: string; // Firebase Storage download URL\n  path: string; // Storage path\n  fileName: string;\n}\n\n/**\n * Legacy function - now redirects to Firebase Storage upload\n * @deprecated Use uploadPDFToStorage instead\n */\nexport async function uploadPDF(file: File, folder: string = 'catalogs'): Promise<UploadResult> {\n  console.warn('uploadPDF is deprecated, use uploadPDFToStorage instead');\n  return uploadPDFToStorage(file, folder);\n}\n\n// Firebase Storage upload (preferred to avoid large Server Actions bodies)\nimport { ref, uploadBytesResumable, getDownloadURL, deleteObject } from 'firebase/storage';\nimport { storage } from '@/lib/firebase';\n\nexport async function uploadPDFToStorage(\n  file: File,\n  folder: string = 'catalogs',\n  onProgress?: (percent: number) => void\n): Promise<UploadResult> {\n  if (!isPdfFile(file)) {\n    throw new Error('Only PDF files are allowed');\n  }\n  // Allow up to 10MB for Storage uploads\n  const maxSize = 10 * 1024 * 1024;\n  if (file.size > maxSize) {\n    throw new Error('File size must be less than 10MB');\n  }\n\n  const uniqueId = generateUUID();\n  const filePath = `${folder}/${uniqueId}-${encodeURIComponent(file.name)}`;\n  const storageRef = ref(storage, filePath);\n  const task = uploadBytesResumable(storageRef, file, { contentType: 'application/pdf' });\n\n  const url = await new Promise<string>((resolve, reject) => {\n    task.on('state_changed', (snapshot) => {\n      if (onProgress) {\n        const percent = Math.round((snapshot.bytesTransferred / snapshot.totalBytes) * 100);\n        onProgress(percent);\n      }\n    }, (error) => reject(error), async () => {\n      const downloadUrl = await getDownloadURL(task.snapshot.ref);\n      resolve(downloadUrl);\n    });\n  });\n\n  return {\n    url,\n    path: filePath,\n    fileName: file.name,\n  };\n}\n\n/**\n * Delete a PDF file from Firebase Storage\n * @param filePath - The storage path of the file to delete\n */\nexport async function deletePDFFromStorage(filePath: string): Promise<void> {\n  try {\n    const storageRef = ref(storage, filePath);\n    await deleteObject(storageRef);\n    console.log(`Successfully deleted file: ${filePath}`);\n  } catch (error) {\n    console.error('Error deleting file from storage:', error);\n    throw new Error(`Failed to delete file: ${filePath}`);\n  }\n}\n\n/**\n * Legacy function - now redirects to Firebase Storage delete\n * @deprecated Use deletePDFFromStorage instead\n */\nexport async function deletePDF(filePath: string): Promise<void> {\n  console.warn('deletePDF is deprecated, use deletePDFFromStorage instead');\n  return deletePDFFromStorage(filePath);\n}\n\n/**\n * Validate PDF file before upload\n * @param file - The file to validate\n * @returns boolean indicating if file is valid\n */\nexport function validatePDFFile(file: File): { isValid: boolean; error?: string } {\n  // Check file type (support cases where MIME may be generic but name ends with .pdf)\n  if (!isPdfFile(file)) {\n    return { isValid: false, error: 'Only PDF files are allowed' };\n  }\n\n  // Check file size (10MB limit for Firebase Storage)\n  const maxSize = 10 * 1024 * 1024; // 10MB in bytes\n  if (file.size > maxSize) {\n    return { isValid: false, error: 'File size must be less than 10MB' };\n  }\n\n  // Check file name length\n  if (file.name.length > 100) {\n    return { isValid: false, error: 'File name is too long' };\n  }\n\n  return { isValid: true };\n}\n\n// Heuristic to identify PDFs when the MIME type can be unreliable\nfunction isPdfFile(file: File): boolean {\n  const type = (file.type || '').toLowerCase();\n  const name = (file.name || '').toLowerCase();\n  if (type === 'application/pdf' || type === 'application/x-pdf') return true;\n  // Some environments provide a generic type for downloads/uploads\n  if ((type === '' || type === 'application/octet-stream') && name.endsWith('.pdf')) return true;\n  return false;\n}\n\n/**\n * Format file size for display\n * @param bytes - File size in bytes\n * @returns Formatted file size string\n */\nexport function formatFileSize(bytes: number): string {\n  if (bytes === 0) return '0 Bytes';\n\n  const k = 1024;\n  const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n\n  return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n}\n\n/**\n * Upload an image to Firebase Storage\n * @param file - The image file to upload\n * @param folder - The folder in Firebase Storage (default: 'products')\n * @param onProgress - Optional callback for upload progress\n * @returns Upload result with URL and metadata\n */\nexport async function uploadImageToStorage(\n  file: File,\n  folder: string = 'products',\n  onProgress?: (percent: number) => void\n): Promise<UploadResult> {\n  if (!isImageFile(file)) {\n    throw new Error('Only image files are allowed');\n  }\n  // Allow up to 10MB for image uploads\n  const maxSize = 10 * 1024 * 1024;\n  if (file.size > maxSize) {\n    throw new Error('Image size must be less than 10MB');\n  }\n\n  const uniqueId = generateUUID();\n  const filePath = `${folder}/${uniqueId}-${encodeURIComponent(file.name)}`;\n  const storageRef = ref(storage, filePath);\n  const task = uploadBytesResumable(storageRef, file, { contentType: file.type });\n\n  const url = await new Promise<string>((resolve, reject) => {\n    task.on('state_changed', (snapshot) => {\n      if (onProgress) {\n        const percent = Math.round((snapshot.bytesTransferred / snapshot.totalBytes) * 100);\n        onProgress(percent);\n      }\n    }, (error) => reject(error), async () => {\n      const downloadUrl = await getDownloadURL(task.snapshot.ref);\n      resolve(downloadUrl);\n    });\n  });\n\n  return {\n    url,\n    path: filePath,\n    fileName: file.name,\n  };\n}\n\n/**\n * Delete an image file from Firebase Storage\n * @param filePath - The storage path of the file to delete\n */\nexport async function deleteImageFromStorage(filePath: string): Promise<void> {\n  try {\n    const storageRef = ref(storage, filePath);\n    await deleteObject(storageRef);\n    console.log(`Successfully deleted image: ${filePath}`);\n  } catch (error) {\n    console.error('Error deleting image from storage:', error);\n    throw new Error(`Failed to delete image: ${filePath}`);\n  }\n}\n\n/**\n * Validate image file before upload\n * @param file - The file to validate\n * @returns validation result\n */\nexport function validateImageFile(file: File): { isValid: boolean; error?: string } {\n  if (!isImageFile(file)) {\n    return { isValid: false, error: 'Only image files (JPG, PNG, GIF, WebP) are allowed' };\n  }\n\n  // Check file size (10MB limit)\n  const maxSize = 10 * 1024 * 1024;\n  if (file.size > maxSize) {\n    return { isValid: false, error: 'Image size must be less than 10MB' };\n  }\n\n  // Check file name length\n  if (file.name.length > 100) {\n    return { isValid: false, error: 'File name is too long' };\n  }\n\n  return { isValid: true };\n}\n\n// Helper to identify image files\nfunction isImageFile(file: File): boolean {\n  const type = (file.type || '').toLowerCase();\n  const name = (file.name || '').toLowerCase();\n  \n  const validTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/gif', 'image/webp'];\n  if (validTypes.includes(type)) return true;\n  \n  // Fallback to extension check\n  const validExtensions = ['.jpg', '.jpeg', '.png', '.gif', '.webp'];\n  if ((type === '' || type === 'application/octet-stream') && \n      validExtensions.some(ext => name.endsWith(ext))) {\n    return true;\n  }\n  \n  return false;\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2135, "column": 0}, "map": {"version":3,"sources":["file:///Users/gauravshukla/Downloads/ll/src/lib/actions.ts"],"sourcesContent":["\n'use server';\n\nimport { z } from 'zod';\nimport { revalidatePath } from 'next/cache';\nimport { getAuth } from 'firebase-admin/auth';\nimport { initializeApp, getApps, cert } from 'firebase-admin/app';\nimport { summarizeMeetingNotes } from '@/ai/flows/summarize-meeting-notes';\nimport { addLead as dbAddLead, addActivityToLead, updateLeadStatus as updateStatus, addProduct as dbAddProduct, addLeadSource as dbAddLeadSource, deleteLeadSource as dbDeleteLeadSource, addProductCategory as dbAddProductCategory, deleteProductCategory as dbDeleteProductCategory, getProductCategories, updateLead as dbUpdateLead, getLeadById as dbGetLeadById, deleteLead as dbDeleteLead, addQuotation as dbAddQuotation, updateQuotation as dbUpdateQuotation, deleteQuotation as dbDeleteQuotation, addQuotationTemplate as dbAddQuotationTemplate, updateProduct as dbUpdateProduct, deleteProduct as dbDeleteProduct, addEmployee as dbAddEmployee, deleteEmployee as dbDeleteEmployee, updateEmployee as dbUpdateEmployee, getEmployeeByEmail, getEmployeeRoles, addEmployeeRole as dbAddEmployeeRole, deleteEmployeeRole as dbDeleteEmployeeRole, getDepartments, addDepartment as dbAddDepartment, deleteDepartment as dbDeleteDepartment, updateQuotationTemplate as dbUpdateQuotationTemplate, deleteQuotationTemplate as dbDeleteQuotationTemplate, getLeadsCount, getQuotationsCount, getProductsCount, getEmployeesCount, getLeadsCountByStatus, getQuotationsCountByStatus, getActiveProductsCount, getActiveEmployeesCount, updateProductCategory as dbUpdateProductCategory } from './data';\nimport { deletePDFFromStorage, deleteImageFromStorage, uploadImageToStorage } from './storage-utils';\nimport type { Lead, LeadStatus, LeadProduct, UpdatableLeadData, Product, NewQuotationTemplate, Quotation, NewEmployee, QuotationTemplate } from './types';\nimport type { Employee } from './business-types';\nimport { getProducts } from './data';\n\n// Initialize Firebase Admin SDK\nfunction initializeFirebaseAdmin() {\n  if (getApps().length === 0) {\n    // Check if all required environment variables are present\n    const requiredEnvVars = [\n      'FIREBASE_PROJECT_ID',\n      'FIREBASE_PRIVATE_KEY',\n      'FIREBASE_CLIENT_EMAIL'\n    ];\n    \n    const missingVars = requiredEnvVars.filter(varName => !process.env[varName]);\n    \n    if (missingVars.length > 0) {\n      throw new Error(`Missing required Firebase environment variables: ${missingVars.join(', ')}`);\n    }\n\n    const serviceAccount = {\n      type: \"service_account\",\n      project_id: process.env.FIREBASE_PROJECT_ID!,\n      private_key_id: process.env.FIREBASE_PRIVATE_KEY_ID,\n      private_key: process.env.FIREBASE_PRIVATE_KEY!.replace(/\\\\n/g, '\\n'),\n      client_email: process.env.FIREBASE_CLIENT_EMAIL!,\n      client_id: process.env.FIREBASE_CLIENT_ID,\n      auth_uri: \"https://accounts.google.com/o/oauth2/auth\",\n      token_uri: \"https://oauth2.googleapis.com/token\",\n      auth_provider_x509_cert_url: \"https://www.googleapis.com/oauth2/v1/certs\",\n      client_x509_cert_url: `https://www.googleapis.com/robot/v1/metadata/x509/${process.env.FIREBASE_CLIENT_EMAIL}`\n    };\n\n    initializeApp({\n      credential: cert(serviceAccount as any),\n      projectId: process.env.FIREBASE_PROJECT_ID,\n    });\n  }\n}\n\nconst LeadProductSchema = z.object({\n    productId: z.string().min(1, 'Product must be selected'),\n    quantity: z.coerce.number().min(1),\n    rate: z.coerce.number().min(0),\n    selectedSku: z.string().optional(),\n});\n\nconst CreateLeadSchema = z.object({\n  name: z.string().min(2, 'Name must be at least 2 characters'),\n  company: z.string().min(2, 'Company must be at least 2 characters'),\n  email: z.string().email('Invalid email address'),\n  phone: z.string().min(10, 'Phone number seems too short'),\n  whatsappNumber: z.string().optional().or(z.literal('')),\n  client_address: z.string().optional().or(z.literal('')),\n  client_gst_no: z.string().optional().or(z.literal('')),\n  status: z.enum(['New', 'In Discussion', 'Negotiation', 'Closed - Won', 'Closed - Lost']),\n  source: z.string().min(1, 'Please select a lead source'),\n  notes: z.string().optional(),\n  products: z.array(LeadProductSchema).optional(),\n  createdBy: z.string().min(1, 'Created by field is required'),\n});\n\nexport async function createLead(formData: FormData) {\n  const productsJSON = formData.get('products');\n  const products = productsJSON ? JSON.parse(productsJSON as string) : [];\n\n  const validatedFields = CreateLeadSchema.safeParse({\n    name: formData.get('name'),\n    company: formData.get('company'),\n    email: formData.get('email'),\n    phone: formData.get('phone'),\n    whatsappNumber: formData.get('whatsappNumber'),\n    client_address: formData.get('client_address'),\n    client_gst_no: formData.get('client_gst_no'),\n    status: formData.get('status'),\n    source: formData.get('source'),\n    notes: formData.get('notes'),\n    products: products,\n    createdBy: formData.get('createdBy'),\n  });\n\n  if (!validatedFields.success) {\n    return {\n      errors: validatedFields.error.flatten().fieldErrors,\n      message: 'Failed to create lead.',\n    };\n  }\n  \n  let newLeadId: string | undefined;\n  try {\n    const leadData = {\n      ...validatedFields.data,\n      products: validatedFields.data.products || []\n    };\n    const newLead = await dbAddLead(leadData);\n    newLeadId = newLead.id;\n  } catch (error) {\n    return { message: 'Database Error: Failed to Create Lead.' };\n  }\n\n  revalidatePath('/leads');\n  revalidatePath('/');\n  if (newLeadId) {\n    revalidatePath(`/leads/${newLeadId}`);\n  }\n  return { message: 'Successfully created lead.' };\n}\n\nconst UpdateLeadSchema = z.object({\n  name: z.string().min(2, 'Name must be at least 2 characters'),\n  company: z.string().min(2, 'Company must be at least 2 characters'),\n  email: z.string().email('Invalid email address'),\n  phone: z.string().min(10, 'Phone number seems too short'),\n  whatsappNumber: z.string().optional().or(z.literal('')),\n  client_address: z.string().optional().or(z.literal('')),\n  client_gst_no: z.string().optional().or(z.literal('')),\n  status: z.enum(['New', 'In Discussion', 'Negotiation', 'Closed - Won', 'Closed - Lost']),\n  source: z.string().min(1, 'Please select a lead source'),\n  products: z.array(LeadProductSchema).optional(),\n});\n\nfunction generateChangeNotes(oldLead: Lead, newLeadData: UpdatableLeadData, allProducts: Product[]): string {\n    const changes: string[] = [];\n\n    if (oldLead.name !== newLeadData.name) {\n        changes.push(`Name changed from \"${oldLead.name}\" to \"${newLeadData.name}\".`);\n    }\n    if (oldLead.company !== newLeadData.company) {\n        changes.push(`Company changed from \"${oldLead.company}\" to \"${newLeadData.company}\".`);\n    }\n    if (oldLead.email !== newLeadData.email) {\n        changes.push(`Email changed from \"${oldLead.email}\" to \"${newLeadData.email}\".`);\n    }\n    if (oldLead.phone !== newLeadData.phone) {\n        changes.push(`Phone changed from \"${oldLead.phone}\" to \"${newLeadData.phone}\".`);\n    }\n    if (oldLead.whatsappNumber !== newLeadData.whatsappNumber) {\n        changes.push(`WhatsApp Number changed from \"${oldLead.whatsappNumber || 'N/A'}\" to \"${newLeadData.whatsappNumber || 'N/A'}\".`);\n    }\n    if (oldLead.client_address !== newLeadData.client_address) {\n        changes.push(`Client Address changed from \"${oldLead.client_address || 'N/A'}\" to \"${newLeadData.client_address || 'N/A'}\".`);\n    }\n    if (oldLead.client_gst_no !== newLeadData.client_gst_no) {\n        changes.push(`Client GST Number changed from \"${oldLead.client_gst_no || 'N/A'}\" to \"${newLeadData.client_gst_no || 'N/A'}\".`);\n    }\n    if (oldLead.status !== newLeadData.status) {\n        changes.push(`Status changed from \"${oldLead.status}\" to \"${newLeadData.status}\".`);\n    }\n    if (oldLead.source !== newLeadData.source) {\n        changes.push(`Source changed from \"${oldLead.source}\" to \"${newLeadData.source}\".`);\n    }\n\n    const oldProducts = oldLead.products || [];\n    const newProducts = newLeadData.products || [];\n    if (JSON.stringify(oldProducts) !== JSON.stringify(newProducts)) {\n        const getProductName = (productId: string) => allProducts.find(p => p.id === productId)?.name || productId;\n        \n        const formatProduct = (p: LeadProduct) => `${getProductName(p.productId)} (Qty: ${p.quantity}, Rate: ${p.rate}, SKU: ${p.selectedSku || 'N/A'})`;\n\n        const oldProductStr = oldProducts.map(formatProduct).join(', ') || 'None';\n        const newProductStr = newProducts.map(formatProduct).join(', ') || 'None';\n\n        changes.push(`Interested products updated.\\n- Old: ${oldProductStr}\\n- New: ${newProductStr}`);\n    }\n\n    if (changes.length === 0) {\n        return 'No changes were made to the lead details.';\n    }\n\n    return 'Lead details were updated:\\n' + changes.map(c => `- ${c}`).join('\\n');\n}\n\nexport async function updateLead(leadId: string, formData: FormData) {\n    const [oldLead, allProducts] = await Promise.all([\n        dbGetLeadById(leadId),\n        getProducts()\n    ]);\n\n    if (!oldLead) {\n        return { message: 'Error: Lead not found.' };\n    }\n\n    const productsJSON = formData.get('products');\n    const products = productsJSON ? JSON.parse(productsJSON as string) : [];\n  \n    const validatedFields = UpdateLeadSchema.safeParse({\n      name: formData.get('name'),\n      company: formData.get('company'),\n      email: formData.get('email'),\n      phone: formData.get('phone'),\n      whatsappNumber: formData.get('whatsappNumber'),\n      client_address: formData.get('client_address'),\n      client_gst_no: formData.get('client_gst_no'),\n      status: formData.get('status'),\n      source: formData.get('source'),\n      products: products,\n    });\n  \n    if (!validatedFields.success) {\n      return {\n        errors: validatedFields.error.flatten().fieldErrors,\n        message: 'Failed to update lead.',\n      };\n    }\n\n    const newLeadData = validatedFields.data as UpdatableLeadData;\n    const changeNotes = generateChangeNotes(oldLead, newLeadData, allProducts);\n  \n    try {\n        await dbUpdateLead(leadId, newLeadData);\n        if (changeNotes !== 'No changes were made to the lead details.') {\n            await addActivityToLead(leadId, {\n                type: 'Revision Request',\n                notes: changeNotes\n            });\n        }\n    } catch (error) {\n      const message = error instanceof Error ? error.message : 'An unknown error occurred';\n      return { message: `Database Error: Failed to Update Lead. ${message}` };\n    }\n  \n    revalidatePath('/leads');\n    revalidatePath('/');\n    revalidatePath(`/leads/${leadId}`);\n    return { message: 'Successfully updated lead.' };\n}\n\nconst ProductSchema = z.object({\n    name: z.string().min(3, { message: 'Product name must be at least 3 characters.' }),\n    price: z.coerce.number().min(0, { message: 'Price must be a positive number.' }),\n    gstRate: z.coerce.number().min(0).max(100),\n    categoryId: z.string().optional(),\n    description: z.string().optional(),\n    skus: z.array(z.string()).optional(),\n    catalogueUrl: z.string().url('Please enter a valid URL.').optional().or(z.literal('')),\n    cataloguePdf: z.object({\n        url: z.string(),\n        fileName: z.string(),\n        filePath: z.string(),\n        uploadedAt: z.string(),\n    }).optional(),\n    productImage: z.object({\n        url: z.string(),\n        fileName: z.string(),\n        filePath: z.string(),\n        uploadedAt: z.string(),\n    }).optional(),\n});\n\nexport async function addProduct(formData: FormData) {\n  const skusJSON = formData.get('skus');\n  const skus = skusJSON ? JSON.parse(skusJSON as string) : [];\n  \n  const catalogPdfJSON = formData.get('catalogPdf');\n  const catalogPdf = catalogPdfJSON ? JSON.parse(catalogPdfJSON as string) : undefined;\n  \n  const productImageJSON = formData.get('productImage');\n  console.log('Product Image JSON received:', productImageJSON);\n  const productImage = productImageJSON ? JSON.parse(productImageJSON as string) : undefined;\n  console.log('Product Image parsed:', productImage);\n  \n  const validatedFields = ProductSchema.safeParse({\n    name: formData.get('name'),\n    price: formData.get('price'),\n    gstRate: formData.get('gstRate'),\n    categoryId: formData.get('categoryId'),\n    description: formData.get('description') || undefined,\n    skus: skus,\n    catalogueUrl: formData.get('catalogueUrl') || '',\n    cataloguePdf: catalogPdf,\n    productImage: productImage,\n  });\n\n  if (!validatedFields.success) {\n    return {\n      errors: validatedFields.error.flatten().fieldErrors,\n      message: 'Failed to add product.',\n    };\n  }\n\n  try {\n    const data = validatedFields.data;\n    // Remove undefined values before sending to Firestore\n    const cleanData = Object.fromEntries(\n      Object.entries(data).filter(([_, v]) => v !== undefined)\n    );\n    \n    console.log('Clean data being sent to database:', JSON.stringify(cleanData, null, 2));\n    \n    // Create the product\n    const newProduct = await dbAddProduct(cleanData as any);\n    \n  } catch (error) {\n    return { message: 'Database Error: Failed to add product.' };\n  }\n\n  revalidatePath('/products');\n  revalidatePath('/leads'); // Revalidate leads in case product info is needed\n  return { message: 'Successfully added product.' };\n}\n\nexport async function updateProduct(id: string, formData: FormData) {\n    const skusJSON = formData.get('skus');\n    const skus = skusJSON ? JSON.parse(skusJSON as string) : [];\n\n    const catalogPdfJSON = formData.get('catalogPdf');\n    const catalogPdf = catalogPdfJSON ? JSON.parse(catalogPdfJSON as string) : undefined;\n    const removeCatalogPdf = String(formData.get('removeCatalogPdf') || '').toLowerCase() === 'true';\n\n    // Handle product image - can be File object (new upload) or JSON string (existing metadata)\n    const productImageData = formData.get('productImage');\n    const existingProductImageJSON = formData.get('existingProductImage');\n    const removeProductImage = String(formData.get('removeProductImage') || '').toLowerCase() === 'true';\n    \n    let productImage: any = undefined;\n    \n    // If there's a new file upload, handle it\n    if (productImageData instanceof File) {\n      try {\n        const uploadResult = await uploadImageToStorage(productImageData, 'products');\n        productImage = {\n          url: uploadResult.url,\n          fileName: uploadResult.fileName,\n          filePath: uploadResult.path,\n          uploadedAt: new Date().toISOString(),\n        };\n      } catch (error) {\n        console.error('Failed to upload product image:', error);\n        return { message: 'Failed to upload product image.' };\n      }\n    } else if (existingProductImageJSON && !removeProductImage) {\n      // Keep existing image metadata\n      productImage = JSON.parse(existingProductImageJSON as string);\n    }\n\n    // Debug logs removed\n    \n    const validatedFields = ProductSchema.safeParse({\n      name: formData.get('name'),\n      price: formData.get('price'),\n      gstRate: formData.get('gstRate'),\n      categoryId: formData.get('categoryId'),\n      description: formData.get('description') || undefined,\n      skus: skus,\n      catalogueUrl: formData.get('catalogueUrl') || '',\n      cataloguePdf: catalogPdf,\n      productImage: productImage,\n    });\n\n    if (!validatedFields.success) {\n      return {\n        errors: validatedFields.error.flatten().fieldErrors,\n        message: 'Failed to update product.',\n      };\n    }\n\n    try {\n      // Get the current product to check for existing PDF\n      const currentProduct = await getProducts().then(products => \n        products.find(p => p.id === id)\n      );\n      \n      const data = validatedFields.data as any;\n      const updateData: any = { ...data };\n      \n      // If user explicitly removed the existing PDF and didn't upload a new one, clear the field\n      if (removeCatalogPdf && !catalogPdf) {\n        // Delete the old PDF from Firebase Storage if it exists\n        if (currentProduct?.cataloguePdf?.filePath) {\n          try {\n            await deletePDFFromStorage(currentProduct.cataloguePdf.filePath);\n          } catch (error) {\n            console.error('Failed to delete PDF from storage:', error);\n            // Continue with the update even if PDF deletion fails\n          }\n        }\n        updateData.cataloguePdf = null; // This will clear the field in Firestore\n      } else if (catalogPdf && currentProduct?.cataloguePdf?.filePath && \n                 currentProduct.cataloguePdf.filePath !== catalogPdf.filePath) {\n        // If a new PDF was uploaded, delete the old one from storage\n        try {\n          await deletePDFFromStorage(currentProduct.cataloguePdf.filePath);\n        } catch (error) {\n          console.error('Failed to delete old PDF from storage:', error);\n          // Continue with the update even if old PDF deletion fails\n        }\n      }\n      \n      // Handle product image storage cleanup if new image was uploaded\n      if (productImageData instanceof File && currentProduct?.productImage?.filePath) {\n        // Delete the old image from storage since we have a new one\n        try {\n          await deleteImageFromStorage(currentProduct.productImage.filePath);\n        } catch (error) {\n          console.error('Failed to delete old product image from storage:', error);\n          // Continue with the update even if old image deletion fails\n        }\n      }\n      \n      // Handle product image removal\n      if (removeProductImage && !productImageData) {\n        // Delete the existing image from storage\n        if (currentProduct?.productImage?.filePath) {\n          try {\n            await deleteImageFromStorage(currentProduct.productImage.filePath);\n          } catch (error) {\n            console.error('Failed to delete product image from storage:', error);\n          }\n        }\n        updateData.productImage = null; // This will clear the field in Firestore\n      }\n      \n      // Ensure new uploads are persisted\n      if (catalogPdf) {\n        updateData.cataloguePdf = catalogPdf;\n      }\n      if (productImage) {\n        updateData.productImage = productImage;\n      }\n      \n      // Remove undefined values from updateData as Firestore doesn't accept them\n      const cleanedUpdateData: any = {};\n      for (const [key, value] of Object.entries(updateData)) {\n        if (value !== undefined) {\n          cleanedUpdateData[key] = value;\n        }\n      }\n      \n      console.log('[updateProduct] cleanedUpdateData keys:', Object.keys(cleanedUpdateData));\n      console.log('[updateProduct] cleanedUpdateData.productImage:', cleanedUpdateData.productImage);\n      \n      await dbUpdateProduct(id, cleanedUpdateData);\n    } catch (error) {\n      return { message: 'Database Error: Failed to update product.' };\n    }\n\n    revalidatePath('/products');\n    revalidatePath('/leads');\n    return { message: 'Successfully updated product.' };\n  }\n  \n  export async function deleteProduct(id: string) {\n    try {\n      // Get the current product to check for PDF before deletion\n      const currentProduct = await getProducts().then(products => \n        products.find(p => p.id === id)\n      );\n      \n      // Delete the PDF from Firebase Storage if it exists\n      if (currentProduct?.cataloguePdf?.filePath) {\n        try {\n          await deletePDFFromStorage(currentProduct.cataloguePdf.filePath);\n        } catch (error) {\n          console.error('Failed to delete PDF from storage:', error);\n          // Continue with product deletion even if PDF deletion fails\n        }\n      }\n      \n      await dbDeleteProduct(id);\n    } catch (error) {\n      return { message: 'Database Error: Failed to delete product.' };\n    }\n\n    revalidatePath('/products');\n    revalidatePath('/leads');\n    return { message: 'Successfully deleted product.' };\n  }\n\n\nconst LogActivitySchema = z.object({\n    leadId: z.string(),\n    type: z.enum(['Meeting', 'Call', 'Email', 'Revision Request', 'Proposal Sent']),\n    notes: z.string().optional(),\n    summary: z.string().optional(),\n});\n\nexport async function logActivity(formData: FormData) {\n    const validatedFields = LogActivitySchema.safeParse({\n        leadId: formData.get('leadId'),\n        type: formData.get('type'),\n        notes: formData.get('notes'),\n        summary: formData.get('summary') || undefined,\n    });\n\n    if (!validatedFields.success) {\n        return {\n            errors: validatedFields.error.flatten().fieldErrors,\n            message: 'Failed to log activity.',\n        };\n    }\n\n    try {\n        const { leadId, ...activityData } = validatedFields.data;\n        await addActivityToLead(leadId, activityData);\n    } catch (error) {\n        const message = error instanceof Error ? error.message : String(error);\n        console.error('LogActivity Error:', message);\n        if (message.includes('Lead not found')) {\n            return { message: 'Lead not found. Please refresh the page and try again.' };\n        }\n        return { message: 'Database Error: Failed to log activity.' };\n    }\n\n    revalidatePath(`/leads/${validatedFields.data.leadId}`);\n    revalidatePath('/');\n    return { message: 'Successfully logged activity.' };\n}\n\nexport async function getSummaryForNotes(notes: string): Promise<{ summary?: string; error?: string }> {\n  if (!notes || notes.trim().length < 50) {\n    return { error: 'Please provide at least 50 characters of notes to summarize.' };\n  }\n  try {\n    const result = await summarizeMeetingNotes({ notes });\n    return result;\n  } catch (e) {\n    console.error('AI Summarization Error:', e);\n    return { error: 'Failed to generate summary due to an internal error.' };\n  }\n}\n\n\nexport async function updateLeadStatusAction(leadId: string, status: LeadStatus, userId?: string, userName?: string) {\n  try {\n    // Get the current lead to capture the previous status\n    const currentLead = await dbGetLeadById(leadId);\n    if (!currentLead) {\n      return { message: 'Lead not found.' };\n    }\n    \n    const previousStatus = currentLead.status;\n    \n    // Only update if status is actually changing\n    if (previousStatus === status) {\n      return { message: 'Status is already set to this value.' };\n    }\n    \n    // Update the status\n    await updateStatus(leadId, status);\n    \n    // Add a status change activity\n    const changedBy = userName || userId || 'Unknown User';\n    const statusChangeNotes = `Status changed from \"${previousStatus}\" to \"${status}\" by ${changedBy}`;\n    \n    await addActivityToLead(leadId, {\n      type: 'Status Change',\n      notes: statusChangeNotes\n    });\n    \n  } catch (error) {\n    return { message: 'Database Error: Failed to update status.' };\n  }\n  revalidatePath(`/leads/${leadId}`);\n  revalidatePath('/leads');\n  revalidatePath('/');\n  return { message: 'Status updated successfully.' };\n}\n\nexport async function deleteLeadAction(leadId: string) {\n  try {\n    await dbDeleteLead(leadId);\n  } catch (error) {\n    return { message: 'Database Error: Failed to delete lead.' };\n  }\n  revalidatePath('/leads');\n  revalidatePath('/');\n  return { message: 'Successfully deleted lead.' };\n}\n\nconst AddLeadSourceSchema = z.object({\n    name: z.string().min(2, 'Source name must be at least 2 characters'),\n});\n\nexport async function addLeadSourceAction(formData: FormData) {\n    const validatedFields = AddLeadSourceSchema.safeParse({\n        name: formData.get('name'),\n    });\n\n    if (!validatedFields.success) {\n        return {\n            message: validatedFields.error.flatten().fieldErrors.name?.[0] ?? 'Invalid name',\n        };\n    }\n\n    try {\n        await dbAddLeadSource(validatedFields.data.name);\n    } catch (error) {\n        return { message: 'Database Error: Failed to add lead source.' };\n    }\n\n    revalidatePath('/setup');\n    revalidatePath('/leads');\n    return { message: `Successfully added '${validatedFields.data.name}'.` };\n}\n\nexport async function deleteLeadSourceAction(id: string) {\n    try {\n        await dbDeleteLeadSource(id);\n    } catch (error) {\n        return { message: 'Database Error: Failed to delete lead source.' };\n    }\n\n    revalidatePath('/setup');\n    revalidatePath('/leads');\n    return { message: 'Successfully deleted lead source.' };\n}\n\nconst AddProductCategorySchema = z.object({\n    name: z.string().min(2, 'Category name must be at least 2 characters'),\n    description: z.string().optional().nullable(),\n});\n\nexport async function addProductCategoryAction(formData: FormData) {\n    const validatedFields = AddProductCategorySchema.safeParse({\n        name: formData.get('name'),\n        description: formData.get('description'),\n    });\n\n    if (!validatedFields.success) {\n        return {\n            message: validatedFields.error.flatten().fieldErrors.name?.[0] ?? 'Invalid name',\n        };\n    }\n\n    try {\n        // Convert null to undefined for optional description\n        const description = validatedFields.data.description || '';\n        await dbAddProductCategory(validatedFields.data.name, description);\n    } catch (error) {\n        return { message: 'Database Error: Failed to add product category.' };\n    }\n\n    revalidatePath('/setup');\n    revalidatePath('/products');\n    return { message: `Successfully added '${validatedFields.data.name}'.` };\n}\n\nexport async function deleteProductCategoryAction(id: string) {\n    try {\n        await dbDeleteProductCategory(id);\n    } catch (error) {\n        return { message: 'Database Error: Failed to delete product category.' };\n    }\n\n    revalidatePath('/setup');\n    revalidatePath('/products');\n    return { message: 'Successfully deleted product category.' };\n}\n\n// Update an existing product category's name/description\nexport async function updateProductCategoryAction(id: string, name: string, description?: string) {\n    try {\n        await dbUpdateProductCategory(id, name, description || '');\n    } catch (error) {\n        const message = error instanceof Error ? error.message : 'Unknown error';\n        return { message: `Database Error: Failed to update product category. ${message}` };\n    }\n    revalidatePath('/setup');\n    revalidatePath('/products');\n    return { message: 'Successfully updated product category.' };\n}\n\nexport async function getProductCategoriesAction() {\n    try {\n        const categories = await getProductCategories();\n        return categories;\n    } catch (error) {\n        console.error('Error fetching product categories:', error);\n        return [];\n    }\n}\n\n\nconst CreateQuotationSchema = z.object({\n  leadId: z.string().min(1),\n  templateId: z.string().min(1),\n  date: z.string(),\n  validUntil: z.string(),\n  status: z.enum(['Draft', 'Sent', 'Accepted', 'Rejected']),\n  products: z.string(), // JSON string\n  subTotal: z.coerce.number(),\n  totalGst: z.coerce.number(),\n  grandTotal: z.coerce.number(),\n  quotationPrefix: z.string().optional(),\n  // Overridable template fields\n  companyName: z.string().min(1),\n  companyAddress: z.string().min(1),\n  companyGst: z.string().optional().or(z.literal('')).nullable(),\n  // Client billing fields\n  client_address: z.string().optional().or(z.literal('')).nullable(),\n  client_gst_no: z.string().optional().or(z.literal('')).nullable(),\n  termsAndConditions: z.string(),\n  logoUrl: z.string().optional().nullable(),\n  // Additional charges (numeric or empty/null)\n  freightCharges: z.coerce.number().min(0).optional().or(z.literal('')).nullable(),\n  courierCharges: z.coerce.number().min(0).optional().or(z.literal('')).nullable(),\n  // Flags to show/hide charges in PDF\n  showFreight: z.preprocess((val) => {\n    if (val === 'true' || val === true) return true;\n    if (val === 'false' || val === false) return false;\n    return false; // default to false\n  }, z.boolean()).optional(),\n  showCourier: z.preprocess((val) => {\n    if (val === 'true' || val === true) return true;\n    if (val === 'false' || val === false) return false;\n    return false; // default to false\n  }, z.boolean()).optional(),\n  // GST visibility control\n  showGst: z.preprocess((val) => {\n    if (val === 'true' || val === true) return true;\n    if (val === 'false' || val === false) return false;\n    return true; // default to true for backward compatibility\n  }, z.boolean()).optional(),\n  // Currency fields\n  currencyCode: z.string().optional(),\n  currencySymbol: z.string().optional(),\n  conversionRate: z.coerce.number().optional(),\n});\n\n\nexport async function addQuotation(formData: FormData) {\n    console.log('Server received quotationPrefix:', formData.get('quotationPrefix'));\n    const validatedFields = CreateQuotationSchema.safeParse({\n        leadId: formData.get('leadId'),\n        templateId: formData.get('templateId'),\n        date: formData.get('date'),\n        validUntil: formData.get('validUntil'),\n        status: formData.get('status'),\n        products: formData.get('products'),\n        subTotal: formData.get('subTotal'),\n        totalGst: formData.get('totalGst'),\n        grandTotal: formData.get('grandTotal'),\n        quotationPrefix: formData.get('quotationPrefix') || '',\n        companyName: formData.get('companyName'),\n        companyAddress: formData.get('companyAddress'),\n        companyGst: formData.get('companyGst'),\n        client_address: formData.get('client_address'),\n        client_gst_no: formData.get('client_gst_no'),\n        termsAndConditions: formData.get('termsAndConditions'),\n        logoUrl: formData.get('logoUrl'),\n        freightCharges: formData.get('freightCharges'),\n        courierCharges: formData.get('courierCharges'),\n        showFreight: formData.get('showFreight'),\n        showCourier: formData.get('showCourier'),\n        showGst: formData.get('showGst'),\n        currencyCode: formData.get('currencyCode'),\n        currencySymbol: formData.get('currencySymbol'),\n        conversionRate: formData.get('conversionRate'),\n      });\n    \n      if (!validatedFields.success) {\n        console.error(validatedFields.error.flatten().fieldErrors);\n        return {\n          errors: validatedFields.error.flatten().fieldErrors,\n          message: 'Validation Error: Failed to create quotation.',\n        };\n      }\n      \n      let newQuotation: Quotation | undefined;\n      try {\n        const data = validatedFields.data;\n        const parsedProducts = JSON.parse(data.products);\n        const prefix = (data.quotationPrefix?.trim() || 'QUO');\n        console.log('Using prefix:', prefix);\n        const { quotationPrefix: _omitPrefix, logoUrl, ...rest } = data as any;\n        \n        // Clean up null values - convert to undefined for Firestore\n        const payload: any = {\n          ...rest,\n          products: parsedProducts,\n          companyGst: rest.companyGst || undefined,\n          client_address: rest.client_address || undefined,\n          client_gst_no: rest.client_gst_no || undefined,\n          freightCharges: rest.freightCharges || undefined,\n          courierCharges: rest.courierCharges || undefined,\n          showFreight: rest.showFreight === true || rest.showFreight === 'true',\n          showCourier: rest.showCourier === true || rest.showCourier === 'true',\n        };\n        if (logoUrl) payload.logoUrl = logoUrl;\n        newQuotation = await dbAddQuotation(payload, prefix);\n\n        // Log activity on the lead\n        await addActivityToLead(data.leadId, {\n            type: 'Proposal Sent',\n            notes: `Quotation ${newQuotation.quotationNumber} was created and sent.`\n        });\n\n      } catch (error) {\n        const message = error instanceof Error ? error.message : 'An unknown error occurred';\n        return { message: `Database Error: Failed to Create Quotation. ${message}` };\n      }\n\n    revalidatePath('/quotations');\n    revalidatePath(`/leads/${validatedFields.data.leadId}`);\n    return { message: 'Successfully created quotation.' };\n}\n\nexport async function updateQuotation(id: string, formData: FormData) {\n    const validatedFields = CreateQuotationSchema.safeParse({\n        leadId: formData.get('leadId'),\n        templateId: formData.get('templateId'),\n        date: formData.get('date'),\n        validUntil: formData.get('validUntil'),\n        status: formData.get('status'),\n        products: formData.get('products'),\n        subTotal: formData.get('subTotal'),\n        totalGst: formData.get('totalGst'),\n        grandTotal: formData.get('grandTotal'),\n        quotationPrefix: formData.get('quotationPrefix') || '',\n        companyName: formData.get('companyName'),\n        companyAddress: formData.get('companyAddress'),\n        companyGst: formData.get('companyGst'),\n        client_address: formData.get('client_address'),\n        client_gst_no: formData.get('client_gst_no'),\n        termsAndConditions: formData.get('termsAndConditions'),\n        logoUrl: formData.get('logoUrl'),\n        freightCharges: formData.get('freightCharges'),\n        courierCharges: formData.get('courierCharges'),\n        showFreight: formData.get('showFreight'),\n        showCourier: formData.get('showCourier'),\n        showGst: formData.get('showGst'),\n        currencyCode: formData.get('currencyCode'),\n        currencySymbol: formData.get('currencySymbol'),\n        conversionRate: formData.get('conversionRate'),\n      });\n    \n      if (!validatedFields.success) {\n        console.error(validatedFields.error.flatten().fieldErrors);\n        return {\n          errors: validatedFields.error.flatten().fieldErrors,\n          message: 'Validation Error: Failed to update quotation.',\n        };\n      }\n      \n      try {\n        const data = validatedFields.data;\n        const parsedProducts = JSON.parse(data.products);\n        \n        // Clean up null values - convert to undefined for Firestore\n        await dbUpdateQuotation(id, {\n            ...data,\n            logoUrl: data.logoUrl || undefined,\n            companyGst: data.companyGst || undefined,\n            client_address: data.client_address || undefined,\n            client_gst_no: data.client_gst_no || undefined,\n            freightCharges: data.freightCharges || undefined,\n            courierCharges: data.courierCharges || undefined,\n            showFreight: data.showFreight === true || data.showFreight === 'true',\n            showCourier: data.showCourier === true || data.showCourier === 'true',\n            products: parsedProducts,\n        });\n\n        // Log activity on the lead\n        await addActivityToLead(data.leadId, {\n            type: 'Revision Request',\n            notes: `Quotation was updated.`\n        });\n\n      } catch (error) {\n        const message = error instanceof Error ? error.message : 'An unknown error occurred';\n        return { message: `Database Error: Failed to Update Quotation. ${message}` };\n      }\n\n    revalidatePath('/quotations');\n    revalidatePath(`/quotations/${id}`);\n    revalidatePath(`/leads/${validatedFields.data.leadId}`);\n    return { message: 'Successfully updated quotation.' };\n}\n\nexport async function deleteQuotationAction(quotationId: string) {\n  try {\n    await dbDeleteQuotation(quotationId);\n  } catch (error) {\n    return { message: 'Database Error: Failed to delete quotation.' };\n  }\n  revalidatePath('/quotations');\n  revalidatePath('/');\n  return { message: 'Successfully deleted quotation.' };\n}\n\n\nconst QuotationTemplateSchema = z.object({\n    name: z.string().min(3, 'Template name must be at least 3 characters.'),\n    prefix: z.string().min(1, 'Prefix is required.'),\n    companyName: z.string().min(3, 'Company name is required.'),\n    companyAddress: z.string().min(10, 'Full company address is required.'),\n    companyGst: z.string().min(15, 'A valid GSTIN is required.').max(15),\n    termsAndConditions: z.string().min(20, 'Terms and conditions are required.'),\n    logoUrl: z.string().url('Please enter a valid URL for the logo.').optional().or(z.literal('')),\n});\n\nexport async function addQuotationTemplateAction(formData: FormData) {\n    const validatedFields = QuotationTemplateSchema.safeParse({\n        name: formData.get('name'),\n        prefix: formData.get('prefix'),\n        companyName: formData.get('companyName'),\n        companyAddress: formData.get('companyAddress'),\n        companyGst: formData.get('companyGst'),\n        termsAndConditions: formData.get('termsAndConditions'),\n        logoUrl: formData.get('logoUrl'),\n    });\n\n    if (!validatedFields.success) {\n        return {\n            errors: validatedFields.error.flatten().fieldErrors,\n            message: 'Failed to create template. Please check the fields.',\n        };\n    }\n\n    try {\n        await dbAddQuotationTemplate(validatedFields.data as NewQuotationTemplate);\n    } catch (error) {\n        return { message: 'Database Error: Failed to create template.' };\n    }\n\n    revalidatePath('/setup/quotation-templates');\n    return { message: 'Successfully created quotation template.' };\n}\n\nexport async function updateQuotationTemplateAction(id: string, formData: FormData) {\n    const validatedFields = QuotationTemplateSchema.safeParse({\n        name: formData.get('name'),\n        prefix: formData.get('prefix'),\n        companyName: formData.get('companyName'),\n        companyAddress: formData.get('companyAddress'),\n        companyGst: formData.get('companyGst'),\n        termsAndConditions: formData.get('termsAndConditions'),\n        logoUrl: formData.get('logoUrl'),\n    });\n\n    if (!validatedFields.success) {\n        return {\n            errors: validatedFields.error.flatten().fieldErrors,\n            message: 'Failed to update template. Please check the fields.',\n        };\n    }\n\n    try {\n        await dbUpdateQuotationTemplate(id, validatedFields.data as QuotationTemplate);\n    } catch (error) {\n        return { message: 'Database Error: Failed to update template.' };\n    }\n\n    revalidatePath('/setup/quotation-templates');\n    return { message: 'Successfully updated quotation template.' };\n}\n\nexport async function deleteQuotationTemplateAction(id: string) {\n    try {\n        await dbDeleteQuotationTemplate(id);\n    } catch (error) {\n        return { message: 'Database Error: Failed to delete template.' };\n    }\n\n    revalidatePath('/setup/quotation-templates');\n    return { message: 'Successfully deleted quotation template.' };\n}\n\n\nconst AddEmployeeSchema = z.object({\n    name: z.string().min(2, 'Name must be at least 2 characters.'),\n    email: z.string().email('Please enter a valid email.'),\n    phone: z.string().min(10, 'Please enter a valid phone number.'),\n    role: z.string({\n      required_error: \"You need to select a role.\",\n    }),\n    department: z.string({\n        required_error: \"You need to select a department.\",\n    }),\n    address: z.string().min(10, 'Address is required.'),\n});\n\nexport async function addEmployeeAction(formData: FormData) {\n    const validatedFields = AddEmployeeSchema.safeParse({\n        name: formData.get('name'),\n        email: formData.get('email'),\n        phone: formData.get('phone'),\n        role: formData.get('role'),\n        department: formData.get('department'),\n        address: formData.get('address'),\n    });\n\n    if (!validatedFields.success) {\n        return {\n            errors: validatedFields.error.flatten().fieldErrors,\n            message: 'Failed to add employee.',\n        };\n    }\n\n    const [employeeRoles, departments] = await Promise.all([\n        getEmployeeRoles(),\n        getDepartments(),\n    ]);\n\n    const roleExists = employeeRoles.some(r => r.name === validatedFields.data.role);\n    if (!roleExists) {\n        return { message: 'Invalid role selected.' };\n    }\n    const departmentExists = departments.some(d => d.name === validatedFields.data.department);\n    if (!departmentExists) {\n        return { message: 'Invalid department selected.' };\n    }\n\n    try {\n        // Check if Firebase Admin environment variables are configured\n        const requiredEnvVars = ['FIREBASE_PROJECT_ID', 'FIREBASE_PRIVATE_KEY', 'FIREBASE_CLIENT_EMAIL'];\n        const missingVars = requiredEnvVars.filter(varName => !process.env[varName]);\n        \n        if (missingVars.length > 0) {\n            console.warn(`Firebase Admin not configured. Missing: ${missingVars.join(', ')}`);\n            // Just add to database without Firebase Auth integration\n            await dbAddEmployee(validatedFields.data as NewEmployee);\n            revalidatePath('/employees');\n            return { \n                message: 'Employee added to database. Note: Firebase Auth integration requires environment variables to be configured for automatic account creation and email sending.'\n            };\n        }\n\n        // Initialize Firebase Admin\n        initializeFirebaseAdmin();\n        const auth = getAuth();\n\n        // Create user in Firebase Auth\n        const userRecord = await auth.createUser({\n            email: validatedFields.data.email,\n            displayName: validatedFields.data.name,\n            emailVerified: false,\n        });\n\n        // Add employee to database first\n        await dbAddEmployee(validatedFields.data as NewEmployee);\n\n        // Set a temporary password for the user\n        const tempPassword = Math.random().toString(36).slice(-12) + 'A1!'; // Ensure it meets Firebase requirements\n        \n        // Update the user with the temporary password\n        await auth.updateUser(userRecord.uid, {\n            password: tempPassword,\n        });\n\n        // Send password reset email using Firebase Auth's REST API\n        try {\n            const webApiKey = process.env.FIREBASE_WEB_API_KEY;\n            \n            if (!webApiKey) {\n                throw new Error('FIREBASE_WEB_API_KEY not configured');\n            }\n\n            // Use Firebase Auth REST API to send password reset email\n            const response = await fetch(`https://identitytoolkit.googleapis.com/v1/accounts:sendOobCode?key=${webApiKey}`, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({\n                    requestType: 'PASSWORD_RESET',\n                    email: validatedFields.data.email,\n                    continueUrl: `${process.env.NEXT_PUBLIC_APP_URL || 'http://localhost:3000'}/auth/login`,\n                }),\n            });\n\n            if (response.ok) {\n                const responseData = await response.json();\n                console.log('='.repeat(80));\n                console.log(`✅ EMPLOYEE CREATED: ${validatedFields.data.name}`);\n                console.log(`📧 Email: ${validatedFields.data.email}`);\n                console.log(`📨 Password reset email sent successfully!`);\n                console.log(`📬 Email will be delivered by Firebase Auth`);\n                console.log('='.repeat(80));\n\n                revalidatePath('/employees');\n                return { \n                    message: `Successfully added employee ${validatedFields.data.name}. Password reset email has been sent to ${validatedFields.data.email}.`,\n                };\n            } else {\n                const errorData = await response.json();\n                console.error('Failed to send password reset email:', errorData);\n                throw new Error(`Email sending failed: ${errorData.error?.message || 'Unknown error'}`);\n            }\n        } catch (emailError) {\n            console.error('Error sending password reset email:', emailError);\n            \n            // Fallback: generate link for manual sharing\n            const resetLink = await auth.generatePasswordResetLink(validatedFields.data.email, {\n                url: `${process.env.NEXT_PUBLIC_APP_URL || 'http://localhost:3000'}/auth/login`,\n                handleCodeInApp: false,\n            });\n\n            console.log('='.repeat(80));\n            console.log(`✅ EMPLOYEE CREATED: ${validatedFields.data.name}`);\n            console.log(`📧 Email: ${validatedFields.data.email}`);\n            console.log(`❌ Email sending failed: ${emailError.message}`);\n            console.log(`🔗 Manual Reset Link: ${resetLink}`);\n            console.log(`📝 Please share this link with the employee`);\n            console.log('='.repeat(80));\n\n            revalidatePath('/employees');\n            return { \n                message: `Successfully added employee ${validatedFields.data.name}. Email sending failed - please share the reset link manually (check console).`,\n                resetLink: resetLink\n            };\n        }\n    } catch (error: any) {\n        console.error('Error adding employee:', error);\n        \n        // Handle specific Firebase errors\n        if (error.code === 'auth/email-already-exists') {\n            return { message: 'An account with this email already exists.' };\n        }\n        \n        if (error.message?.includes('Missing required Firebase environment variables')) {\n            // Fallback: add to database only\n            try {\n                await dbAddEmployee(validatedFields.data as NewEmployee);\n                revalidatePath('/employees');\n                return { \n                    message: 'Employee added to database. Firebase Auth integration requires proper environment configuration for automatic account creation.'\n                };\n            } catch (dbError) {\n                return { message: 'Failed to add employee to database.' };\n            }\n        }\n        \n        return { message: 'Failed to add employee. Please check Firebase configuration and try again.' };\n    }\n}\n\nexport async function deleteEmployeeAction(employeeId: string) {\n  try {\n    await dbDeleteEmployee(employeeId);\n  } catch (error) {\n    return { message: 'Database Error: Failed to delete employee.' };\n  }\n  revalidatePath('/employees');\n  revalidatePath('/');\n  return { message: 'Successfully deleted employee.' };\n}\n\nconst UpdateEmployeeSchema = z.object({\n    name: z.string().min(2, 'Name must be at least 2 characters.'),\n    email: z.string().email('Please enter a valid email.'),\n    phone: z.string().min(10, 'Please enter a valid phone number.'),\n    role: z.string(),\n    department: z.string(),\n    address: z.string().min(10, 'Address is required.'),\n});\n\nexport async function updateEmployeeAction(id: string, formData: FormData) {\n    const validatedFields = UpdateEmployeeSchema.safeParse({\n        name: formData.get('name'),\n        email: formData.get('email'),\n        phone: formData.get('phone'),\n        role: formData.get('role'),\n        department: formData.get('department'),\n        address: formData.get('address'),\n    });\n\n    if (!validatedFields.success) {\n        return {\n            errors: validatedFields.error.flatten().fieldErrors,\n            message: 'Failed to update employee.',\n        };\n    }\n\n    try {\n        await dbUpdateEmployee(id, validatedFields.data as NewEmployee);\n    } catch (error) {\n        return { message: 'Database Error: Failed to update employee.' };\n    }\n\n    revalidatePath('/employees');\n    revalidatePath('/');\n    return { message: 'Successfully updated employee.' };\n}\n\n\nconst AddEmployeeRoleSchema = z.object({\n    name: z.string().min(2, 'Role name must be at least 2 characters'),\n});\n\nexport async function addEmployeeRoleAction(formData: FormData) {\n    const validatedFields = AddEmployeeRoleSchema.safeParse({\n        name: formData.get('name'),\n    });\n\n    if (!validatedFields.success) {\n        return {\n            message: validatedFields.error.flatten().fieldErrors.name?.[0] ?? 'Invalid name',\n        };\n    }\n\n    try {\n        await dbAddEmployeeRole(validatedFields.data.name);\n    } catch (error) {\n        return { message: 'Database Error: Failed to add role.' };\n    }\n\n    revalidatePath('/setup');\n    return { message: `Successfully added role '${validatedFields.data.name}'.` };\n}\n\nexport async function deleteEmployeeRoleAction(id: string) {\n    try {\n        await dbDeleteEmployeeRole(id);\n    } catch (error) {\n        return { message: 'Database Error: Failed to delete role.' };\n    }\n\n    revalidatePath('/setup');\n    return { message: 'Successfully deleted role.' };\n}\n\nconst AddDepartmentSchema = z.object({\n    name: z.string().min(2, 'Department name must be at least 2 characters'),\n});\n\nexport async function addDepartmentAction(formData: FormData) {\n    const validatedFields = AddDepartmentSchema.safeParse({\n        name: formData.get('name'),\n    });\n\n    if (!validatedFields.success) {\n        return {\n            message: validatedFields.error.flatten().fieldErrors.name?.[0] ?? 'Invalid name',\n        };\n    }\n\n    try {\n        await dbAddDepartment(validatedFields.data.name);\n    } catch (error) {\n        return { message: 'Database Error: Failed to add department.' };\n    }\n\n    revalidatePath('/setup');\n    return { message: `Successfully added department '${validatedFields.data.name}'.` };\n}\n\nexport async function deleteDepartmentAction(id: string) {\n    try {\n        await dbDeleteDepartment(id);\n    } catch (error) {\n        return { message: 'Database Error: Failed to delete department.' };\n    }\n\n    revalidatePath('/setup');\n    return { message: 'Successfully deleted department.' };\n}\n\n// CSV Import Actions\nconst ImportProductSchema = z.object({\n    name: z.string().min(3, { message: 'Product name must be at least 3 characters.' }),\n    price: z.coerce.number().min(0, { message: 'Price must be a positive number.' }),\n    gstRate: z.coerce.number().min(0).max(100),\n    skus: z.array(z.string()).optional(),\n    catalogueUrl: z.string().url('Please enter a valid URL.').optional().or(z.literal('')),\n});\n\nexport async function importProductsFromCSV(csvData: any[]) {\n    const results = {\n        success: 0,\n        failed: 0,\n        errors: [] as string[]\n    };\n\n// Get all existing product categories to match against\nconst allCategories = await getProductCategories();\n\n    for (let i = 0; i < csvData.length; i++) {\n        const row = csvData[i];\n        \n        try {\n            // Parse SKUs from comma-separated string\n            const skus = row.skus ? row.skus.split(',').map((sku: string) => sku.trim()).filter(Boolean) : [];\n            \n// Match category by exact name (single category)\nlet categoryId: string | undefined = undefined;\nconst categoryName = (row.category || row.categories || '').toString().trim();\nif (categoryName) {\n    const existingCategory = allCategories.find((c) => c.name === categoryName);\n    if (existingCategory) {\n        categoryId = existingCategory.id;\n    } else {\n        results.errors.push(`Row ${i + 1}: Category not found: ${categoryName}. Please create this category first.`);\n    }\n}\n            \n// Prepare data for validation, including optional fields\n            const dataForValidation = {\n                name: row.name,\n                price: row.price,\n                gstRate: row.gstRate,\n                ...(skus.length > 0 && { skus }),\n                ...(row.catalogueUrl && row.catalogueUrl.trim() && { catalogueUrl: row.catalogueUrl }),\n            };\n\n            const validatedData = ImportProductSchema.parse(dataForValidation);\n\n            // Prepare data for database - only include defined fields\nconst productData = {\n    name: validatedData.name,\n    price: validatedData.price,\n    gstRate: validatedData.gstRate,\n    ...(validatedData.skus && { skus: validatedData.skus }),\n    ...(validatedData.catalogueUrl && { catalogueUrl: validatedData.catalogueUrl }),\n    ...(categoryId && { categoryId }),\n};\n\n            await dbAddProduct(productData);\n            \n            results.success++;\n        } catch (error) {\n            results.failed++;\n            if (error instanceof z.ZodError) {\n                const errorMessages = error.errors.map(e => `Row ${i + 1}: ${e.path.join('.')} - ${e.message}`);\n                results.errors.push(...errorMessages);\n            } else {\n                results.errors.push(`Row ${i + 1}: Failed to import product - ${error instanceof Error ? error.message : 'Unknown error'}`);\n            }\n        }\n    }\n\n    // Revalidate pages after import\n    revalidatePath('/products');\n    revalidatePath('/leads');\n\n    return {\n        success: results.failed === 0,\n        message: `Import completed. ${results.success} products imported successfully${results.failed > 0 ? `, ${results.failed} failed` : ''}.`,\n        errors: results.errors.length > 0 ? results.errors : undefined\n    };\n}\n\n// Count Actions\nexport async function getLeadsCountAction(): Promise<number> {\n    try {\n        return await getLeadsCount();\n    } catch (error) {\n        console.error('Error getting leads count:', error);\n        return 0;\n    }\n}\n\nexport async function getQuotationsCountAction(): Promise<number> {\n    try {\n        return await getQuotationsCount();\n    } catch (error) {\n        console.error('Error getting quotations count:', error);\n        return 0;\n    }\n}\n\nexport async function getProductsCountAction(): Promise<number> {\n    try {\n        return await getProductsCount();\n    } catch (error) {\n        console.error('Error getting products count:', error);\n        return 0;\n    }\n}\n\nexport async function getEmployeesCountAction(): Promise<number> {\n    try {\n        return await getEmployeesCount();\n    } catch (error) {\n        console.error('Error getting employees count:', error);\n        return 0;\n    }\n}\n\nexport async function getLeadsCountByStatusAction(status: LeadStatus): Promise<number> {\n    try {\n        return await getLeadsCountByStatus(status);\n    } catch (error) {\n        console.error(`Error getting leads count for status ${status}:`, error);\n        return 0;\n    }\n}\n\nexport async function getQuotationsCountByStatusAction(status: 'Draft' | 'Sent' | 'Accepted' | 'Rejected'): Promise<number> {\n    try {\n        return await getQuotationsCountByStatus(status);\n    } catch (error) {\n        console.error(`Error getting quotations count for status ${status}:`, error);\n        return 0;\n    }\n}\n\nexport async function getActiveProductsCountAction(): Promise<number> {\n    try {\n        return await getActiveProductsCount();\n    } catch (error) {\n        console.error('Error getting active products count:', error);\n        return 0;\n    }\n}\n\nexport async function getActiveEmployeesCountAction(): Promise<number> {\n    try {\n        return await getActiveEmployeesCount();\n    } catch (error) {\n        console.error('Error getting active employees count:', error);\n        return 0;\n    }\n}\n\n// Communication Activity Actions\nconst CommunicationActivitySchema = z.object({\n  leadId: z.string().min(1, 'Lead ID is required'),\n  type: z.enum(['WhatsApp', 'Email']),\n  message: z.string().min(1, 'Message is required'),\n  contact: z.string().min(1, 'Contact is required'),\n  sentBy: z.string().min(1, 'Sent by is required'),\n});\n\nexport async function logCommunicationActivityAction(formData: FormData) {\n  const validatedFields = CommunicationActivitySchema.safeParse({\n    leadId: formData.get('leadId'),\n    type: formData.get('type'),\n    message: formData.get('message'),\n    contact: formData.get('contact'),\n    sentBy: formData.get('sentBy'),\n  });\n\n  if (!validatedFields.success) {\n    return {\n      errors: validatedFields.error.flatten().fieldErrors,\n      message: 'Missing Fields. Failed to log communication activity.',\n    };\n  }\n\n  const { leadId, type, message, contact, sentBy } = validatedFields.data;\n\n  try {\n    const activityNotes = `${type} message sent to ${contact} by ${sentBy}:\\n\\n\"${message}\"`;\n    \n    await addActivityToLead(leadId, {\n      type: type as 'WhatsApp' | 'Email',\n      notes: activityNotes\n    });\n  } catch (error) {\n    const errMsg = error instanceof Error ? error.message : String(error);\n    console.error('LogCommunicationActivity Error:', errMsg);\n    if (errMsg.includes('Lead not found')) {\n      return { message: 'Lead not found. Please refresh the page and try again.' };\n    }\n    return { message: 'Database Error: Failed to log communication activity.' };\n  }\n\n  return { message: `Successfully logged ${type} communication.` };\n}\n\nexport async function getCurrentUserEmployeeAction(email: string): Promise<Employee | null> {\n    try {\n        return await getEmployeeByEmail(email);\n    } catch (error) {\n        console.error('Error getting current user employee:', error);\n        return null;\n    }\n}\n\n// ==================== Currency Actions ====================\nimport { addCurrency as dbAddCurrency, updateCurrency as dbUpdateCurrency, deleteCurrency as dbDeleteCurrency } from './firestore-service';\n\nconst CurrencySchema = z.object({\n  code: z.string().min(2, 'Currency code must be at least 2 characters').max(5, 'Currency code must be at most 5 characters'),\n  name: z.string().min(2, 'Currency name is required'),\n  symbol: z.string().min(1, 'Currency symbol is required'),\n  conversionRate: z.coerce.number().positive('Conversion rate must be positive'),\n});\n\nexport async function addCurrencyAction(formData: FormData) {\n  const validatedFields = CurrencySchema.safeParse({\n    code: formData.get('code'),\n    name: formData.get('name'),\n    symbol: formData.get('symbol'),\n    conversionRate: formData.get('conversionRate'),\n  });\n\n  if (!validatedFields.success) {\n    return {\n      errors: validatedFields.error.flatten().fieldErrors,\n      message: 'Validation Error: Failed to add currency.',\n    };\n  }\n\n  try {\n    await dbAddCurrency(validatedFields.data);\n  } catch (error) {\n    return { message: 'Database Error: Failed to add currency.' };\n  }\n\n  revalidatePath('/setup');\n  return { message: 'Successfully added currency.' };\n}\n\nexport async function updateCurrencyAction(id: string, formData: FormData) {\n  const validatedFields = CurrencySchema.safeParse({\n    code: formData.get('code'),\n    name: formData.get('name'),\n    symbol: formData.get('symbol'),\n    conversionRate: formData.get('conversionRate'),\n  });\n\n  if (!validatedFields.success) {\n    return {\n      errors: validatedFields.error.flatten().fieldErrors,\n      message: 'Validation Error: Failed to update currency.',\n    };\n  }\n\n  try {\n    await dbUpdateCurrency(id, validatedFields.data);\n  } catch (error) {\n    return { message: 'Database Error: Failed to update currency.' };\n  }\n\n  revalidatePath('/setup');\n  return { message: 'Successfully updated currency.' };\n}\n\nexport async function deleteCurrencyAction(id: string) {\n  try {\n    await dbDeleteCurrency(id);\n  } catch (error) {\n    return { message: 'Database Error: Failed to delete currency.' };\n  }\n\n  revalidatePath('/setup');\n  return { message: 'Successfully deleted currency.' };\n}\n\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3802, "column": 0}, "map": {"version":3,"sources":["file:///Users/gauravshukla/Downloads/ll/.next-internal/server/app/products/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {getEmployeesCount as '7f0b900bdacd23b80cfa42ee2659193dc63d563866'} from 'ACTIONS_MODULE0'\nexport {getProductsCount as '7f0e44f23d3c7919e802910994293ba5af468982fa'} from 'ACTIONS_MODULE0'\nexport {updateQuotation as '7f0eec47d7f3455687f950210982ed5eaade19ec0d'} from 'ACTIONS_MODULE0'\nexport {getActiveEmployeesCount as '7f1455f8b318777754ab9b7b5ac6270bda312fba0d'} from 'ACTIONS_MODULE0'\nexport {getEmployeeById as '7f19c4485b5ffc22d762a2ac6e3d8651714a96dac5'} from 'ACTIONS_MODULE0'\nexport {getQuotationsCountByStatus as '7f1a388a471526880d26227159645d4574e69eec04'} from 'ACTIONS_MODULE0'\nexport {updateProductCategory as '7f211c04d8a0aa811dbf3ebd5eaef4cdf0d86d0d27'} from 'ACTIONS_MODULE0'\nexport {addQuotation as '7f28f0312ef2475661560aba6d2211cc1ecf40ddc8'} from 'ACTIONS_MODULE0'\nexport {getProductCategoryById as '7f2ffe513d6cb877ab602ae19af7210964c29cb45c'} from 'ACTIONS_MODULE0'\nexport {addProductCategory as '7f33d4740a71a78b8166f45557e54c58071cf9721d'} from 'ACTIONS_MODULE0'\nexport {addEmployee as '7f3563d0efd830c753f6dd196b47b96211a63fccbc'} from 'ACTIONS_MODULE0'\nexport {addLeadSource as '7f367c5085291a37a1851fdbcfa11d607b63f3d8a6'} from 'ACTIONS_MODULE0'\nexport {addActivityToLead as '7f3d9aa150bda258ae10ec3c76df09af6e7b54d9b3'} from 'ACTIONS_MODULE0'\nexport {updateEmployee as '7f3e14bc7ef18238208187f13e333fd7b953d7d1e7'} from 'ACTIONS_MODULE0'\nexport {getRecentActivities as '7f44ceb99d99462235ea05cf94c0346c12bfb5bf76'} from 'ACTIONS_MODULE0'\nexport {updateLeadStatus as '7f4654b4a69b701893d7ff7c63f6ce253f47c1ce2d'} from 'ACTIONS_MODULE0'\nexport {getLeadSources as '7f4a20d8195ae7285732b38e6615880aff9f0838ff'} from 'ACTIONS_MODULE0'\nexport {deleteQuotationTemplate as '7f4b406604fb4f23ab19ae2c65ee0e5eb30193ff9c'} from 'ACTIONS_MODULE0'\nexport {getQuotationById as '7f4eb9a43ca7d2f7e7a29eaa7cc3cb9be7ade68424'} from 'ACTIONS_MODULE0'\nexport {getEmployeeByEmail as '7f56f323de8f245703ea18e687e41f198b09df0d18'} from 'ACTIONS_MODULE0'\nexport {getProducts as '7f58b3df2815b13c88487fb9bc327aa1136ac33959'} from 'ACTIONS_MODULE0'\nexport {getLeadsCountByStatus as '7f5efc12e891723922f6a4f8f293527e6b597a2b41'} from 'ACTIONS_MODULE0'\nexport {addDepartment as '7f65be10c84fd8c7dd5cee02c8c7a7643a8c413872'} from 'ACTIONS_MODULE0'\nexport {deleteProductCategory as '7f65deb60c7d2400de6746ef169a10f954d5230a2a'} from 'ACTIONS_MODULE0'\nexport {getQuotationTemplateById as '7f6ee7210d74eeb266fa57e73cf5b39a3e9fc25c81'} from 'ACTIONS_MODULE0'\nexport {addLead as '7f70f871eb43db37af271b12a5f00b29d4dad8ff08'} from 'ACTIONS_MODULE0'\nexport {updateLead as '7f7647e2122df1621fe89692d2222a9229fdf1ea9f'} from 'ACTIONS_MODULE0'\nexport {deleteEmployeeRole as '7f81e819b2ddf15d26d57b699b79785893bd58ae84'} from 'ACTIONS_MODULE0'\nexport {getActiveProductsCount as '7f858254eb3a59e7dab365e690410cf669a53e222c'} from 'ACTIONS_MODULE0'\nexport {addProduct as '7f8f68372f5a39e06105f6239c2d232deed79ef6ca'} from 'ACTIONS_MODULE0'\nexport {getQuotationsCount as '7f91d52f6a4498bfa43d1c3b3bed4c2955bf9caa5e'} from 'ACTIONS_MODULE0'\nexport {getLeadsCount as '7f9d89248b9e9f83905a27cfe5b503290a8c58394d'} from 'ACTIONS_MODULE0'\nexport {deleteDepartment as '7fa28870af7d1644b948a6c68ec9ec67971f0283cd'} from 'ACTIONS_MODULE0'\nexport {getQuotationTemplates as '7fa3eaf1e501cd386360a0203d69bed8b510130fcc'} from 'ACTIONS_MODULE0'\nexport {deleteQuotation as '7fa505faea8d9f0797b974f4c4e1b16b22ef67d143'} from 'ACTIONS_MODULE0'\nexport {updateProduct as '7fac612984c6b1073c0f9b63ca660d587cdec64fdf'} from 'ACTIONS_MODULE0'\nexport {deleteLeadSource as '7facf284ce254e1336cbaef1f847a5cbc46dff847e'} from 'ACTIONS_MODULE0'\nexport {getEmployees as '7fb1e5d2000e99c91bf24d4e39d71ce542a88f9e5c'} from 'ACTIONS_MODULE0'\nexport {getLeads as '7fb492c3da6c402b894e80a4f7908c57385a289be4'} from 'ACTIONS_MODULE0'\nexport {deleteEmployee as '7fba8e38984b78115fcaa9e1323c540462dd1cc3d4'} from 'ACTIONS_MODULE0'\nexport {addQuotationTemplate as '7fc4c79fcec7920116a5e4fcf6c88519d91bebfcd0'} from 'ACTIONS_MODULE0'\nexport {getEmployeeRoles as '7fc6957e105b0cd9764c3443bbb074f3088df3ad3e'} from 'ACTIONS_MODULE0'\nexport {getQuotations as '7fce37adfcca0f5ee64a0a0c034d566187ac486d0e'} from 'ACTIONS_MODULE0'\nexport {updateQuotationTemplate as '7fcfaec42b09d794ca7d8cc8fbd819d44c83195e6c'} from 'ACTIONS_MODULE0'\nexport {deleteProduct as '7fdc88f7c6a4cf8c68c802b932896090c05f809ab5'} from 'ACTIONS_MODULE0'\nexport {getDepartments as '7fdf64358f381828b72e99b45ef549dc07de5b94d5'} from 'ACTIONS_MODULE0'\nexport {deleteLead as '7fe1e8295a10e203e5c2b3fc15cecb1f6dca6c433e'} from 'ACTIONS_MODULE0'\nexport {getLeadById as '7feeac06b526a1b11c6b2b3ec53bed70ee86d6aa85'} from 'ACTIONS_MODULE0'\nexport {getProductCategories as '7ffa785f70b0e1d9b4e09686fa05d08088fb496370'} from 'ACTIONS_MODULE0'\nexport {addEmployeeRole as '7ffefbabd65d64b242a9eca6efbdd7d22af77aa608'} from 'ACTIONS_MODULE0'\nexport {getEmployeesCountAction as '000995be71b8a8838960047993f11778f80310d90e'} from 'ACTIONS_MODULE1'\nexport {getActiveProductsCountAction as '00559255a4ea619ea22c6b6a046c0c51eb09e6701b'} from 'ACTIONS_MODULE1'\nexport {getLeadsCountAction as '0078a8fce0fcaaefbe7644816de95870edb024f189'} from 'ACTIONS_MODULE1'\nexport {getQuotationsCountAction as '0097146843e892c7ab59227503895a0f98c82c4686'} from 'ACTIONS_MODULE1'\nexport {getProductsCountAction as '00b17ed6eeb90cbbed0f9960b083c8bf39c7c957d4'} from 'ACTIONS_MODULE1'\nexport {getActiveEmployeesCountAction as '00d0ef69458461782a8f6237a38962824b1ea53558'} from 'ACTIONS_MODULE1'\nexport {getProductCategoriesAction as '00ec640e524c2b09cd05bcbc91e8aa00d0db01d112'} from 'ACTIONS_MODULE1'\nexport {importProductsFromCSV as '401384dbfe8db00514dd0428cf8ce7cfb73e10f328'} from 'ACTIONS_MODULE1'\nexport {addQuotation as '40170e85279d4543f6383130b926f7e5969ba55a92'} from 'ACTIONS_MODULE1'\nexport {deleteProduct as '40176d3d6990cb08430dd0b9f623e71b115973d4e1'} from 'ACTIONS_MODULE1'\nexport {deleteLeadAction as '40181a13a40b0fe992551eab7d082a69960b957c02'} from 'ACTIONS_MODULE1'\nexport {getLeadsCountByStatusAction as '401e2f0858ac2ea902204a5a5742eaf7462e09bb15'} from 'ACTIONS_MODULE1'\nexport {deleteQuotationAction as '402b86358f3fc75c35b2441b4c361ea970fb903f14'} from 'ACTIONS_MODULE1'\nexport {deleteEmployeeRoleAction as '40359399de339d67348ca376f48900386d4d5745ae'} from 'ACTIONS_MODULE1'\nexport {deleteEmployeeAction as '4035f8968d972c4a9f760664964cf4bcbf219691f8'} from 'ACTIONS_MODULE1'\nexport {getCurrentUserEmployeeAction as '40459f91106fd8737e88692909df491a7fb9c3e5ac'} from 'ACTIONS_MODULE1'\nexport {deleteDepartmentAction as '404f8056db98fe5905211494f9d0215a9e2221b5a7'} from 'ACTIONS_MODULE1'\nexport {addDepartmentAction as '4056af8aa8c98439c52c722bc08f3ec36e2430ed2d'} from 'ACTIONS_MODULE1'\nexport {deleteProductCategoryAction as '40670f9184549e11d20b28afbb6668ba8039067652'} from 'ACTIONS_MODULE1'\nexport {addCurrencyAction as '406997ba66ecdbc018a39a0b5fd55d2cc738937cd0'} from 'ACTIONS_MODULE1'\nexport {logCommunicationActivityAction as '406d37954df7b6956afe41b91c59d0a96e37ec86f6'} from 'ACTIONS_MODULE1'\nexport {deleteQuotationTemplateAction as '4081bb2bb660ecc7da597a57e375fe93aa349fb15c'} from 'ACTIONS_MODULE1'\nexport {createLead as '40861195548c217512dbe1823b0a2fac97faf0a2d4'} from 'ACTIONS_MODULE1'\nexport {getQuotationsCountByStatusAction as '40a5a5b33b502bb792212e4b1d938c736f42698990'} from 'ACTIONS_MODULE1'\nexport {addProductCategoryAction as '40aacf58a50d542127986debd15c6f93a962591b6d'} from 'ACTIONS_MODULE1'\nexport {addEmployeeRoleAction as '40ac9647394c3fca94265ae16e638242d94a5e8503'} from 'ACTIONS_MODULE1'\nexport {addQuotationTemplateAction as '40c5244f064772c6a13c48bf3003ce9d09bf9a4420'} from 'ACTIONS_MODULE1'\nexport {logActivity as '40ca09e7bc0e19e67955d0f6e7229103d8a91031a7'} from 'ACTIONS_MODULE1'\nexport {addLeadSourceAction as '40db1951ba45f732cb685ad1ead679cc9a387113e1'} from 'ACTIONS_MODULE1'\nexport {addEmployeeAction as '40db5ce40e7ac2c285029b1e06e10e7fce667f13e2'} from 'ACTIONS_MODULE1'\nexport {addProduct as '40df2fd914c2479a9faa25a5f8ae22264f2d2d1760'} from 'ACTIONS_MODULE1'\nexport {deleteCurrencyAction as '40ea2e420858d93f4499799b03c3f5b08f6f9c9e87'} from 'ACTIONS_MODULE1'\nexport {deleteLeadSourceAction as '40f2b2cbe6bb6809904e344ab0663ed85597aaa19f'} from 'ACTIONS_MODULE1'\nexport {getSummaryForNotes as '40f5f7d11f95831f84e29a84974f5e2a540e9c827e'} from 'ACTIONS_MODULE1'\nexport {updateEmployeeAction as '6055a96d6c291f06694e3d11b5bc2c9d814730d762'} from 'ACTIONS_MODULE1'\nexport {updateQuotationTemplateAction as '60752bc7c2d3a5394ffc424eb347ed8ea299dc55ed'} from 'ACTIONS_MODULE1'\nexport {updateLead as '609c476f3eeb7594fefe346a0d8e15a03ceb0681a1'} from 'ACTIONS_MODULE1'\nexport {updateCurrencyAction as '60a95b8cd1e162d879a747c213e25f9f3232811747'} from 'ACTIONS_MODULE1'\nexport {updateQuotation as '60cdaa732711e2e8962552c705491d3a52fe96d609'} from 'ACTIONS_MODULE1'\nexport {updateProduct as '60ebb75a84c9a24d13f8ae5da3e6c5337463ff14d9'} from 'ACTIONS_MODULE1'\nexport {updateProductCategoryAction as '70e900c17df2a5ef77c00957931f5c786f66da211b'} from 'ACTIONS_MODULE1'\nexport {updateLeadStatusAction as '78737e482bc77b2f9c03c343dd86c2540566903ea8'} from 'ACTIONS_MODULE1'\nexport {summarizeMeetingNotes as '40d93c53acd21f87d84976506f86c23963b1eec55f'} from 'ACTIONS_MODULE2'\n"],"names":[],"mappings":";AAAA;AAkDA;AA0CA","debugId":null}},
    {"offset": {"line": 4159, "column": 0}, "map": {"version":3,"sources":["file:///Users/gauravshukla/Downloads/ll/src/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,CAAA,GAAA,2JAAA,CAAA,UAAO,AAAD,EAAE,CAAA,GAAA,qIAAA,CAAA,OAAI,AAAD,EAAE;AACtB","debugId":null}},
    {"offset": {"line": 4175, "column": 0}, "map": {"version":3,"sources":["file:///Users/gauravshukla/Downloads/ll/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h3\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <p\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG1B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,4DACA;QAED,GAAG,KAAK;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,sDACA;QAED,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGrC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAI,KAAK;QAAK,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,YAAY;QAAa,GAAG,KAAK;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 4256, "column": 0}, "map": {"version":3,"sources":["file:///Users/gauravshukla/Downloads/ll/src/components/ui/table.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n"],"names":[],"mappings":";;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YACC,KAAK;YACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;YAC9C,GAAG,KAAK;;;;;;;;;;;AAIf,MAAM,WAAW,GAAG;AAEpB,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAM,KAAK;QAAK,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,mBAAmB;QAAa,GAAG,KAAK;;;;;;AAEzE,YAAY,WAAW,GAAG;AAE1B,MAAM,0BAAY,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,2DACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG;AAE1B,MAAM,yBAAW,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG9B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,+EACA;QAED,GAAG,KAAK;;;;;;AAGb,SAAS,WAAW,GAAG;AAEvB,MAAM,0BAAY,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,oGACA;QAED,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,0BAAY,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,kDAAkD;QAC/D,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,6BAAe,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGb,aAAa,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 4366, "column": 0}, "map": {"version":3,"sources":["file:///Users/gauravshukla/Downloads/ll/src/app/products/add-product-sheet.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport const AddProductSheet = registerClientReference(\n    function() { throw new Error(\"Attempted to call AddProductSheet() from the server but AddProductSheet is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/products/add-product-sheet.tsx <module evaluation>\",\n    \"AddProductSheet\",\n);\n"],"names":[],"mappings":";;;AAAA;;AACO,MAAM,kBAAkB,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjD;IAAa,MAAM,IAAI,MAAM;AAA8O,GAC3Q,wEACA","debugId":null}},
    {"offset": {"line": 4380, "column": 0}, "map": {"version":3,"sources":["file:///Users/gauravshukla/Downloads/ll/src/app/products/add-product-sheet.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport const AddProductSheet = registerClientReference(\n    function() { throw new Error(\"Attempted to call AddProductSheet() from the server but AddProductSheet is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/products/add-product-sheet.tsx\",\n    \"AddProductSheet\",\n);\n"],"names":[],"mappings":";;;AAAA;;AACO,MAAM,kBAAkB,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjD;IAAa,MAAM,IAAI,MAAM;AAA8O,GAC3Q,oDACA","debugId":null}},
    {"offset": {"line": 4394, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 4404, "column": 0}, "map": {"version":3,"sources":["file:///Users/gauravshukla/Downloads/ll/src/app/products/import-products-dialog.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport const ImportProductsDialog = registerClientReference(\n    function() { throw new Error(\"Attempted to call ImportProductsDialog() from the server but ImportProductsDialog is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/products/import-products-dialog.tsx <module evaluation>\",\n    \"ImportProductsDialog\",\n);\n"],"names":[],"mappings":";;;AAAA;;AACO,MAAM,uBAAuB,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACtD;IAAa,MAAM,IAAI,MAAM;AAAwP,GACrR,6EACA","debugId":null}},
    {"offset": {"line": 4418, "column": 0}, "map": {"version":3,"sources":["file:///Users/gauravshukla/Downloads/ll/src/app/products/import-products-dialog.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport const ImportProductsDialog = registerClientReference(\n    function() { throw new Error(\"Attempted to call ImportProductsDialog() from the server but ImportProductsDialog is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/products/import-products-dialog.tsx\",\n    \"ImportProductsDialog\",\n);\n"],"names":[],"mappings":";;;AAAA;;AACO,MAAM,uBAAuB,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACtD;IAAa,MAAM,IAAI,MAAM;AAAwP,GACrR,yDACA","debugId":null}},
    {"offset": {"line": 4432, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 4442, "column": 0}, "map": {"version":3,"sources":["file:///Users/gauravshukla/Downloads/ll/src/components/ui/badge.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n"],"names":[],"mappings":";;;;;AACA;AAEA;;;;AAEA,MAAM,gBAAgB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACtB,0KACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SAAS;QACX;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAOF,SAAS,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAmB;IACzD,qBACE,8OAAC;QAAI,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,cAAc;YAAE;QAAQ,IAAI;QAAa,GAAG,KAAK;;;;;;AAExE","debugId":null}},
    {"offset": {"line": 4484, "column": 0}, "map": {"version":3,"sources":["file:///Users/gauravshukla/Downloads/ll/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,iBAAiB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACvB,4VACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAC5B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,MAAM,OAAO,UAAU,gKAAA,CAAA,OAAI,GAAG;IAC9B,qBACE,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,OAAO,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 4544, "column": 0}, "map": {"version":3,"sources":["file:///Users/gauravshukla/Downloads/ll/src/app/products/product-actions.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport const ProductActions = registerClientReference(\n    function() { throw new Error(\"Attempted to call ProductActions() from the server but ProductActions is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/products/product-actions.tsx <module evaluation>\",\n    \"ProductActions\",\n);\n"],"names":[],"mappings":";;;AAAA;;AACO,MAAM,iBAAiB,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EAChD;IAAa,MAAM,IAAI,MAAM;AAA4O,GACzQ,sEACA","debugId":null}},
    {"offset": {"line": 4558, "column": 0}, "map": {"version":3,"sources":["file:///Users/gauravshukla/Downloads/ll/src/app/products/product-actions.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport const ProductActions = registerClientReference(\n    function() { throw new Error(\"Attempted to call ProductActions() from the server but ProductActions is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/products/product-actions.tsx\",\n    \"ProductActions\",\n);\n"],"names":[],"mappings":";;;AAAA;;AACO,MAAM,iBAAiB,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EAChD;IAAa,MAAM,IAAI,MAAM;AAA4O,GACzQ,kDACA","debugId":null}},
    {"offset": {"line": 4572, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 4582, "column": 0}, "map": {"version":3,"sources":["file:///Users/gauravshukla/Downloads/ll/src/components/pdf-viewer.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport const PDFViewer = registerClientReference(\n    function() { throw new Error(\"Attempted to call PDFViewer() from the server but PDFViewer is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/pdf-viewer.tsx <module evaluation>\",\n    \"PDFViewer\",\n);\n"],"names":[],"mappings":";;;AAAA;;AACO,MAAM,YAAY,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EAC3C;IAAa,MAAM,IAAI,MAAM;AAAkO,GAC/P,+DACA","debugId":null}},
    {"offset": {"line": 4596, "column": 0}, "map": {"version":3,"sources":["file:///Users/gauravshukla/Downloads/ll/src/components/pdf-viewer.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport const PDFViewer = registerClientReference(\n    function() { throw new Error(\"Attempted to call PDFViewer() from the server but PDFViewer is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/pdf-viewer.tsx\",\n    \"PDFViewer\",\n);\n"],"names":[],"mappings":";;;AAAA;;AACO,MAAM,YAAY,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EAC3C;IAAa,MAAM,IAAI,MAAM;AAAkO,GAC/P,2CACA","debugId":null}},
    {"offset": {"line": 4610, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 4620, "column": 0}, "map": {"version":3,"sources":["file:///Users/gauravshukla/Downloads/ll/src/app/products/products-filters.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport const ProductsFilters = registerClientReference(\n    function() { throw new Error(\"Attempted to call ProductsFilters() from the server but ProductsFilters is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/products/products-filters.tsx <module evaluation>\",\n    \"ProductsFilters\",\n);\n"],"names":[],"mappings":";;;AAAA;;AACO,MAAM,kBAAkB,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjD;IAAa,MAAM,IAAI,MAAM;AAA8O,GAC3Q,uEACA","debugId":null}},
    {"offset": {"line": 4634, "column": 0}, "map": {"version":3,"sources":["file:///Users/gauravshukla/Downloads/ll/src/app/products/products-filters.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport const ProductsFilters = registerClientReference(\n    function() { throw new Error(\"Attempted to call ProductsFilters() from the server but ProductsFilters is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/products/products-filters.tsx\",\n    \"ProductsFilters\",\n);\n"],"names":[],"mappings":";;;AAAA;;AACO,MAAM,kBAAkB,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjD;IAAa,MAAM,IAAI,MAAM;AAA8O,GAC3Q,mDACA","debugId":null}},
    {"offset": {"line": 4648, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 4658, "column": 0}, "map": {"version":3,"sources":["file:///Users/gauravshukla/Downloads/ll/src/app/products/page.tsx"],"sourcesContent":["import { getProducts } from \"@/lib/data\";\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from \"@/components/ui/card\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport { AddProductSheet } from \"./add-product-sheet\";\nimport { ImportProductsDialog } from \"./import-products-dialog\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport Link from 'next/link';\nimport { Link2, FileText } from 'lucide-react';\nimport { ProductActions } from \"./product-actions\";\nimport { PDFViewer } from \"@/components/pdf-viewer\";\nimport Image from 'next/image';\nimport { getProductCategoriesAction } from \"@/lib/actions\";\nimport { ProductsFilters } from \"./products-filters\";\n\nexport default async function ProductsPage({\n  searchParams,\n}: {\n  searchParams?: { [key: string]: string | string[] | undefined };\n}) {\n  const [products, allCategories] = await Promise.all([\n    getProducts(),\n    getProductCategoriesAction(),\n  ]);\n\n  const categoryParam =\n    typeof searchParams?.category === \"string\"\n      ? searchParams.category\n      : Array.isArray(searchParams?.category)\n      ? searchParams?.category[0]\n      : undefined;\n\n  const filteredProducts = categoryParam\n    ? products.filter((product) => product.categoryId === categoryParam)\n    : products;\n\n  const formatCurrency = (amount: number) => {\n    return new Intl.NumberFormat('en-IN', {\n      style: 'currency',\n      currency: 'INR',\n    }).format(amount);\n  };\n\n  return (\n    <>\n      <div className=\"flex flex-col gap-2 md:flex-row md:items-center md:justify-between md:space-y-2\">\n        <div className=\"flex items-center justify-between gap-2\">\n          <h2 className=\"text-3xl font-bold tracking-tight\">\n            Products {filteredProducts.length}\n          </h2>\n        </div>\n        <div className=\"flex flex-wrap items-center gap-2 justify-end\">\n          <ProductsFilters categories={allCategories} />\n          <ImportProductsDialog />\n          <AddProductSheet />\n        </div>\n      </div>\n      <Card>\n        <CardHeader>\n          <CardTitle>Your Products</CardTitle>\n          <CardDescription>\n            A list of all the products and services you offer.\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <Table>\n            <TableHeader>\n              <TableRow>\n                <TableHead>Image</TableHead>\n                <TableHead>Name</TableHead>\n<TableHead>Category</TableHead>\n                <TableHead>SKUs</TableHead>\n                <TableHead>Catalogue</TableHead>\n                <TableHead className=\"text-right\">Price</TableHead>\n                <TableHead className=\"text-right\">GST</TableHead>\n                <TableHead className=\"w-[50px]\">Actions</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {filteredProducts.map((product) => (\n                <TableRow key={product.id}>\n                  <TableCell>\n                    {product.productImage ? (\n                      <div className=\"relative w-16 h-16 rounded-md overflow-hidden bg-gray-100\">\n                        <Image\n                          src={product.productImage.url}\n                          alt={product.name}\n                          fill\n                          className=\"object-cover\"\n                          sizes=\"64px\"\n                        />\n                      </div>\n                    ) : (\n                      <div className=\"w-16 h-16 rounded-md bg-gray-100 flex items-center justify-center\">\n                        <span className=\"text-xs text-muted-foreground\">No image</span>\n                      </div>\n                    )}\n                  </TableCell>\n                  <TableCell className=\"font-medium\">{product.name}</TableCell>\n                  <TableCell>\n                    <div className=\"flex flex-wrap gap-1\">\n{product.categoryId ? (\n                        (() => {\n                          const category = allCategories.find(c => c.id === product.categoryId);\n                          return category ? (\n                            <Badge variant=\"secondary\">{category.name}</Badge>\n                          ) : (\n                            <span className=\"text-muted-foreground text-sm\">-</span>\n                          );\n                        })()\n                      ) : (\n                        <span className=\"text-muted-foreground text-sm\">-</span>\n                      )}\n                    </div>\n                  </TableCell>\n                  <TableCell>\n                    <div className=\"flex flex-wrap gap-1\">\n                      {product.skus?.map(sku => <Badge key={sku} variant=\"outline\">{sku}</Badge>)}\n                    </div>\n                  </TableCell>\n                  <TableCell>\n                    <div className=\"flex items-center gap-2\">\n                      {product.cataloguePdf ? (\n                        <PDFViewer \n                          pdfData={product.cataloguePdf}\n                          trigger={\n                            <Button variant=\"outline\" size=\"sm\" className=\"flex items-center gap-1\">\n                              <FileText className=\"h-4 w-4\" />\n                              View PDF\n                            </Button>\n                          }\n                        />\n                      ) : (\n                        <span className=\"text-muted-foreground\">-</span>\n                      )}\n                    </div>\n                  </TableCell>\n                  <TableCell className=\"text-right\">{formatCurrency(product.price)}</TableCell>\n                  <TableCell className=\"text-right\">{product.gstRate}%</TableCell>\n                  <TableCell>\n                    <ProductActions product={product} />\n                  </TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n          {filteredProducts.length === 0 && (\n            <div className=\"text-center py-10 text-muted-foreground\">\n              {products.length === 0\n                ? \"You haven't added any products yet.\"\n                : \"No products found for the selected category.\"}\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}