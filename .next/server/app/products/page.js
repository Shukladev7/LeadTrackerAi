(()=>{var e={};e.id=571,e.ids=[571],e.modules={643:e=>{"use strict";e.exports=require("node:perf_hooks")},1708:e=>{"use strict";e.exports=require("node:process")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3662:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(82614).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},4573:e=>{"use strict";e.exports=require("node:buffer")},6110:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(82614).A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},6211:(e,t,r)=>{"use strict";r.d(t,{A0:()=>l,BF:()=>o,Gg:()=>d,Hj:()=>c,XI:()=>i,nA:()=>m,nd:()=>u});var s=r(60687),a=r(43210),n=r(4780);let i=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:r,className:(0,n.cn)("w-full caption-bottom text-sm",e),...t})}));i.displayName="Table";let l=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("thead",{ref:r,className:(0,n.cn)("[&_tr]:border-b",e),...t}));l.displayName="TableHeader";let o=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("tbody",{ref:r,className:(0,n.cn)("[&_tr:last-child]:border-0",e),...t}));o.displayName="TableBody";let d=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("tfoot",{ref:r,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));d.displayName="TableFooter";let c=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("tr",{ref:r,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));c.displayName="TableRow";let u=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("th",{ref:r,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));u.displayName="TableHead";let m=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("td",{ref:r,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));m.displayName="TableCell",a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("caption",{ref:r,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption"},6472:(e,t,r)=>{"use strict";r.d(t,{PDFViewer:()=>u});var s=r(60687),a=r(43210),n=r(29523),i=r(63503),l=r(36644),o=r(20620);let d=(0,r(82614).A)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var c=r(96834);function u({pdfData:e,trigger:t}){let[r,u]=(0,a.useState)(!1);return(0,s.jsxs)(i.lG,{open:r,onOpenChange:u,children:[(0,s.jsx)(i.zM,{asChild:!0,children:t||(0,s.jsxs)(n.$,{variant:"outline",size:"sm",className:"flex items-center gap-1",children:[(0,s.jsx)(l.A,{className:"h-4 w-4"}),"View PDF"]})}),(0,s.jsxs)(i.Cf,{className:"max-w-4xl max-h-[90vh] flex flex-col",children:[(0,s.jsxs)(i.c7,{children:[(0,s.jsxs)(i.L3,{className:"flex items-center gap-2",children:[(0,s.jsx)(l.A,{className:"h-5 w-5"}),e.fileName]}),(0,s.jsxs)(i.rr,{className:"flex items-center gap-4",children:[(0,s.jsxs)("span",{children:["Uploaded: ",new Date(e.uploadedAt).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})]}),(0,s.jsx)(c.E,{variant:"secondary",children:(e=>{let t=3*e.length/4;return t<1024?`${Math.round(t)} B`:t<1048576?`${Math.round(t/1024)} KB`:`${Math.round(t/1048576)} MB`})(e.base64Data)})]})]}),(0,s.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,s.jsxs)(n.$,{onClick:()=>{let t=document.createElement("a");t.href=e.url,t.download=e.fileName,document.body.appendChild(t),t.click(),document.body.removeChild(t)},variant:"outline",size:"sm",children:[(0,s.jsx)(o.A,{className:"h-4 w-4 mr-2"}),"Download"]}),(0,s.jsxs)(n.$,{onClick:()=>{let t=window.open();t&&(t.document.write(`
        <html>
          <head>
            <title>${e.fileName}</title>
            <style>
              body { margin: 0; padding: 0; }
              iframe { width: 100vw; height: 100vh; border: none; }
            </style>
          </head>
          <body>
            <iframe src="${e.url}" type="application/pdf"></iframe>
          </body>
        </html>
      `),t.document.close())},variant:"outline",size:"sm",children:[(0,s.jsx)(d,{className:"h-4 w-4 mr-2"}),"Open in New Tab"]})]}),(0,s.jsx)("div",{className:"flex-1 min-h-0",children:(0,s.jsx)("iframe",{src:e.url,className:"w-full h-full border rounded-md",title:e.fileName})})]})]})}},7252:e=>{"use strict";e.exports=require("express")},8547:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var s=r(37413),a=r(95448),n=r(78963),i=r(80401),l=r(72829),o=r(12835),d=r(30084),c=r(23469),u=r(15554),m=r(99959),p=r(87403);async function x(){let e=await (0,a.d$)(),t=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(e);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between space-y-2",children:[(0,s.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Products"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(o.ImportProductsDialog,{}),(0,s.jsx)(l.AddProductSheet,{})]})]}),(0,s.jsxs)(n.Zp,{children:[(0,s.jsxs)(n.aR,{children:[(0,s.jsx)(n.ZB,{children:"Your Products"}),(0,s.jsx)(n.BT,{children:"A list of all the products and services you offer."})]}),(0,s.jsxs)(n.Wu,{children:[(0,s.jsxs)(i.XI,{children:[(0,s.jsx)(i.A0,{children:(0,s.jsxs)(i.Hj,{children:[(0,s.jsx)(i.nd,{children:"Name"}),(0,s.jsx)(i.nd,{children:"Description"}),(0,s.jsx)(i.nd,{children:"SKUs"}),(0,s.jsx)(i.nd,{children:"Catalogue"}),(0,s.jsx)(i.nd,{className:"text-right",children:"Price"}),(0,s.jsx)(i.nd,{className:"text-right",children:"GST"}),(0,s.jsx)(i.nd,{className:"w-[50px]",children:"Actions"})]})}),(0,s.jsx)(i.BF,{children:e.map(e=>(0,s.jsxs)(i.Hj,{children:[(0,s.jsx)(i.nA,{className:"font-medium",children:e.name}),(0,s.jsx)(i.nA,{children:e.description}),(0,s.jsx)(i.nA,{children:(0,s.jsx)("div",{className:"flex flex-wrap gap-1",children:e.skus?.map(e=>(0,s.jsx)(d.E,{variant:"outline",children:e},e))})}),(0,s.jsx)(i.nA,{children:(0,s.jsx)("div",{className:"flex items-center gap-2",children:e.cataloguePdf?(0,s.jsx)(p.PDFViewer,{pdfData:e.cataloguePdf,trigger:(0,s.jsxs)(c.$,{variant:"outline",size:"sm",className:"flex items-center gap-1",children:[(0,s.jsx)(u.A,{className:"h-4 w-4"}),"View PDF"]})}):(0,s.jsx)("span",{className:"text-muted-foreground",children:"-"})})}),(0,s.jsx)(i.nA,{className:"text-right",children:t(e.price)}),(0,s.jsxs)(i.nA,{className:"text-right",children:[e.gstRate,"%"]}),(0,s.jsx)(i.nA,{children:(0,s.jsx)(m.ProductActions,{product:e})})]},e.id))})]}),0===e.length&&(0,s.jsx)("div",{className:"text-center py-10 text-muted-foreground",children:"You haven't added any products yet."})]})]})]})}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},10974:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var s=r(75986),a=r(8974);function n(...e){return(0,a.QP)((0,s.$)(e))}},12412:e=>{"use strict";e.exports=require("assert")},12835:(e,t,r)=>{"use strict";r.d(t,{ImportProductsDialog:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call ImportProductsDialog() from the server but ImportProductsDialog is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/gauravshukla/Downloads/ll/src/app/products/import-products-dialog.tsx","ImportProductsDialog")},13972:(e,t,r)=>{"use strict";r.d(t,{Lt:()=>E,Rx:()=>U,Zr:()=>_,EO:()=>z,$v:()=>T,ck:()=>V,wd:()=>I,r7:()=>O});var s=r(60687),a=r(43210),n=r(11273),i=r(98599),l=r(10991),o=r(70569);a.forwardRef((e,t)=>{let{children:r,...n}=e,i=a.Children.toArray(r),l=i.find(u);if(l){let e=l.props.children,r=i.map(t=>t!==l?t:a.Children.count(e)>1?a.Children.only(null):a.isValidElement(e)?e.props.children:null);return(0,s.jsx)(d,{...n,ref:t,children:a.isValidElement(e)?a.cloneElement(e,void 0,r):null})}return(0,s.jsx)(d,{...n,ref:t,children:r})}).displayName="Slot";var d=a.forwardRef((e,t)=>{let{children:r,...s}=e;if(a.isValidElement(r)){let e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(r=(t=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in t&&t.isReactWarning)?e.props.ref:e.props.ref||e.ref}(r),n=function(e,t){let r={...t};for(let s in t){let a=e[s],n=t[s];/^on[A-Z]/.test(s)?a&&n?r[s]=(...e)=>{n(...e),a(...e)}:a&&(r[s]=a):"style"===s?r[s]={...a,...n}:"className"===s&&(r[s]=[a,n].filter(Boolean).join(" "))}return{...e,...r}}(s,r.props);return r.type!==a.Fragment&&(n.ref=t?(0,i.t)(t,e):e),a.cloneElement(r,n)}return a.Children.count(r)>1?a.Children.only(null):null});d.displayName="SlotClone";var c=({children:e})=>(0,s.jsx)(s.Fragment,{children:e});function u(e){return a.isValidElement(e)&&e.type===c}var m="AlertDialog",[p,x]=(0,n.A)(m,[l.Hs]),f=(0,l.Hs)(),h=e=>{let{__scopeAlertDialog:t,...r}=e,a=f(t);return(0,s.jsx)(l.bL,{...a,...r,modal:!0})};h.displayName=m,a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,n=f(r);return(0,s.jsx)(l.l9,{...n,...a,ref:t})}).displayName="AlertDialogTrigger";var g=e=>{let{__scopeAlertDialog:t,...r}=e,a=f(t);return(0,s.jsx)(l.ZL,{...a,...r})};g.displayName="AlertDialogPortal";var v=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,n=f(r);return(0,s.jsx)(l.hJ,{...n,...a,ref:t})});v.displayName="AlertDialogOverlay";var j="AlertDialogContent",[b,y]=p(j),N=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,children:n,...d}=e,u=f(r),m=a.useRef(null),p=(0,i.s)(t,m),x=a.useRef(null);return(0,s.jsx)(l.G$,{contentName:j,titleName:w,docsSlug:"alert-dialog",children:(0,s.jsx)(b,{scope:r,cancelRef:x,children:(0,s.jsxs)(l.UC,{role:"alertdialog",...u,...d,ref:p,onOpenAutoFocus:(0,o.m)(d.onOpenAutoFocus,e=>{e.preventDefault(),x.current?.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,s.jsx)(c,{children:n}),(0,s.jsx)(S,{contentRef:m})]})})})});N.displayName=j;var w="AlertDialogTitle",P=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,n=f(r);return(0,s.jsx)(l.hE,{...n,...a,ref:t})});P.displayName=w;var A="AlertDialogDescription",R=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,n=f(r);return(0,s.jsx)(l.VY,{...n,...a,ref:t})});R.displayName=A;var k=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,n=f(r);return(0,s.jsx)(l.bm,{...n,...a,ref:t})});k.displayName="AlertDialogAction";var C="AlertDialogCancel",D=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,{cancelRef:n}=y(C,r),o=f(r),d=(0,i.s)(t,n);return(0,s.jsx)(l.bm,{...o,...a,ref:d})});D.displayName=C;var S=({contentRef:e})=>{let t=`\`${j}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${j}\` by passing a \`${A}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${j}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return a.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},F=r(4780),q=r(29523);let E=h,$=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(v,{className:(0,F.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));$.displayName=v.displayName;let z=a.forwardRef(({className:e,...t},r)=>(0,s.jsxs)(g,{children:[(0,s.jsx)($,{}),(0,s.jsx)(N,{ref:r,className:(0,F.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));z.displayName=N.displayName;let I=({className:e,...t})=>(0,s.jsx)("div",{className:(0,F.cn)("flex flex-col space-y-2 text-center sm:text-left",e),...t});I.displayName="AlertDialogHeader";let V=({className:e,...t})=>(0,s.jsx)("div",{className:(0,F.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});V.displayName="AlertDialogFooter";let O=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(P,{ref:r,className:(0,F.cn)("text-lg font-semibold",e),...t}));O.displayName=P.displayName;let T=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(R,{ref:r,className:(0,F.cn)("text-sm text-muted-foreground",e),...t}));T.displayName=R.displayName;let U=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(k,{ref:r,className:(0,F.cn)((0,q.r)(),e),...t}));U.displayName=k.displayName;let _=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(D,{ref:r,className:(0,F.cn)((0,q.r)({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));_.displayName=D.displayName},15554:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(3515).A)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},16141:e=>{"use strict";e.exports=require("node:zlib")},16698:e=>{"use strict";e.exports=require("node:async_hooks")},19063:e=>{"use strict";e.exports=require("require-in-the-middle")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19185:e=>{"use strict";e.exports=require("dgram")},19771:e=>{"use strict";e.exports=require("process")},20620:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(82614).A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},21820:e=>{"use strict";e.exports=require("os")},23469:(e,t,r)=>{"use strict";r.d(t,{$:()=>d});var s=r(37413),a=r(61120),n=r(39724),i=r(50662),l=r(10974);let o=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef(({className:e,variant:t,size:r,asChild:a=!1,...i},d)=>{let c=a?n.DX:"button";return(0,s.jsx)(c,{className:(0,l.cn)(o({variant:t,size:r,className:e})),ref:d,...i})});d.displayName="Button"},27910:e=>{"use strict";e.exports=require("stream")},28008:(e,t,r)=>{"use strict";async function s(e,t="catalogs"){if("application/pdf"!==e.type)throw Error("Only PDF files are allowed");if(e.size>5242880)throw Error("File size must be less than 5MB for Base64 storage");let r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){let t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),a=`${t}/${r}`;try{var n;let t=await (n=e,new Promise((e,t)=>{let r=new FileReader;r.readAsDataURL(n),r.onload=()=>{e(r.result.split(",")[1])},r.onerror=e=>t(e)}));return{url:`data:application/pdf;base64,${t}`,path:a,fileName:e.name,base64Data:t}}catch(e){throw console.error("Error converting PDF to Base64:",e),Error("Failed to process PDF file")}}async function a(e){console.log(`PDF with path ${e} will be deleted when the document is updated`)}function n(e){return"application/pdf"!==e.type?{isValid:!1,error:"Only PDF files are allowed"}:e.size>5242880?{isValid:!1,error:"File size must be less than 5MB for Base64 storage"}:e.name.length>100?{isValid:!1,error:"File name is too long"}:{isValid:!0}}r.d(t,{Fq:()=>n,GP:()=>s,W0:()=>a})},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30084:(e,t,r)=>{"use strict";r.d(t,{E:()=>l});var s=r(37413);r(61120);var a=r(50662),n=r(10974);let i=(0,a.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l({className:e,variant:t,...r}){return(0,s.jsx)("div",{className:(0,n.cn)(i({variant:t}),e),...r})}},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},37067:e=>{"use strict";e.exports=require("node:http")},37366:e=>{"use strict";e.exports=require("dns")},37830:e=>{"use strict";e.exports=require("node:stream/web")},38411:(e,t,r)=>{"use strict";r.d(t,{ImportProductsDialog:()=>R});var s=r(60687),a=r(29523),n=r(43210),i=r(63503),l=r(89667),o=r(80013),d=r(91821),c=r(46657),u=r(6211),m=r(6110),p=r(20620),x=r(36644),f=r(72963),h=r(11516),g=r(3662),v=r(96834);function j(e){let t=[],r="",s=!1,a=0;for(;a<e.length;){let n=e[a];'"'===n?s&&'"'===e[a+1]?(r+='"',a+=2):(s=!s,a++):(","!==n||s?r+=n:(t.push(r.trim()),r=""),a++)}return t.push(r.trim()),t}function b({title:e,description:t,expectedColumns:r,requiredColumns:b=r,sampleData:y,onImport:N,children:w}){let[P,A]=(0,n.useState)(!1),[R,k]=(0,n.useState)(null),[C,D]=(0,n.useState)([]),[S,F]=(0,n.useState)([]),[q,E]=(0,n.useState)(!1),[$,z]=(0,n.useState)(0),[I,V]=(0,n.useState)(null),O=(0,n.useRef)(null),T=e=>{let t=[];return e.forEach((e,r)=>{b.forEach(s=>{e[s]&&""!==e[s].trim()||t.push({row:r+1,field:s,message:`${s} is required`})}),e.price&&isNaN(Number(e.price))&&t.push({row:r+1,field:"price",message:"Price must be a valid number"}),e.gstRate&&(isNaN(Number(e.gstRate))||0>Number(e.gstRate)||Number(e.gstRate)>100)&&t.push({row:r+1,field:"gstRate",message:"GST Rate must be a number between 0 and 100"})}),t},U=async()=>{if(S.length>0)return void alert("Please fix validation errors before importing");E(!0),z(0);try{let e=setInterval(()=>{z(e=>Math.min(e+10,90))},100),t=await N(C);clearInterval(e),z(100),V(t),t.success&&setTimeout(()=>{A(!1),_()},2e3)}catch(e){V({success:!1,message:"Import failed due to an unexpected error"})}finally{E(!1)}},_=()=>{k(null),D([]),F([]),E(!1),z(0),V(null),O.current&&(O.current.value="")};return(0,s.jsxs)(i.lG,{open:P,onOpenChange:A,children:[(0,s.jsx)(i.zM,{asChild:!0,children:w}),(0,s.jsxs)(i.Cf,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[(0,s.jsxs)(i.c7,{children:[(0,s.jsxs)(i.L3,{className:"flex items-center gap-2",children:[(0,s.jsx)(m.A,{className:"h-5 w-5"}),e]}),(0,s.jsx)(i.rr,{children:t})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(o.J,{htmlFor:"csv-file",children:"Select CSV File"}),(0,s.jsxs)(a.$,{variant:"outline",size:"sm",onClick:()=>{let e=function(e,t){let r=e.join(","),s=e.map(e=>{let r=t[e]||"";return r.includes(",")||r.includes('"')||r.includes("\n")?`"${r.replace(/"/g,'""')}"`:r}).join(",");return`${r}
${s}`}(r,y),t=new Blob([e],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a");if(void 0!==s.download){let e=URL.createObjectURL(t);s.setAttribute("href",e),s.setAttribute("download","sample_products_import.csv"),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(e)}},className:"flex items-center gap-2",children:[(0,s.jsx)(p.A,{className:"h-4 w-4"}),"Download Sample"]})]}),(0,s.jsx)(l.p,{id:"csv-file",type:"file",accept:".csv",onChange:e=>{let t=e.target.files?.[0];if(!t)return;if(!t.name.endsWith(".csv"))return void alert("Please select a CSV file");k(t),V(null);let r=new FileReader;r.onload=e=>{let t=function(e){let t=e.split("\n").filter(e=>e.trim());if(t.length<2)return[];let r=j(t[0]),s=[];for(let e=1;e<t.length;e++){let a=j(t[e]),n={};r.forEach((e,t)=>{n[e]=a[t]||""}),s.push(n)}return s}(e.target?.result);D(t),F(T(t))},r.readAsText(t)},ref:O,disabled:q}),R&&(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,s.jsx)(x.A,{className:"h-4 w-4"}),R.name," (",C.length," rows)"]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(o.J,{children:"Expected CSV Format"}),(0,s.jsxs)("div",{className:"text-sm text-muted-foreground space-y-1",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Required columns:"})," ",b.join(", ")]}),r.filter(e=>!b.includes(e)).length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Optional columns:"})," ",r.filter(e=>!b.includes(e)).join(", ")]})]})]}),S.length>0&&(0,s.jsxs)(d.Fc,{variant:"destructive",children:[(0,s.jsx)(f.A,{className:"h-4 w-4"}),(0,s.jsx)(d.TN,{children:(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"font-medium",children:["Validation Errors (",S.length,"):"]}),(0,s.jsxs)("div",{className:"max-h-32 overflow-y-auto space-y-1",children:[S.slice(0,10).map((e,t)=>(0,s.jsxs)("div",{className:"text-xs",children:["Row ",e.row,": ",e.field," - ",e.message]},t)),S.length>10&&(0,s.jsxs)("div",{className:"text-xs",children:["... and ",S.length-10," more errors"]})]})]})})]}),q&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(h.A,{className:"h-4 w-4 animate-spin"}),(0,s.jsx)("span",{className:"text-sm",children:"Importing data..."})]}),(0,s.jsx)(c.k,{value:$,className:"w-full"})]}),I&&(0,s.jsxs)(d.Fc,{variant:I.success?"default":"destructive",children:[I.success?(0,s.jsx)(g.A,{className:"h-4 w-4"}):(0,s.jsx)(f.A,{className:"h-4 w-4"}),(0,s.jsx)(d.TN,{children:(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("div",{children:I.message}),I.errors&&I.errors.length>0&&(0,s.jsx)("div",{className:"text-xs space-y-1",children:I.errors.map((e,t)=>(0,s.jsxs)("div",{children:["• ",e]},t))})]})})]}),C.length>0&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(o.J,{children:["Data Preview (",C.length," rows)"]}),(0,s.jsxs)("div",{className:"border rounded-md max-h-64 overflow-auto",children:[(0,s.jsxs)(u.XI,{children:[(0,s.jsx)(u.A0,{children:(0,s.jsxs)(u.Hj,{children:[r.map(e=>(0,s.jsx)(u.nd,{children:e},e)),(0,s.jsx)(u.nd,{children:"Status"})]})}),(0,s.jsx)(u.BF,{children:C.slice(0,10).map((e,t)=>{let a=S.filter(e=>e.row===t+1);return(0,s.jsxs)(u.Hj,{children:[r.map(t=>(0,s.jsx)(u.nA,{className:"max-w-32 truncate",children:e[t]},t)),(0,s.jsx)(u.nA,{children:a.length>0?(0,s.jsxs)(v.E,{variant:"destructive",children:[a.length," error",a.length>1?"s":""]}):(0,s.jsx)(v.E,{variant:"secondary",children:"Valid"})})]},t)})})]}),C.length>10&&(0,s.jsxs)("div",{className:"p-2 text-center text-sm text-muted-foreground border-t",children:["... and ",C.length-10," more rows"]})]})]})]}),(0,s.jsxs)(i.Es,{children:[(0,s.jsx)(a.$,{variant:"outline",onClick:()=>A(!1),disabled:q,children:"Cancel"}),(0,s.jsx)(a.$,{onClick:U,disabled:!R||0===C.length||S.length>0||q,children:q?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Importing..."]}):`Import ${C.length} Products`})]})]})]})}var y=r(6475);let N=(0,y.createServerReference)("406e0669bbe62ae44f500cbad9424ccf3e9217e6ec",y.callServer,void 0,y.findSourceMapURL,"importProductsFromCSV"),w=["name","description","price","gstRate","skus"],P=["name","description","price","gstRate"],A={name:"Premium Widget",description:"High-quality widget for professional use with advanced features",price:"1500.00",gstRate:"18",skus:"WID-001,WID-002,WID-003"};function R(){let e=async e=>{try{return await N(e)}catch(e){return{success:!1,message:"Import failed due to an unexpected error",errors:[e instanceof Error?e.message:"Unknown error"]}}};return(0,s.jsx)(b,{title:"Import Products from CSV",description:"Upload a CSV file to import multiple products at once. Make sure your CSV follows the expected format.",expectedColumns:w,requiredColumns:P,sampleData:A,onImport:e,children:(0,s.jsxs)(a.$,{variant:"outline",className:"flex items-center gap-2",children:[(0,s.jsx)(m.A,{className:"h-4 w-4"}),"Import CSV"]})})}},39724:(e,t,r)=>{"use strict";r.d(t,{DX:()=>i});var s=r(61120);function a(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}var n=r(37413),i=function(e){let t=function(e){let t=s.forwardRef((e,t)=>{let{children:r,...n}=e;if(s.isValidElement(r)){var i;let e,l,o=(i=r,(l=(e=Object.getOwnPropertyDescriptor(i.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?i.ref:(l=(e=Object.getOwnPropertyDescriptor(i,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?i.props.ref:i.props.ref||i.ref),d=function(e,t){let r={...t};for(let s in t){let a=e[s],n=t[s];/^on[A-Z]/.test(s)?a&&n?r[s]=(...e)=>{let t=n(...e);return a(...e),t}:a&&(r[s]=a):"style"===s?r[s]={...a,...n}:"className"===s&&(r[s]=[a,n].filter(Boolean).join(" "))}return{...e,...r}}(n,r.props);return r.type!==s.Fragment&&(d.ref=t?function(...e){return t=>{let r=!1,s=e.map(e=>{let s=a(e,t);return r||"function"!=typeof s||(r=!0),s});if(r)return()=>{for(let t=0;t<s.length;t++){let r=s[t];"function"==typeof r?r():a(e[t],null)}}}}(t,o):o),s.cloneElement(r,d)}return s.Children.count(r)>1?s.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),r=s.forwardRef((e,r)=>{let{children:a,...i}=e,l=s.Children.toArray(a),d=l.find(o);if(d){let e=d.props.children,a=l.map(t=>t!==d?t:s.Children.count(e)>1?s.Children.only(null):s.isValidElement(e)?e.props.children:null);return(0,n.jsx)(t,{...i,ref:r,children:s.isValidElement(e)?s.cloneElement(e,void 0,a):null})}return(0,n.jsx)(t,{...i,ref:r,children:a})});return r.displayName=`${e}.Slot`,r}("Slot"),l=Symbol("radix.slottable");function o(e){return s.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===l}},42207:(e,t,r)=>{"use strict";r.d(t,{ProductActions:()=>D});var s=r(60687),a=r(43210),n=r(69795),i=r(76311),l=r(35137),o=r(57207),d=r(29523),c=r(21342),u=r(27605),m=r(63442),p=r(45880),x=r(78726),f=r(67146),h=r(89667),g=r(80013),v=r(34729),j=r(6475);let b=(0,j.createServerReference)("602b1399f6f572dfb631213aaad4ca45fdc279eb48",j.callServer,void 0,j.findSourceMapURL,"updateProduct");var y=r(29867),N=r(96834),w=r(96786);let P=p.z.object({name:p.z.string().min(3,{message:"Product name must be at least 3 characters."}),description:p.z.string().min(10,{message:"Description must be at least 10 characters."}),price:p.z.coerce.number().min(0,{message:"Price must be a positive number."}),gstRate:p.z.coerce.number().min(0,{message:"GST rate must be a positive number."}).max(100,{message:"GST rate cannot exceed 100."}),skus:p.z.array(p.z.object({value:p.z.string().min(1,"SKU cannot be empty.")})).optional()});function A({product:e,open:t,onOpenChange:r}){let[n,i]=(0,a.useState)(""),[l,o]=(0,a.useState)(null),[c,p]=(0,a.useState)(""),{toast:j}=(0,y.dj)(),{register:A,handleSubmit:R,reset:k,control:C,formState:{errors:D,isSubmitting:S}}=(0,u.mN)({resolver:(0,m.u)(P)}),{fields:F,append:q,remove:E}=(0,u.jz)({control:C,name:"skus"}),$=async t=>{let s=new FormData;if(Object.entries(t).forEach(([e,t])=>{"skus"===e?s.append(e,JSON.stringify(t.map(e=>e.value))):null!=t&&s.append(e,String(t))}),l&&s.append("catalogPdf",JSON.stringify({url:l.url,fileName:l.fileName,filePath:l.path,uploadedAt:new Date().toISOString(),base64Data:l.base64Data})),!e.id)return void j({variant:"destructive",title:"Error",description:"Product ID is missing"});let a=await b(e.id,s);"Successfully updated product."===a.message?(j({title:"Product Updated",description:`"${t.name}" has been successfully updated.`}),r(!1)):j({variant:"destructive",title:"Error",description:a.message})};return(0,s.jsx)(f.cj,{open:t,onOpenChange:r,children:(0,s.jsxs)(f.h,{className:"sm:max-w-xl",children:[(0,s.jsxs)(f.Fm,{children:[(0,s.jsx)(f.qp,{children:"Edit Product"}),(0,s.jsx)(f.Qs,{children:"Update the details for this product or service."})]}),(0,s.jsxs)("form",{onSubmit:R($),className:"space-y-4 py-6 max-h-[90vh] overflow-y-auto pr-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(g.J,{htmlFor:"name",children:"Product Name"}),(0,s.jsx)(h.p,{id:"name",...A("name"),className:D.name?"border-destructive":""}),D.name&&(0,s.jsx)("p",{className:"text-xs text-destructive mt-1",children:D.name.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(g.J,{htmlFor:"description",children:"Description"}),(0,s.jsx)(v.T,{id:"description",...A("description"),className:D.description?"border-destructive":""}),D.description&&(0,s.jsx)("p",{className:"text-xs text-destructive mt-1",children:D.description.message})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(g.J,{htmlFor:"price",children:"Price (₹)"}),(0,s.jsx)(h.p,{id:"price",type:"number",step:"0.01",...A("price"),className:D.price?"border-destructive":""}),D.price&&(0,s.jsx)("p",{className:"text-xs text-destructive mt-1",children:D.price.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(g.J,{htmlFor:"gstRate",children:"GST Rate (%)"}),(0,s.jsx)(h.p,{id:"gstRate",type:"number",step:"0.01",...A("gstRate"),className:D.gstRate?"border-destructive":""}),D.gstRate&&(0,s.jsx)("p",{className:"text-xs text-destructive mt-1",children:D.gstRate.message})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(w.S,{onUploadComplete:e=>{o(e),p("")},onUploadError:e=>{p(e),o(null)},currentPdf:l||(e.cataloguePdf?{url:e.cataloguePdf.url,fileName:e.cataloguePdf.fileName,filePath:e.cataloguePdf.filePath,base64Data:e.cataloguePdf.base64Data}:null),onRemove:()=>{o(null),p("")},label:"Catalog PDF",description:"Upload a PDF catalog file (max 5MB)"}),c&&(0,s.jsx)("p",{className:"text-xs text-destructive mt-1",children:c})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(g.J,{children:"SKUs"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(h.p,{value:n,onChange:e=>i(e.target.value),placeholder:"Enter SKU and press Add"}),(0,s.jsx)(d.$,{type:"button",variant:"outline",onClick:()=>{""!==n.trim()&&(q({value:n.trim()}),i(""))},children:"Add"})]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2 pt-2",children:F.map((e,t)=>(0,s.jsxs)(N.E,{variant:"secondary",children:[e.value,(0,s.jsx)("button",{type:"button",className:"ml-2 rounded-full outline-none ring-offset-background focus:ring-2 focus:ring-ring focus:ring-offset-2",onClick:()=>E(t),children:(0,s.jsx)(x.A,{className:"h-3 w-3 text-muted-foreground hover:text-foreground"})})]},e.id))}),D.skus&&(0,s.jsx)("p",{className:"text-xs text-destructive mt-1",children:D.skus.message})]}),(0,s.jsx)(f.XW,{className:"pt-4 sticky bottom-0 bg-background",children:(0,s.jsx)(d.$,{type:"submit",disabled:S,className:"w-full",children:S?"Saving Changes...":"Save Changes"})})]})]})})}var R=r(13972);let k=(0,j.createServerReference)("404871414a026e05b23033b1171a17f1fd9e8fd1a4",j.callServer,void 0,j.findSourceMapURL,"deleteProduct");function C({product:e,open:t,onOpenChange:r}){let[n,i]=(0,a.useState)(!1),{toast:l}=(0,y.dj)(),o=async()=>{if(!e.id)return void l({variant:"destructive",title:"Error",description:"Product ID is missing"});i(!0);let t=await k(e.id);"Successfully deleted product."===t.message?(l({title:"Product Deleted",description:`"${e.name}" has been deleted.`}),r(!1)):l({variant:"destructive",title:"Error",description:t.message}),i(!1)};return(0,s.jsx)(R.Lt,{open:t,onOpenChange:r,children:(0,s.jsxs)(R.EO,{children:[(0,s.jsxs)(R.wd,{children:[(0,s.jsx)(R.r7,{children:"Are you sure?"}),(0,s.jsxs)(R.$v,{children:["This action cannot be undone. This will permanently delete the product",(0,s.jsxs)("span",{className:"font-semibold",children:[" ",e.name]}),"."]})]}),(0,s.jsxs)(R.ck,{children:[(0,s.jsx)(R.Zr,{disabled:n,children:"Cancel"}),(0,s.jsx)(R.Rx,{asChild:!0,children:(0,s.jsx)(d.$,{variant:"destructive",onClick:o,disabled:n,children:n?"Deleting...":"Delete"})})]})]})})}function D({product:e}){let[t,r]=(0,a.useState)(!1),[u,m]=(0,a.useState)(!1);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(A,{product:e,open:t,onOpenChange:r}),(0,s.jsx)(C,{product:e,open:u,onOpenChange:m}),(0,s.jsxs)(c.rI,{children:[(0,s.jsx)(c.ty,{asChild:!0,children:(0,s.jsxs)(d.$,{variant:"ghost",className:"h-8 w-8 p-0",children:[(0,s.jsx)("span",{className:"sr-only",children:"Open menu"}),(0,s.jsx)(n.A,{className:"h-4 w-4"})]})}),(0,s.jsxs)(c.SQ,{align:"end",children:[(0,s.jsx)(c.lp,{children:"Actions"}),(0,s.jsx)(c.mB,{}),(0,s.jsxs)(c._2,{onSelect:()=>r(!0),children:[(0,s.jsx)(i.A,{className:"mr-2 h-4 w-4"}),"View"]}),(0,s.jsxs)(c._2,{onSelect:()=>r(!0),children:[(0,s.jsx)(l.A,{className:"mr-2 h-4 w-4"}),"Edit"]}),(0,s.jsxs)(c._2,{onSelect:()=>m(!0),className:"text-destructive focus:bg-destructive/10 focus:text-destructive",children:[(0,s.jsx)(o.A,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]})}},43255:(e,t,r)=>{Promise.resolve().then(r.bind(r,71799)),Promise.resolve().then(r.bind(r,38411)),Promise.resolve().then(r.bind(r,42207)),Promise.resolve().then(r.bind(r,6472))},44708:e=>{"use strict";e.exports=require("node:https")},46657:(e,t,r)=>{"use strict";r.d(t,{k:()=>y});var s=r(60687),a=r(43210),n=r(11273),i=r(3416),l="Progress",[o,d]=(0,n.A)(l),[c,u]=o(l),m=a.forwardRef((e,t)=>{var r,a;let{__scopeProgress:n,value:l=null,max:o,getValueLabel:d=f,...u}=e;(o||0===o)&&!v(o)&&console.error((r=`${o}`,`Invalid prop \`max\` of value \`${r}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let m=v(o)?o:100;null===l||j(l,m)||console.error((a=`${l}`,`Invalid prop \`value\` of value \`${a}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let p=j(l,m)?l:null,x=g(p)?d(p,m):void 0;return(0,s.jsx)(c,{scope:n,value:p,max:m,children:(0,s.jsx)(i.sG.div,{"aria-valuemax":m,"aria-valuemin":0,"aria-valuenow":g(p)?p:void 0,"aria-valuetext":x,role:"progressbar","data-state":h(p,m),"data-value":p??void 0,"data-max":m,...u,ref:t})})});m.displayName=l;var p="ProgressIndicator",x=a.forwardRef((e,t)=>{let{__scopeProgress:r,...a}=e,n=u(p,r);return(0,s.jsx)(i.sG.div,{"data-state":h(n.value,n.max),"data-value":n.value??void 0,"data-max":n.max,...a,ref:t})});function f(e,t){return`${Math.round(e/t*100)}%`}function h(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function g(e){return"number"==typeof e}function v(e){return g(e)&&!isNaN(e)&&e>0}function j(e,t){return g(e)&&!isNaN(e)&&e<=t&&e>=0}x.displayName=p;var b=r(4780);let y=a.forwardRef(({className:e,value:t,...r},a)=>(0,s.jsx)(m,{ref:a,className:(0,b.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...r,children:(0,s.jsx)(x,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));y.displayName=m.displayName},48831:(e,t,r)=>{Promise.resolve().then(r.bind(r,72829)),Promise.resolve().then(r.bind(r,12835)),Promise.resolve().then(r.bind(r,99959)),Promise.resolve().then(r.bind(r,87403))},50662:(e,t,r)=>{"use strict";r.d(t,{F:()=>i});var s=r(75986);let a=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,n=s.$,i=(e,t)=>r=>{var s;if((null==t?void 0:t.variants)==null)return n(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:i,defaultVariants:l}=t,o=Object.keys(i).map(e=>{let t=null==r?void 0:r[e],s=null==l?void 0:l[e];if(null===t)return null;let n=a(t)||a(s);return i[e][n]}),d=r&&Object.entries(r).reduce((e,t)=>{let[r,s]=t;return void 0===s||(e[r]=s),e},{});return n(e,o,null==t||null==(s=t.compoundVariants)?void 0:s.reduce((e,t)=>{let{class:r,className:s,...a}=t;return Object.entries(a).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...l,...d}[t]):({...l,...d})[t]===r})?[...e,r,s]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)}},54379:e=>{"use strict";e.exports=require("node:path")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},56801:e=>{"use strict";e.exports=require("import-in-the-middle")},57075:e=>{"use strict";e.exports=require("node:stream")},57975:e=>{"use strict";e.exports=require("node:util")},61252:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d});var s=r(65239),a=r(48088),n=r(88170),i=r.n(n),l=r(30893),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let d={children:["",{children:["products",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,8547)),"/Users/gauravshukla/Downloads/ll/src/app/products/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"/Users/gauravshukla/Downloads/ll/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/Users/gauravshukla/Downloads/ll/src/app/products/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/products/page",pathname:"/products",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63503:(e,t,r)=>{"use strict";r.d(t,{Cf:()=>m,Es:()=>x,L3:()=>f,c7:()=>p,lG:()=>o,rr:()=>h,zM:()=>d});var s=r(60687),a=r(43210),n=r(10991),i=r(78726),l=r(4780);let o=n.bL,d=n.l9,c=n.ZL;n.bm;let u=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(n.hJ,{ref:r,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));u.displayName=n.hJ.displayName;let m=a.forwardRef(({className:e,children:t,...r},a)=>(0,s.jsxs)(c,{children:[(0,s.jsx)(u,{}),(0,s.jsxs)(n.UC,{ref:a,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,(0,s.jsxs)(n.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(i.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));m.displayName=n.UC.displayName;let p=({className:e,...t})=>(0,s.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});p.displayName="DialogHeader";let x=({className:e,...t})=>(0,s.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});x.displayName="DialogFooter";let f=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(n.hE,{ref:r,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",e),...t}));f.displayName=n.hE.displayName;let h=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(n.VY,{ref:r,className:(0,l.cn)("text-sm text-muted-foreground",e),...t}));h.displayName=n.VY.displayName},71799:(e,t,r)=>{"use strict";r.d(t,{AddProductSheet:()=>N});var s=r(60687),a=r(43210),n=r(27605),i=r(63442),l=r(45880),o=r(35265),d=r(78726),c=r(29523),u=r(67146),m=r(89667),p=r(80013),x=r(34729),f=r(6475);let h=(0,f.createServerReference)("408878a939989412aeb91bf151557cf8bc5c306f14",f.callServer,void 0,f.findSourceMapURL,"addProduct");var g=r(29867),v=r(96834),j=r(96786),b=r(28008);let y=l.z.object({name:l.z.string().min(3,{message:"Product name must be at least 3 characters."}),description:l.z.string().min(10,{message:"Description must be at least 10 characters."}),price:l.z.coerce.number().min(0,{message:"Price must be a positive number."}),gstRate:l.z.coerce.number().min(0,{message:"GST rate must be a positive number."}).max(100,{message:"GST rate cannot exceed 100."}),skus:l.z.array(l.z.object({value:l.z.string().min(1,"SKU cannot be empty.")})).optional()});function N(){let[e,t]=(0,a.useState)(!1),[r,l]=(0,a.useState)(""),[f,N]=(0,a.useState)(null),[w,P]=(0,a.useState)(""),{toast:A}=(0,g.dj)(),{register:R,handleSubmit:k,reset:C,control:D,formState:{errors:S,isSubmitting:F}}=(0,n.mN)({resolver:(0,i.u)(y),defaultValues:{skus:[]}}),{fields:q,append:E,remove:$}=(0,n.jz)({control:D,name:"skus"}),z=async e=>{let r=new FormData;Object.entries(e).forEach(([e,t])=>{"skus"===e?r.append(e,JSON.stringify(t.map(e=>e.value))):t&&r.append(e,String(t))}),f&&r.append("catalogPdf",JSON.stringify({url:f.url,fileName:f.fileName,filePath:f.path,uploadedAt:new Date().toISOString(),base64Data:f.base64Data}));let s=await h(r);if("Successfully added product."===s.message)A({title:"Product Added",description:`"${e.name}" has been successfully added.`}),C(),N(null),P(""),t(!1);else{if(f)try{await (0,b.W0)(f.path)}catch(e){console.error("Failed to cleanup uploaded PDF:",e)}A({variant:"destructive",title:"Error",description:s.message})}};return(0,s.jsxs)(u.cj,{open:e,onOpenChange:t,children:[(0,s.jsx)(u.CG,{asChild:!0,children:(0,s.jsxs)(c.$,{children:[(0,s.jsx)(o.A,{className:"mr-2 h-4 w-4"}),"Add Product"]})}),(0,s.jsxs)(u.h,{className:"sm:max-w-xl",children:[(0,s.jsxs)(u.Fm,{children:[(0,s.jsx)(u.qp,{children:"Add a New Product"}),(0,s.jsx)(u.Qs,{children:"Fill in the details below to add a new product or service."})]}),(0,s.jsxs)("form",{onSubmit:k(z),className:"space-y-4 py-6 max-h-[90vh] overflow-y-auto pr-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(p.J,{htmlFor:"name",children:"Product Name"}),(0,s.jsx)(m.p,{id:"name",...R("name"),className:S.name?"border-destructive":""}),S.name&&(0,s.jsx)("p",{className:"text-xs text-destructive mt-1",children:S.name.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(p.J,{htmlFor:"description",children:"Description"}),(0,s.jsx)(x.T,{id:"description",...R("description"),className:S.description?"border-destructive":""}),S.description&&(0,s.jsx)("p",{className:"text-xs text-destructive mt-1",children:S.description.message})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(p.J,{htmlFor:"price",children:"Price (₹)"}),(0,s.jsx)(m.p,{id:"price",type:"number",step:"0.01",...R("price"),className:S.price?"border-destructive":""}),S.price&&(0,s.jsx)("p",{className:"text-xs text-destructive mt-1",children:S.price.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(p.J,{htmlFor:"gstRate",children:"GST Rate (%)"}),(0,s.jsx)(m.p,{id:"gstRate",type:"number",step:"0.01",...R("gstRate"),className:S.gstRate?"border-destructive":""}),S.gstRate&&(0,s.jsx)("p",{className:"text-xs text-destructive mt-1",children:S.gstRate.message})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(j.S,{onUploadComplete:e=>{N(e),P("")},onUploadError:e=>{P(e),N(null)},currentPdf:f?{url:f.url,fileName:f.fileName,filePath:f.path}:null,onRemove:async()=>{if(f)try{await (0,b.W0)(f.path),N(null),P("")}catch(e){P("Failed to remove PDF")}},label:"Catalog PDF",description:"Upload product catalog (max 10MB)"}),w&&(0,s.jsx)("p",{className:"text-xs text-destructive mt-1",children:w})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.J,{children:"SKUs"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(m.p,{value:r,onChange:e=>l(e.target.value),placeholder:"Enter SKU and press Add"}),(0,s.jsx)(c.$,{type:"button",variant:"outline",onClick:()=>{""!==r.trim()&&(E({value:r.trim()}),l(""))},children:"Add"})]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2 pt-2",children:q.map((e,t)=>(0,s.jsxs)(v.E,{variant:"secondary",children:[e.value,(0,s.jsx)("button",{type:"button",className:"ml-2 rounded-full outline-none ring-offset-background focus:ring-2 focus:ring-ring focus:ring-offset-2",onClick:()=>$(t),children:(0,s.jsx)(d.A,{className:"h-3 w-3 text-muted-foreground hover:text-foreground"})})]},e.id))}),S.skus&&(0,s.jsx)("p",{className:"text-xs text-destructive mt-1",children:S.skus.message})]}),(0,s.jsx)(u.XW,{className:"pt-4 sticky bottom-0 bg-background",children:(0,s.jsx)(c.$,{type:"submit",disabled:F,className:"w-full",children:F?"Adding Product...":"Add Product"})})]})]})]})}},72829:(e,t,r)=>{"use strict";r.d(t,{AddProductSheet:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call AddProductSheet() from the server but AddProductSheet is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/gauravshukla/Downloads/ll/src/app/products/add-product-sheet.tsx","AddProductSheet")},73024:e=>{"use strict";e.exports=require("node:fs")},73136:e=>{"use strict";e.exports=require("node:url")},73496:e=>{"use strict";e.exports=require("http2")},73566:e=>{"use strict";e.exports=require("worker_threads")},74075:e=>{"use strict";e.exports=require("zlib")},74998:e=>{"use strict";e.exports=require("perf_hooks")},76311:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(82614).A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},77030:e=>{"use strict";e.exports=require("node:net")},77598:e=>{"use strict";e.exports=require("node:crypto")},78963:(e,t,r)=>{"use strict";r.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>i,aR:()=>l,wL:()=>u});var s=r(37413),a=r(61120),n=r(10974);let i=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));i.displayName="Card";let l=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...t}));l.displayName="CardHeader";let o=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("h3",{ref:r,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));o.displayName="CardTitle";let d=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("p",{ref:r,className:(0,n.cn)("text-sm text-muted-foreground",e),...t}));d.displayName="CardDescription";let c=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,n.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent";let u=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,n.cn)("flex items-center p-6 pt-0",e),...t}));u.displayName="CardFooter"},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},79646:e=>{"use strict";e.exports=require("child_process")},79748:e=>{"use strict";e.exports=require("fs/promises")},80401:(e,t,r)=>{"use strict";r.d(t,{A0:()=>l,BF:()=>o,Gg:()=>d,Hj:()=>c,XI:()=>i,nA:()=>m,nd:()=>u});var s=r(37413),a=r(61120),n=r(10974);let i=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:r,className:(0,n.cn)("w-full caption-bottom text-sm",e),...t})}));i.displayName="Table";let l=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("thead",{ref:r,className:(0,n.cn)("[&_tr]:border-b",e),...t}));l.displayName="TableHeader";let o=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("tbody",{ref:r,className:(0,n.cn)("[&_tr:last-child]:border-0",e),...t}));o.displayName="TableBody";let d=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("tfoot",{ref:r,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));d.displayName="TableFooter";let c=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("tr",{ref:r,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));c.displayName="TableRow";let u=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("th",{ref:r,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));u.displayName="TableHead";let m=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("td",{ref:r,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));m.displayName="TableCell",a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("caption",{ref:r,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption"},81630:e=>{"use strict";e.exports=require("http")},84297:e=>{"use strict";e.exports=require("async_hooks")},87403:(e,t,r)=>{"use strict";r.d(t,{PDFViewer:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call PDFViewer() from the server but PDFViewer is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/gauravshukla/Downloads/ll/src/components/pdf-viewer.tsx","PDFViewer")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},96786:(e,t,r)=>{"use strict";r.d(t,{S:()=>p});var s=r(60687),a=r(43210),n=r(29523),i=r(80013),l=r(46657),o=r(3662);let d=(0,r(82614).A)("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);var c=r(78726),u=r(6110),m=r(28008);function p({onUploadComplete:e,onUploadError:t,currentPdf:r,onRemove:p,disabled:x=!1,label:f="Catalog PDF",description:h="Upload a PDF file (max 5MB)"}){let[g,v]=(0,a.useState)(!1),[j,b]=(0,a.useState)(0),[y,N]=(0,a.useState)(!1),w=(0,a.useRef)(null),P=async r=>{let s=(0,m.Fq)(r);if(!s.isValid)return void t(s.error||"Invalid file");v(!0),b(0);try{let t=setInterval(()=>{b(e=>e>=90?(clearInterval(t),e):e+10)},200),s=await (0,m.GP)(r,"catalogs");clearInterval(t),b(100),setTimeout(()=>{e(s),v(!1),b(0)},500)}catch(e){v(!1),b(0),t(e instanceof Error?e.message:"Upload failed")}};return(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(i.J,{children:f}),r?(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-green-50 border-green-200",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(o.A,{className:"h-4 w-4 text-green-600"}),(0,s.jsx)(d,{className:"h-4 w-4 text-gray-600"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900",children:r.fileName}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"PDF uploaded successfully"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(n.$,{type:"button",variant:"outline",size:"sm",onClick:()=>window.open(r.url,"_blank"),disabled:x,children:"View"}),p&&(0,s.jsx)(n.$,{type:"button",variant:"outline",size:"sm",onClick:()=>{p&&p()},disabled:x,children:(0,s.jsx)(c.A,{className:"h-4 w-4"})})]})]}):(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:`
              relative border-2 border-dashed rounded-lg p-6 text-center cursor-pointer transition-colors
              ${y?"border-primary bg-primary/5":"border-gray-300 hover:border-gray-400"}
              ${x?"opacity-50 cursor-not-allowed":""}
            `,onDrop:e=>{e.preventDefault(),N(!1);let t=e.dataTransfer.files?.[0];t&&P(t)},onDragOver:e=>{e.preventDefault(),N(!0)},onDragLeave:e=>{e.preventDefault(),N(!1)},onClick:x?void 0:()=>{w.current?.click()},children:[(0,s.jsx)("input",{ref:w,type:"file",accept:".pdf",onChange:e=>{let t=e.target.files?.[0];t&&P(t)},className:"hidden",disabled:x}),g?(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u.A,{className:"h-8 w-8 mx-auto text-primary animate-pulse"}),(0,s.jsx)("p",{className:"text-sm font-medium",children:"Uploading PDF..."}),(0,s.jsx)(l.k,{value:j,className:"w-full max-w-xs mx-auto"}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:[j,"% complete"]})]}):(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u.A,{className:"h-8 w-8 mx-auto text-gray-400"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:"Click to upload or drag and drop"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:h})]})]})]})})]})}},96834:(e,t,r)=>{"use strict";r.d(t,{E:()=>l});var s=r(60687);r(43210);var a=r(24224),n=r(4780);let i=(0,a.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l({className:e,variant:t,...r}){return(0,s.jsx)("div",{className:(0,n.cn)(i({variant:t}),e),...r})}},99959:(e,t,r)=>{"use strict";r.d(t,{ProductActions:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call ProductActions() from the server but ProductActions is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/gauravshukla/Downloads/ll/src/app/products/product-actions.tsx","ProductActions")}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[447,642,658,580,184,684,172,839,333,847,347,906],()=>r(61252));module.exports=s})();