{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/gauravshukla/Downloads/ll/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h3\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <p\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAG1B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,4DACA;QAED,GAAG,KAAK;;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,sDACA;QAED,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGrC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QAAI,KAAK;QAAK,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,YAAY;QAAa,GAAG,KAAK;;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,SAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 110, "column": 0}, "map": {"version":3,"sources":["file:///Users/gauravshukla/Downloads/ll/src/components/ui/badge.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n"],"names":[],"mappings":";;;;;AACA;AAEA;;;;AAEA,MAAM,gBAAgB,CAAA,GAAA,mKAAA,CAAA,MAAG,AAAD,EACtB,0KACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SAAS;QACX;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAOF,SAAS,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAmB;IACzD,qBACE,6LAAC;QAAI,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,cAAc;YAAE;QAAQ,IAAI;QAAa,GAAG,KAAK;;;;;;AAExE;KAJS","debugId":null}},
    {"offset": {"line": 158, "column": 0}, "map": {"version":3,"sources":["file:///Users/gauravshukla/Downloads/ll/src/lib/firestore-data-service.ts"],"sourcesContent":["'use server';\n\nimport { \n  employeeService, \n  leadService, \n  productService, \n  productCategoryService,\n  quotationService,\n  departmentsService,\n  employeeRolesService,\n  leadSourcesService,\n  productCategoriesService,\n  quotationTemplatesService\n} from './business-services';\nimport { \n  Employee, \n  Lead, \n  Product, \n  Quotation, \n  QuotationTemplate,\n  Department,\n  EmployeeRole,\n  LeadSource,\n  ProductCategory,\n  LeadActivity\n} from './business-types';\nimport { Timestamp } from 'firebase/firestore';\n\n// Helper function to convert Firestore Timestamps to plain objects\nfunction convertTimestampToPlain(obj: any): any {\n  if (!obj) return obj;\n  \n  if (obj instanceof Timestamp) {\n    return obj.toDate().toISOString();\n  }\n  \n  if (Array.isArray(obj)) {\n    return obj.map(item => convertTimestampToPlain(item));\n  }\n  \n  if (typeof obj === 'object') {\n    const converted: any = {};\n    for (const key in obj) {\n      if (obj.hasOwnProperty(key)) {\n        converted[key] = convertTimestampToPlain(obj[key]);\n      }\n    }\n    return converted;\n  }\n  \n  return obj;\n}\n\n// Helper function to convert Firestore documents to plain objects\nfunction convertFirestoreDocToPlain<T>(doc: T): T {\n  return convertTimestampToPlain(doc);\n}\n\n// Type definitions to match your existing types\nexport interface Activity extends LeadActivity {}\n\nexport interface NewEmployee {\n  name: string;\n  email: string;\n  phone: string;\n  role: string;\n  department: string;\n  address: string;\n}\n\nexport interface NewProduct {\n  name: string;\n  price: number;\n  gstRate: number;\n  categoryId?: string;\n  description?: string;\n  skus?: string[];\n  catalogueUrl?: string;\n  cataloguePdf?: {\n    url: string;\n    fileName: string;\n    filePath: string;\n    uploadedAt: string;\n  };\n  productImage?: {\n    url: string;\n    fileName: string;\n    filePath: string;\n    uploadedAt: string;\n  };\n}\n\nexport interface UpdatableLeadData {\n  name?: string;\n  company?: string;\n  email?: string;\n  phone?: string;\n  whatsappNumber?: string;\n  status?: Lead['status'];\n  source?: string;\n  products?: Lead['products'];\n}\n\n// Employee functions\nexport const getEmployees = async (): Promise<Employee[]> => {\n  const employees = await employeeService.getAll();\n  return employees.map(emp => convertFirestoreDocToPlain(emp));\n};\n\nexport const getEmployeeById = async (id: string): Promise<Employee | undefined> => {\n  const employee = await employeeService.getById(id);\n  return employee ? convertFirestoreDocToPlain(employee) : undefined;\n};\n\nexport const getEmployeeByEmail = async (email: string): Promise<Employee | null> => {\n  const employee = await employeeService.getEmployeeByEmail(email);\n  return employee ? convertFirestoreDocToPlain(employee) : null;\n};\n\nexport const addEmployee = async (employeeData: NewEmployee): Promise<Employee> => {\n  const id = await employeeService.create({\n    ...employeeData,\n    isActive: true\n  });\n  \n  const newEmployee = await employeeService.getById(id);\n  if (!newEmployee) {\n    throw new Error('Failed to create employee');\n  }\n  \n  return convertFirestoreDocToPlain(newEmployee);\n};\n\nexport const updateEmployee = async (id: string, employeeData: Partial<NewEmployee>): Promise<Employee> => {\n  await employeeService.update(id, employeeData);\n  const updatedEmployee = await employeeService.getById(id);\n  if (!updatedEmployee) {\n    throw new Error('Employee not found after update');\n  }\n  return convertFirestoreDocToPlain(updatedEmployee);\n};\n\nexport const deleteEmployee = async (id: string): Promise<{ success: boolean }> => {\n  await employeeService.delete(id);\n  return { success: true };\n};\n\n// Lead functions\nexport const getLeads = async (query?: string, status?: string, source?: string, product?: string): Promise<Lead[]> => {\n  let leads: Lead[] = [];\n  \n  if (status) {\n    leads = await leadService.getLeadsByStatus(status as Lead['status']);\n  } else {\n    leads = await leadService.getAll();\n  }\n  \n  // Convert to plain objects\n  leads = leads.map(lead => convertFirestoreDocToPlain(lead));\n  \n  // Apply text search filter\n  if (query) {\n    const lowercasedQuery = query.toLowerCase();\n    leads = leads.filter(\n      lead =>\n        lead.name.toLowerCase().includes(lowercasedQuery) ||\n        lead.company.toLowerCase().includes(lowercasedQuery)\n    );\n  }\n  \n  // Apply source filter\n  if (source) {\n    leads = leads.filter(lead => lead.source === source);\n  }\n  \n  // Apply product filter\n  if (product) {\n    leads = leads.filter(lead => \n      lead.products && lead.products.some(p => p.productId === product)\n    );\n  }\n  \n  return leads.sort((a, b) => {\n    const aDate = a.createdAt ? new Date(a.createdAt.toString()).getTime() : 0;\n    const bDate = b.createdAt ? new Date(b.createdAt.toString()).getTime() : 0;\n    return bDate - aDate;\n  });\n};\n\nexport const getLeadById = async (id: string): Promise<Lead | undefined> => {\n  const lead = await leadService.getById(id);\n  if (!lead) return undefined;\n  \n  const plainLead = convertFirestoreDocToPlain(lead);\n  return {\n    ...plainLead,\n    activities: plainLead.activities.sort((a: any, b: any) => {\n      const aDate = new Date(a.date.toString()).getTime();\n      const bDate = new Date(b.date.toString()).getTime();\n      return bDate - aDate;\n    })\n  };\n};\n\nexport const getRecentActivities = async (limit: number): Promise<{ lead: Lead; activity: Activity }[]> => {\n  const leads = await leadService.getAll();\n  const plainLeads = leads.map(lead => convertFirestoreDocToPlain(lead));\n  \n  const allActivities = plainLeads.flatMap(lead => \n    lead.activities.map(activity => ({ lead, activity }))\n  );\n  \n  return allActivities\n    .sort((a, b) => {\n      const aDate = new Date(a.activity.date.toString()).getTime();\n      const bDate = new Date(b.activity.date.toString()).getTime();\n      return bDate - aDate;\n    })\n    .slice(0, limit);\n};\n\nexport const addLead = async (leadData: Omit<Lead, 'id' | 'createdAt' | 'activities'> & { notes?: string }): Promise<Lead> => {\n  const { notes, ...restOfLeadData } = leadData;\n  \n  const initialActivity: LeadActivity[] = [];\n  if (notes) {\n    initialActivity.push({\n      id: `act-${Date.now()}-1`,\n      date: new Date().toISOString(),\n      type: 'Email',\n      notes: `Lead created in the system. Initial notes: ${notes}`,\n    });\n  }\n\n  const id = await leadService.create({\n    ...restOfLeadData,\n    activities: initialActivity,\n    priority: 'Medium',\n    estimatedValue: leadData.products?.reduce((sum, product) => \n      sum + (product.quantity * product.rate), 0) || 0\n  });\n  \n  const newLead = await leadService.getById(id);\n  if (!newLead) {\n    throw new Error('Failed to create lead');\n  }\n  \n  return convertFirestoreDocToPlain(newLead);\n};\n\nexport const addActivityToLead = async (leadId: string, activityData: Omit<Activity, 'id' | 'date'>): Promise<Activity> => {\n  const lead = await leadService.getById(leadId);\n  if (!lead) {\n    throw new Error('Lead not found');\n  }\n\n  // Remove any undefined values since Firestore does not allow them\n  const sanitizedActivityData = Object.fromEntries(\n    Object.entries(activityData as Record<string, unknown>).filter(([, value]) => value !== undefined)\n  ) as Omit<Activity, 'id' | 'date'>;\n\n  const newActivity: LeadActivity = {\n    ...sanitizedActivityData,\n    id: `act-${leadId}-${Date.now()}`,\n    date: new Date().toISOString(),\n  };\n  \n  await leadService.addActivity(leadId, newActivity);\n  return convertFirestoreDocToPlain(newActivity);\n};\n\nexport const updateLeadStatus = async (leadId: string, status: Lead['status']): Promise<Lead> => {\n  await leadService.updateStatus(leadId, status);\n  const updatedLead = await leadService.getById(leadId);\n  if (!updatedLead) {\n    throw new Error('Lead not found after update');\n  }\n  return convertFirestoreDocToPlain(updatedLead);\n};\n\nexport const updateLead = async (leadId: string, leadData: UpdatableLeadData): Promise<Lead> => {\n  await leadService.update(leadId, leadData);\n  const updatedLead = await leadService.getById(leadId);\n  if (!updatedLead) {\n    throw new Error('Lead not found after update');\n  }\n  return convertFirestoreDocToPlain(updatedLead);\n};\n\nexport const deleteLead = async (id: string): Promise<{ success: boolean }> => {\n  await leadService.delete(id);\n  return { success: true };\n};\n\n// Product functions\nexport const getProducts = async (): Promise<Product[]> => {\n  const products = await productService.getAll();\n  return products.map(product => convertFirestoreDocToPlain(product));\n};\n\nexport const addProduct = async (productData: NewProduct): Promise<Product> => {\n  const id = await productService.create({\n    ...productData,\n    isActive: true,\n    stockQuantity: 100,\n    minStockLevel: 10\n  });\n  \n  const newProduct = await productService.getById(id);\n  if (!newProduct) {\n    throw new Error('Failed to create product');\n  }\n  \n  return convertFirestoreDocToPlain(newProduct);\n};\n\nexport const updateProduct = async (id: string, productData: NewProduct): Promise<Product> => {\n  await productService.update(id, productData);\n  const updatedProduct = await productService.getById(id);\n  if (!updatedProduct) {\n    throw new Error('Product not found after update');\n  }\n  return convertFirestoreDocToPlain(updatedProduct);\n};\n\nexport const deleteProduct = async (id: string): Promise<{ success: boolean }> => {\n  await productService.delete(id);\n  return { success: true };\n};\n\n// Lead Source functions\nexport const getLeadSources = async (): Promise<LeadSource[]> => {\n  const sources = await leadSourcesService.getAll();\n  return sources.map(source => convertFirestoreDocToPlain(source));\n};\n\nexport const addLeadSource = async (name: string): Promise<LeadSource> => {\n  const id = await leadSourcesService.create({\n    name,\n    isActive: true\n  });\n  \n  const newSource = await leadSourcesService.getById(id);\n  if (!newSource) {\n    throw new Error('Failed to create lead source');\n  }\n  \n  return convertFirestoreDocToPlain(newSource);\n};\n\nexport const deleteLeadSource = async (id: string): Promise<{ success: boolean }> => {\n  await leadSourcesService.delete(id);\n  return { success: true };\n};\n\n// Product Category functions\nexport const getProductCategories = async (): Promise<ProductCategory[]> => {\n  const categories = await productCategoriesService.getAll();\n  return categories.map(cat => convertFirestoreDocToPlain(cat));\n};\n\nexport const getProductCategoryById = async (id: string): Promise<ProductCategory | undefined> => {\n  const category = await productCategoriesService.getById(id);\n  return category ? convertFirestoreDocToPlain(category) : undefined;\n};\n\nexport const addProductCategory = async (name: string, description: string): Promise<ProductCategory> => {\n  const id = await productCategoriesService.create({\n    name,\n    description,\n    isActive: true\n  });\n  \n  const newCategory = await productCategoriesService.getById(id);\n  if (!newCategory) {\n    throw new Error('Failed to create product category');\n  }\n  \n  return convertFirestoreDocToPlain(newCategory);\n};\n\nexport const updateProductCategory = async (id: string, name: string, description: string): Promise<ProductCategory> => {\n  await productCategoriesService.update(id, { name, description });\n  const updatedCategory = await productCategoriesService.getById(id);\n  if (!updatedCategory) {\n    throw new Error('Product category not found after update');\n  }\n  return convertFirestoreDocToPlain(updatedCategory);\n};\n\nexport const deleteProductCategory = async (id: string): Promise<{ success: boolean }> => {\n  await productCategoriesService.delete(id);\n  return { success: true };\n};\n\n// Quotation functions\nexport const getQuotations = async (): Promise<Quotation[]> => {\n  const quotations = await quotationService.getWithQuery({\n    orderBy: { field: 'createdAt', direction: 'desc' }\n  });\n  return quotations.map(q => convertFirestoreDocToPlain(q));\n};\n\nexport const getQuotationById = async (id: string): Promise<Quotation | undefined> => {\n  const quotation = await quotationService.getById(id);\n  return quotation ? convertFirestoreDocToPlain(quotation) : undefined;\n};\n\nexport const addQuotation = async (quotationData: Omit<Quotation, 'id' | 'createdAt' | 'quotationNumber'>, quotationPrefix: string): Promise<Quotation> => {\n  console.log('Data service received prefix:', quotationPrefix);\n  const prefix = quotationPrefix?.trim() || 'QUO';\n  console.log('Final prefix being used:', prefix);\n  const quotationNumber = await quotationService.generateQuotationNumber(prefix);\n  console.log('Generated quotation number:', quotationNumber);\n  \n  const id = await quotationService.create({\n    ...quotationData,\n    quotationNumber\n  });\n  \n  const newQuotation = await quotationService.getById(id);\n  if (!newQuotation) {\n    throw new Error('Failed to create quotation');\n  }\n  \n  return convertFirestoreDocToPlain(newQuotation);\n};\n\nexport const updateQuotation = async (id: string, quotationData: Partial<Quotation>): Promise<Quotation> => {\n  await quotationService.update(id, quotationData);\n  const updatedQuotation = await quotationService.getById(id);\n  if (!updatedQuotation) {\n    throw new Error('Quotation not found after update');\n  }\n  return convertFirestoreDocToPlain(updatedQuotation);\n};\n\nexport const deleteQuotation = async (id: string): Promise<{ success: boolean }> => {\n  await quotationService.delete(id);\n  return { success: true };\n};\n\n// Quotation Template functions\nexport const getQuotationTemplates = async (): Promise<QuotationTemplate[]> => {\n  const templates = await quotationTemplatesService.getAll();\n  return templates.map(template => convertFirestoreDocToPlain(template));\n};\n\nexport const getQuotationTemplateById = async (id: string): Promise<QuotationTemplate | undefined> => {\n  const template = await quotationTemplatesService.getById(id);\n  return template ? convertFirestoreDocToPlain(template) : undefined;\n};\n\nexport const addQuotationTemplate = async (templateData: Omit<QuotationTemplate, 'id'>): Promise<QuotationTemplate> => {\n  const id = await quotationTemplatesService.create({\n    ...templateData,\n    isDefault: false\n  });\n  \n  const newTemplate = await quotationTemplatesService.getById(id);\n  if (!newTemplate) {\n    throw new Error('Failed to create quotation template');\n  }\n  \n  return convertFirestoreDocToPlain(newTemplate);\n};\n\nexport const updateQuotationTemplate = async (id: string, templateData: QuotationTemplate): Promise<QuotationTemplate> => {\n  await quotationTemplatesService.update(id, templateData);\n  const updatedTemplate = await quotationTemplatesService.getById(id);\n  if (!updatedTemplate) {\n    throw new Error('Template not found after update');\n  }\n  return convertFirestoreDocToPlain(updatedTemplate);\n};\n\nexport const deleteQuotationTemplate = async (id: string): Promise<{ success: boolean }> => {\n  await quotationTemplatesService.delete(id);\n  return { success: true };\n};\n\n// Employee Role functions\nexport const getEmployeeRoles = async (): Promise<EmployeeRole[]> => {\n  const roles = await employeeRolesService.getAll();\n  return roles.map(role => convertFirestoreDocToPlain(role));\n};\n\nexport const addEmployeeRole = async (name: string): Promise<EmployeeRole> => {\n  const id = await employeeRolesService.create({ name });\n  \n  const newRole = await employeeRolesService.getById(id);\n  if (!newRole) {\n    throw new Error('Failed to create employee role');\n  }\n  \n  return convertFirestoreDocToPlain(newRole);\n};\n\nexport const deleteEmployeeRole = async (id: string): Promise<{ success: boolean }> => {\n  await employeeRolesService.delete(id);\n  return { success: true };\n};\n\n// Department functions\nexport const getDepartments = async (): Promise<Department[]> => {\n  const departments = await departmentsService.getAll();\n  return departments.map(dept => convertFirestoreDocToPlain(dept));\n};\n\nexport const addDepartment = async (name: string): Promise<Department> => {\n  const id = await departmentsService.create({ name });\n  \n  const newDepartment = await departmentsService.getById(id);\n  if (!newDepartment) {\n    throw new Error('Failed to create department');\n  }\n  \n  return convertFirestoreDocToPlain(newDepartment);\n};\n\nexport const deleteDepartment = async (id: string): Promise<{ success: boolean }> => {\n  await departmentsService.delete(id);\n  return { success: true };\n};\n\n// Count functions\nexport const getLeadsCount = async (): Promise<number> => {\n  return await leadService.count();\n};\n\nexport const getQuotationsCount = async (): Promise<number> => {\n  return await quotationService.count();\n};\n\nexport const getProductsCount = async (): Promise<number> => {\n  return await productService.count();\n};\n\nexport const getEmployeesCount = async (): Promise<number> => {\n  return await employeeService.count();\n};\n\n// Count by status functions\nexport const getLeadsCountByStatus = async (status: Lead['status']): Promise<number> => {\n  return await leadService.count({\n    where: [{ field: 'status', operator: '==', value: status }]\n  });\n};\n\nexport const getQuotationsCountByStatus = async (status: Quotation['status']): Promise<number> => {\n  return await quotationService.count({\n    where: [{ field: 'status', operator: '==', value: status }]\n  });\n};\n\nexport const getActiveProductsCount = async (): Promise<number> => {\n  return await productService.count({\n    where: [{ field: 'isActive', operator: '==', value: true }]\n  });\n};\n\nexport const getActiveEmployeesCount = async (): Promise<number> => {\n  return await employeeService.count({\n    where: [{ field: 'isActive', operator: '==', value: true }]\n  });\n};\n"],"names":[],"mappings":";;;;;;IAoJa,WAAA,WAAA,GAAA,CAAA,GAAA,yNAAA,CAAA,wBAAA,EAAA,8CAAA,yNAAA,CAAA,aAAA,EAAA,KAAA,GAAA,yNAAA,CAAA,mBAAA,EAAA","debugId":null}},
    {"offset": {"line": 174, "column": 0}, "map": {"version":3,"sources":["file:///Users/gauravshukla/Downloads/ll/src/lib/firestore-data-service.ts"],"sourcesContent":["'use server';\n\nimport { \n  employeeService, \n  leadService, \n  productService, \n  productCategoryService,\n  quotationService,\n  departmentsService,\n  employeeRolesService,\n  leadSourcesService,\n  productCategoriesService,\n  quotationTemplatesService\n} from './business-services';\nimport { \n  Employee, \n  Lead, \n  Product, \n  Quotation, \n  QuotationTemplate,\n  Department,\n  EmployeeRole,\n  LeadSource,\n  ProductCategory,\n  LeadActivity\n} from './business-types';\nimport { Timestamp } from 'firebase/firestore';\n\n// Helper function to convert Firestore Timestamps to plain objects\nfunction convertTimestampToPlain(obj: any): any {\n  if (!obj) return obj;\n  \n  if (obj instanceof Timestamp) {\n    return obj.toDate().toISOString();\n  }\n  \n  if (Array.isArray(obj)) {\n    return obj.map(item => convertTimestampToPlain(item));\n  }\n  \n  if (typeof obj === 'object') {\n    const converted: any = {};\n    for (const key in obj) {\n      if (obj.hasOwnProperty(key)) {\n        converted[key] = convertTimestampToPlain(obj[key]);\n      }\n    }\n    return converted;\n  }\n  \n  return obj;\n}\n\n// Helper function to convert Firestore documents to plain objects\nfunction convertFirestoreDocToPlain<T>(doc: T): T {\n  return convertTimestampToPlain(doc);\n}\n\n// Type definitions to match your existing types\nexport interface Activity extends LeadActivity {}\n\nexport interface NewEmployee {\n  name: string;\n  email: string;\n  phone: string;\n  role: string;\n  department: string;\n  address: string;\n}\n\nexport interface NewProduct {\n  name: string;\n  price: number;\n  gstRate: number;\n  categoryId?: string;\n  description?: string;\n  skus?: string[];\n  catalogueUrl?: string;\n  cataloguePdf?: {\n    url: string;\n    fileName: string;\n    filePath: string;\n    uploadedAt: string;\n  };\n  productImage?: {\n    url: string;\n    fileName: string;\n    filePath: string;\n    uploadedAt: string;\n  };\n}\n\nexport interface UpdatableLeadData {\n  name?: string;\n  company?: string;\n  email?: string;\n  phone?: string;\n  whatsappNumber?: string;\n  status?: Lead['status'];\n  source?: string;\n  products?: Lead['products'];\n}\n\n// Employee functions\nexport const getEmployees = async (): Promise<Employee[]> => {\n  const employees = await employeeService.getAll();\n  return employees.map(emp => convertFirestoreDocToPlain(emp));\n};\n\nexport const getEmployeeById = async (id: string): Promise<Employee | undefined> => {\n  const employee = await employeeService.getById(id);\n  return employee ? convertFirestoreDocToPlain(employee) : undefined;\n};\n\nexport const getEmployeeByEmail = async (email: string): Promise<Employee | null> => {\n  const employee = await employeeService.getEmployeeByEmail(email);\n  return employee ? convertFirestoreDocToPlain(employee) : null;\n};\n\nexport const addEmployee = async (employeeData: NewEmployee): Promise<Employee> => {\n  const id = await employeeService.create({\n    ...employeeData,\n    isActive: true\n  });\n  \n  const newEmployee = await employeeService.getById(id);\n  if (!newEmployee) {\n    throw new Error('Failed to create employee');\n  }\n  \n  return convertFirestoreDocToPlain(newEmployee);\n};\n\nexport const updateEmployee = async (id: string, employeeData: Partial<NewEmployee>): Promise<Employee> => {\n  await employeeService.update(id, employeeData);\n  const updatedEmployee = await employeeService.getById(id);\n  if (!updatedEmployee) {\n    throw new Error('Employee not found after update');\n  }\n  return convertFirestoreDocToPlain(updatedEmployee);\n};\n\nexport const deleteEmployee = async (id: string): Promise<{ success: boolean }> => {\n  await employeeService.delete(id);\n  return { success: true };\n};\n\n// Lead functions\nexport const getLeads = async (query?: string, status?: string, source?: string, product?: string): Promise<Lead[]> => {\n  let leads: Lead[] = [];\n  \n  if (status) {\n    leads = await leadService.getLeadsByStatus(status as Lead['status']);\n  } else {\n    leads = await leadService.getAll();\n  }\n  \n  // Convert to plain objects\n  leads = leads.map(lead => convertFirestoreDocToPlain(lead));\n  \n  // Apply text search filter\n  if (query) {\n    const lowercasedQuery = query.toLowerCase();\n    leads = leads.filter(\n      lead =>\n        lead.name.toLowerCase().includes(lowercasedQuery) ||\n        lead.company.toLowerCase().includes(lowercasedQuery)\n    );\n  }\n  \n  // Apply source filter\n  if (source) {\n    leads = leads.filter(lead => lead.source === source);\n  }\n  \n  // Apply product filter\n  if (product) {\n    leads = leads.filter(lead => \n      lead.products && lead.products.some(p => p.productId === product)\n    );\n  }\n  \n  return leads.sort((a, b) => {\n    const aDate = a.createdAt ? new Date(a.createdAt.toString()).getTime() : 0;\n    const bDate = b.createdAt ? new Date(b.createdAt.toString()).getTime() : 0;\n    return bDate - aDate;\n  });\n};\n\nexport const getLeadById = async (id: string): Promise<Lead | undefined> => {\n  const lead = await leadService.getById(id);\n  if (!lead) return undefined;\n  \n  const plainLead = convertFirestoreDocToPlain(lead);\n  return {\n    ...plainLead,\n    activities: plainLead.activities.sort((a: any, b: any) => {\n      const aDate = new Date(a.date.toString()).getTime();\n      const bDate = new Date(b.date.toString()).getTime();\n      return bDate - aDate;\n    })\n  };\n};\n\nexport const getRecentActivities = async (limit: number): Promise<{ lead: Lead; activity: Activity }[]> => {\n  const leads = await leadService.getAll();\n  const plainLeads = leads.map(lead => convertFirestoreDocToPlain(lead));\n  \n  const allActivities = plainLeads.flatMap(lead => \n    lead.activities.map(activity => ({ lead, activity }))\n  );\n  \n  return allActivities\n    .sort((a, b) => {\n      const aDate = new Date(a.activity.date.toString()).getTime();\n      const bDate = new Date(b.activity.date.toString()).getTime();\n      return bDate - aDate;\n    })\n    .slice(0, limit);\n};\n\nexport const addLead = async (leadData: Omit<Lead, 'id' | 'createdAt' | 'activities'> & { notes?: string }): Promise<Lead> => {\n  const { notes, ...restOfLeadData } = leadData;\n  \n  const initialActivity: LeadActivity[] = [];\n  if (notes) {\n    initialActivity.push({\n      id: `act-${Date.now()}-1`,\n      date: new Date().toISOString(),\n      type: 'Email',\n      notes: `Lead created in the system. Initial notes: ${notes}`,\n    });\n  }\n\n  const id = await leadService.create({\n    ...restOfLeadData,\n    activities: initialActivity,\n    priority: 'Medium',\n    estimatedValue: leadData.products?.reduce((sum, product) => \n      sum + (product.quantity * product.rate), 0) || 0\n  });\n  \n  const newLead = await leadService.getById(id);\n  if (!newLead) {\n    throw new Error('Failed to create lead');\n  }\n  \n  return convertFirestoreDocToPlain(newLead);\n};\n\nexport const addActivityToLead = async (leadId: string, activityData: Omit<Activity, 'id' | 'date'>): Promise<Activity> => {\n  const lead = await leadService.getById(leadId);\n  if (!lead) {\n    throw new Error('Lead not found');\n  }\n\n  // Remove any undefined values since Firestore does not allow them\n  const sanitizedActivityData = Object.fromEntries(\n    Object.entries(activityData as Record<string, unknown>).filter(([, value]) => value !== undefined)\n  ) as Omit<Activity, 'id' | 'date'>;\n\n  const newActivity: LeadActivity = {\n    ...sanitizedActivityData,\n    id: `act-${leadId}-${Date.now()}`,\n    date: new Date().toISOString(),\n  };\n  \n  await leadService.addActivity(leadId, newActivity);\n  return convertFirestoreDocToPlain(newActivity);\n};\n\nexport const updateLeadStatus = async (leadId: string, status: Lead['status']): Promise<Lead> => {\n  await leadService.updateStatus(leadId, status);\n  const updatedLead = await leadService.getById(leadId);\n  if (!updatedLead) {\n    throw new Error('Lead not found after update');\n  }\n  return convertFirestoreDocToPlain(updatedLead);\n};\n\nexport const updateLead = async (leadId: string, leadData: UpdatableLeadData): Promise<Lead> => {\n  await leadService.update(leadId, leadData);\n  const updatedLead = await leadService.getById(leadId);\n  if (!updatedLead) {\n    throw new Error('Lead not found after update');\n  }\n  return convertFirestoreDocToPlain(updatedLead);\n};\n\nexport const deleteLead = async (id: string): Promise<{ success: boolean }> => {\n  await leadService.delete(id);\n  return { success: true };\n};\n\n// Product functions\nexport const getProducts = async (): Promise<Product[]> => {\n  const products = await productService.getAll();\n  return products.map(product => convertFirestoreDocToPlain(product));\n};\n\nexport const addProduct = async (productData: NewProduct): Promise<Product> => {\n  const id = await productService.create({\n    ...productData,\n    isActive: true,\n    stockQuantity: 100,\n    minStockLevel: 10\n  });\n  \n  const newProduct = await productService.getById(id);\n  if (!newProduct) {\n    throw new Error('Failed to create product');\n  }\n  \n  return convertFirestoreDocToPlain(newProduct);\n};\n\nexport const updateProduct = async (id: string, productData: NewProduct): Promise<Product> => {\n  await productService.update(id, productData);\n  const updatedProduct = await productService.getById(id);\n  if (!updatedProduct) {\n    throw new Error('Product not found after update');\n  }\n  return convertFirestoreDocToPlain(updatedProduct);\n};\n\nexport const deleteProduct = async (id: string): Promise<{ success: boolean }> => {\n  await productService.delete(id);\n  return { success: true };\n};\n\n// Lead Source functions\nexport const getLeadSources = async (): Promise<LeadSource[]> => {\n  const sources = await leadSourcesService.getAll();\n  return sources.map(source => convertFirestoreDocToPlain(source));\n};\n\nexport const addLeadSource = async (name: string): Promise<LeadSource> => {\n  const id = await leadSourcesService.create({\n    name,\n    isActive: true\n  });\n  \n  const newSource = await leadSourcesService.getById(id);\n  if (!newSource) {\n    throw new Error('Failed to create lead source');\n  }\n  \n  return convertFirestoreDocToPlain(newSource);\n};\n\nexport const deleteLeadSource = async (id: string): Promise<{ success: boolean }> => {\n  await leadSourcesService.delete(id);\n  return { success: true };\n};\n\n// Product Category functions\nexport const getProductCategories = async (): Promise<ProductCategory[]> => {\n  const categories = await productCategoriesService.getAll();\n  return categories.map(cat => convertFirestoreDocToPlain(cat));\n};\n\nexport const getProductCategoryById = async (id: string): Promise<ProductCategory | undefined> => {\n  const category = await productCategoriesService.getById(id);\n  return category ? convertFirestoreDocToPlain(category) : undefined;\n};\n\nexport const addProductCategory = async (name: string, description: string): Promise<ProductCategory> => {\n  const id = await productCategoriesService.create({\n    name,\n    description,\n    isActive: true\n  });\n  \n  const newCategory = await productCategoriesService.getById(id);\n  if (!newCategory) {\n    throw new Error('Failed to create product category');\n  }\n  \n  return convertFirestoreDocToPlain(newCategory);\n};\n\nexport const updateProductCategory = async (id: string, name: string, description: string): Promise<ProductCategory> => {\n  await productCategoriesService.update(id, { name, description });\n  const updatedCategory = await productCategoriesService.getById(id);\n  if (!updatedCategory) {\n    throw new Error('Product category not found after update');\n  }\n  return convertFirestoreDocToPlain(updatedCategory);\n};\n\nexport const deleteProductCategory = async (id: string): Promise<{ success: boolean }> => {\n  await productCategoriesService.delete(id);\n  return { success: true };\n};\n\n// Quotation functions\nexport const getQuotations = async (): Promise<Quotation[]> => {\n  const quotations = await quotationService.getWithQuery({\n    orderBy: { field: 'createdAt', direction: 'desc' }\n  });\n  return quotations.map(q => convertFirestoreDocToPlain(q));\n};\n\nexport const getQuotationById = async (id: string): Promise<Quotation | undefined> => {\n  const quotation = await quotationService.getById(id);\n  return quotation ? convertFirestoreDocToPlain(quotation) : undefined;\n};\n\nexport const addQuotation = async (quotationData: Omit<Quotation, 'id' | 'createdAt' | 'quotationNumber'>, quotationPrefix: string): Promise<Quotation> => {\n  console.log('Data service received prefix:', quotationPrefix);\n  const prefix = quotationPrefix?.trim() || 'QUO';\n  console.log('Final prefix being used:', prefix);\n  const quotationNumber = await quotationService.generateQuotationNumber(prefix);\n  console.log('Generated quotation number:', quotationNumber);\n  \n  const id = await quotationService.create({\n    ...quotationData,\n    quotationNumber\n  });\n  \n  const newQuotation = await quotationService.getById(id);\n  if (!newQuotation) {\n    throw new Error('Failed to create quotation');\n  }\n  \n  return convertFirestoreDocToPlain(newQuotation);\n};\n\nexport const updateQuotation = async (id: string, quotationData: Partial<Quotation>): Promise<Quotation> => {\n  await quotationService.update(id, quotationData);\n  const updatedQuotation = await quotationService.getById(id);\n  if (!updatedQuotation) {\n    throw new Error('Quotation not found after update');\n  }\n  return convertFirestoreDocToPlain(updatedQuotation);\n};\n\nexport const deleteQuotation = async (id: string): Promise<{ success: boolean }> => {\n  await quotationService.delete(id);\n  return { success: true };\n};\n\n// Quotation Template functions\nexport const getQuotationTemplates = async (): Promise<QuotationTemplate[]> => {\n  const templates = await quotationTemplatesService.getAll();\n  return templates.map(template => convertFirestoreDocToPlain(template));\n};\n\nexport const getQuotationTemplateById = async (id: string): Promise<QuotationTemplate | undefined> => {\n  const template = await quotationTemplatesService.getById(id);\n  return template ? convertFirestoreDocToPlain(template) : undefined;\n};\n\nexport const addQuotationTemplate = async (templateData: Omit<QuotationTemplate, 'id'>): Promise<QuotationTemplate> => {\n  const id = await quotationTemplatesService.create({\n    ...templateData,\n    isDefault: false\n  });\n  \n  const newTemplate = await quotationTemplatesService.getById(id);\n  if (!newTemplate) {\n    throw new Error('Failed to create quotation template');\n  }\n  \n  return convertFirestoreDocToPlain(newTemplate);\n};\n\nexport const updateQuotationTemplate = async (id: string, templateData: QuotationTemplate): Promise<QuotationTemplate> => {\n  await quotationTemplatesService.update(id, templateData);\n  const updatedTemplate = await quotationTemplatesService.getById(id);\n  if (!updatedTemplate) {\n    throw new Error('Template not found after update');\n  }\n  return convertFirestoreDocToPlain(updatedTemplate);\n};\n\nexport const deleteQuotationTemplate = async (id: string): Promise<{ success: boolean }> => {\n  await quotationTemplatesService.delete(id);\n  return { success: true };\n};\n\n// Employee Role functions\nexport const getEmployeeRoles = async (): Promise<EmployeeRole[]> => {\n  const roles = await employeeRolesService.getAll();\n  return roles.map(role => convertFirestoreDocToPlain(role));\n};\n\nexport const addEmployeeRole = async (name: string): Promise<EmployeeRole> => {\n  const id = await employeeRolesService.create({ name });\n  \n  const newRole = await employeeRolesService.getById(id);\n  if (!newRole) {\n    throw new Error('Failed to create employee role');\n  }\n  \n  return convertFirestoreDocToPlain(newRole);\n};\n\nexport const deleteEmployeeRole = async (id: string): Promise<{ success: boolean }> => {\n  await employeeRolesService.delete(id);\n  return { success: true };\n};\n\n// Department functions\nexport const getDepartments = async (): Promise<Department[]> => {\n  const departments = await departmentsService.getAll();\n  return departments.map(dept => convertFirestoreDocToPlain(dept));\n};\n\nexport const addDepartment = async (name: string): Promise<Department> => {\n  const id = await departmentsService.create({ name });\n  \n  const newDepartment = await departmentsService.getById(id);\n  if (!newDepartment) {\n    throw new Error('Failed to create department');\n  }\n  \n  return convertFirestoreDocToPlain(newDepartment);\n};\n\nexport const deleteDepartment = async (id: string): Promise<{ success: boolean }> => {\n  await departmentsService.delete(id);\n  return { success: true };\n};\n\n// Count functions\nexport const getLeadsCount = async (): Promise<number> => {\n  return await leadService.count();\n};\n\nexport const getQuotationsCount = async (): Promise<number> => {\n  return await quotationService.count();\n};\n\nexport const getProductsCount = async (): Promise<number> => {\n  return await productService.count();\n};\n\nexport const getEmployeesCount = async (): Promise<number> => {\n  return await employeeService.count();\n};\n\n// Count by status functions\nexport const getLeadsCountByStatus = async (status: Lead['status']): Promise<number> => {\n  return await leadService.count({\n    where: [{ field: 'status', operator: '==', value: status }]\n  });\n};\n\nexport const getQuotationsCountByStatus = async (status: Quotation['status']): Promise<number> => {\n  return await quotationService.count({\n    where: [{ field: 'status', operator: '==', value: status }]\n  });\n};\n\nexport const getActiveProductsCount = async (): Promise<number> => {\n  return await productService.count({\n    where: [{ field: 'isActive', operator: '==', value: true }]\n  });\n};\n\nexport const getActiveEmployeesCount = async (): Promise<number> => {\n  return await employeeService.count({\n    where: [{ field: 'isActive', operator: '==', value: true }]\n  });\n};\n"],"names":[],"mappings":";;;;;;IA4Ya,gBAAA,WAAA,GAAA,CAAA,GAAA,yNAAA,CAAA,wBAAA,EAAA,8CAAA,yNAAA,CAAA,aAAA,EAAA,KAAA,GAAA,yNAAA,CAAA,mBAAA,EAAA","debugId":null}},
    {"offset": {"line": 190, "column": 0}, "map": {"version":3,"sources":["file:///Users/gauravshukla/Downloads/ll/src/lib/firestore-data-service.ts"],"sourcesContent":["'use server';\n\nimport { \n  employeeService, \n  leadService, \n  productService, \n  productCategoryService,\n  quotationService,\n  departmentsService,\n  employeeRolesService,\n  leadSourcesService,\n  productCategoriesService,\n  quotationTemplatesService\n} from './business-services';\nimport { \n  Employee, \n  Lead, \n  Product, \n  Quotation, \n  QuotationTemplate,\n  Department,\n  EmployeeRole,\n  LeadSource,\n  ProductCategory,\n  LeadActivity\n} from './business-types';\nimport { Timestamp } from 'firebase/firestore';\n\n// Helper function to convert Firestore Timestamps to plain objects\nfunction convertTimestampToPlain(obj: any): any {\n  if (!obj) return obj;\n  \n  if (obj instanceof Timestamp) {\n    return obj.toDate().toISOString();\n  }\n  \n  if (Array.isArray(obj)) {\n    return obj.map(item => convertTimestampToPlain(item));\n  }\n  \n  if (typeof obj === 'object') {\n    const converted: any = {};\n    for (const key in obj) {\n      if (obj.hasOwnProperty(key)) {\n        converted[key] = convertTimestampToPlain(obj[key]);\n      }\n    }\n    return converted;\n  }\n  \n  return obj;\n}\n\n// Helper function to convert Firestore documents to plain objects\nfunction convertFirestoreDocToPlain<T>(doc: T): T {\n  return convertTimestampToPlain(doc);\n}\n\n// Type definitions to match your existing types\nexport interface Activity extends LeadActivity {}\n\nexport interface NewEmployee {\n  name: string;\n  email: string;\n  phone: string;\n  role: string;\n  department: string;\n  address: string;\n}\n\nexport interface NewProduct {\n  name: string;\n  price: number;\n  gstRate: number;\n  categoryId?: string;\n  description?: string;\n  skus?: string[];\n  catalogueUrl?: string;\n  cataloguePdf?: {\n    url: string;\n    fileName: string;\n    filePath: string;\n    uploadedAt: string;\n  };\n  productImage?: {\n    url: string;\n    fileName: string;\n    filePath: string;\n    uploadedAt: string;\n  };\n}\n\nexport interface UpdatableLeadData {\n  name?: string;\n  company?: string;\n  email?: string;\n  phone?: string;\n  whatsappNumber?: string;\n  status?: Lead['status'];\n  source?: string;\n  products?: Lead['products'];\n}\n\n// Employee functions\nexport const getEmployees = async (): Promise<Employee[]> => {\n  const employees = await employeeService.getAll();\n  return employees.map(emp => convertFirestoreDocToPlain(emp));\n};\n\nexport const getEmployeeById = async (id: string): Promise<Employee | undefined> => {\n  const employee = await employeeService.getById(id);\n  return employee ? convertFirestoreDocToPlain(employee) : undefined;\n};\n\nexport const getEmployeeByEmail = async (email: string): Promise<Employee | null> => {\n  const employee = await employeeService.getEmployeeByEmail(email);\n  return employee ? convertFirestoreDocToPlain(employee) : null;\n};\n\nexport const addEmployee = async (employeeData: NewEmployee): Promise<Employee> => {\n  const id = await employeeService.create({\n    ...employeeData,\n    isActive: true\n  });\n  \n  const newEmployee = await employeeService.getById(id);\n  if (!newEmployee) {\n    throw new Error('Failed to create employee');\n  }\n  \n  return convertFirestoreDocToPlain(newEmployee);\n};\n\nexport const updateEmployee = async (id: string, employeeData: Partial<NewEmployee>): Promise<Employee> => {\n  await employeeService.update(id, employeeData);\n  const updatedEmployee = await employeeService.getById(id);\n  if (!updatedEmployee) {\n    throw new Error('Employee not found after update');\n  }\n  return convertFirestoreDocToPlain(updatedEmployee);\n};\n\nexport const deleteEmployee = async (id: string): Promise<{ success: boolean }> => {\n  await employeeService.delete(id);\n  return { success: true };\n};\n\n// Lead functions\nexport const getLeads = async (query?: string, status?: string, source?: string, product?: string): Promise<Lead[]> => {\n  let leads: Lead[] = [];\n  \n  if (status) {\n    leads = await leadService.getLeadsByStatus(status as Lead['status']);\n  } else {\n    leads = await leadService.getAll();\n  }\n  \n  // Convert to plain objects\n  leads = leads.map(lead => convertFirestoreDocToPlain(lead));\n  \n  // Apply text search filter\n  if (query) {\n    const lowercasedQuery = query.toLowerCase();\n    leads = leads.filter(\n      lead =>\n        lead.name.toLowerCase().includes(lowercasedQuery) ||\n        lead.company.toLowerCase().includes(lowercasedQuery)\n    );\n  }\n  \n  // Apply source filter\n  if (source) {\n    leads = leads.filter(lead => lead.source === source);\n  }\n  \n  // Apply product filter\n  if (product) {\n    leads = leads.filter(lead => \n      lead.products && lead.products.some(p => p.productId === product)\n    );\n  }\n  \n  return leads.sort((a, b) => {\n    const aDate = a.createdAt ? new Date(a.createdAt.toString()).getTime() : 0;\n    const bDate = b.createdAt ? new Date(b.createdAt.toString()).getTime() : 0;\n    return bDate - aDate;\n  });\n};\n\nexport const getLeadById = async (id: string): Promise<Lead | undefined> => {\n  const lead = await leadService.getById(id);\n  if (!lead) return undefined;\n  \n  const plainLead = convertFirestoreDocToPlain(lead);\n  return {\n    ...plainLead,\n    activities: plainLead.activities.sort((a: any, b: any) => {\n      const aDate = new Date(a.date.toString()).getTime();\n      const bDate = new Date(b.date.toString()).getTime();\n      return bDate - aDate;\n    })\n  };\n};\n\nexport const getRecentActivities = async (limit: number): Promise<{ lead: Lead; activity: Activity }[]> => {\n  const leads = await leadService.getAll();\n  const plainLeads = leads.map(lead => convertFirestoreDocToPlain(lead));\n  \n  const allActivities = plainLeads.flatMap(lead => \n    lead.activities.map(activity => ({ lead, activity }))\n  );\n  \n  return allActivities\n    .sort((a, b) => {\n      const aDate = new Date(a.activity.date.toString()).getTime();\n      const bDate = new Date(b.activity.date.toString()).getTime();\n      return bDate - aDate;\n    })\n    .slice(0, limit);\n};\n\nexport const addLead = async (leadData: Omit<Lead, 'id' | 'createdAt' | 'activities'> & { notes?: string }): Promise<Lead> => {\n  const { notes, ...restOfLeadData } = leadData;\n  \n  const initialActivity: LeadActivity[] = [];\n  if (notes) {\n    initialActivity.push({\n      id: `act-${Date.now()}-1`,\n      date: new Date().toISOString(),\n      type: 'Email',\n      notes: `Lead created in the system. Initial notes: ${notes}`,\n    });\n  }\n\n  const id = await leadService.create({\n    ...restOfLeadData,\n    activities: initialActivity,\n    priority: 'Medium',\n    estimatedValue: leadData.products?.reduce((sum, product) => \n      sum + (product.quantity * product.rate), 0) || 0\n  });\n  \n  const newLead = await leadService.getById(id);\n  if (!newLead) {\n    throw new Error('Failed to create lead');\n  }\n  \n  return convertFirestoreDocToPlain(newLead);\n};\n\nexport const addActivityToLead = async (leadId: string, activityData: Omit<Activity, 'id' | 'date'>): Promise<Activity> => {\n  const lead = await leadService.getById(leadId);\n  if (!lead) {\n    throw new Error('Lead not found');\n  }\n\n  // Remove any undefined values since Firestore does not allow them\n  const sanitizedActivityData = Object.fromEntries(\n    Object.entries(activityData as Record<string, unknown>).filter(([, value]) => value !== undefined)\n  ) as Omit<Activity, 'id' | 'date'>;\n\n  const newActivity: LeadActivity = {\n    ...sanitizedActivityData,\n    id: `act-${leadId}-${Date.now()}`,\n    date: new Date().toISOString(),\n  };\n  \n  await leadService.addActivity(leadId, newActivity);\n  return convertFirestoreDocToPlain(newActivity);\n};\n\nexport const updateLeadStatus = async (leadId: string, status: Lead['status']): Promise<Lead> => {\n  await leadService.updateStatus(leadId, status);\n  const updatedLead = await leadService.getById(leadId);\n  if (!updatedLead) {\n    throw new Error('Lead not found after update');\n  }\n  return convertFirestoreDocToPlain(updatedLead);\n};\n\nexport const updateLead = async (leadId: string, leadData: UpdatableLeadData): Promise<Lead> => {\n  await leadService.update(leadId, leadData);\n  const updatedLead = await leadService.getById(leadId);\n  if (!updatedLead) {\n    throw new Error('Lead not found after update');\n  }\n  return convertFirestoreDocToPlain(updatedLead);\n};\n\nexport const deleteLead = async (id: string): Promise<{ success: boolean }> => {\n  await leadService.delete(id);\n  return { success: true };\n};\n\n// Product functions\nexport const getProducts = async (): Promise<Product[]> => {\n  const products = await productService.getAll();\n  return products.map(product => convertFirestoreDocToPlain(product));\n};\n\nexport const addProduct = async (productData: NewProduct): Promise<Product> => {\n  const id = await productService.create({\n    ...productData,\n    isActive: true,\n    stockQuantity: 100,\n    minStockLevel: 10\n  });\n  \n  const newProduct = await productService.getById(id);\n  if (!newProduct) {\n    throw new Error('Failed to create product');\n  }\n  \n  return convertFirestoreDocToPlain(newProduct);\n};\n\nexport const updateProduct = async (id: string, productData: NewProduct): Promise<Product> => {\n  await productService.update(id, productData);\n  const updatedProduct = await productService.getById(id);\n  if (!updatedProduct) {\n    throw new Error('Product not found after update');\n  }\n  return convertFirestoreDocToPlain(updatedProduct);\n};\n\nexport const deleteProduct = async (id: string): Promise<{ success: boolean }> => {\n  await productService.delete(id);\n  return { success: true };\n};\n\n// Lead Source functions\nexport const getLeadSources = async (): Promise<LeadSource[]> => {\n  const sources = await leadSourcesService.getAll();\n  return sources.map(source => convertFirestoreDocToPlain(source));\n};\n\nexport const addLeadSource = async (name: string): Promise<LeadSource> => {\n  const id = await leadSourcesService.create({\n    name,\n    isActive: true\n  });\n  \n  const newSource = await leadSourcesService.getById(id);\n  if (!newSource) {\n    throw new Error('Failed to create lead source');\n  }\n  \n  return convertFirestoreDocToPlain(newSource);\n};\n\nexport const deleteLeadSource = async (id: string): Promise<{ success: boolean }> => {\n  await leadSourcesService.delete(id);\n  return { success: true };\n};\n\n// Product Category functions\nexport const getProductCategories = async (): Promise<ProductCategory[]> => {\n  const categories = await productCategoriesService.getAll();\n  return categories.map(cat => convertFirestoreDocToPlain(cat));\n};\n\nexport const getProductCategoryById = async (id: string): Promise<ProductCategory | undefined> => {\n  const category = await productCategoriesService.getById(id);\n  return category ? convertFirestoreDocToPlain(category) : undefined;\n};\n\nexport const addProductCategory = async (name: string, description: string): Promise<ProductCategory> => {\n  const id = await productCategoriesService.create({\n    name,\n    description,\n    isActive: true\n  });\n  \n  const newCategory = await productCategoriesService.getById(id);\n  if (!newCategory) {\n    throw new Error('Failed to create product category');\n  }\n  \n  return convertFirestoreDocToPlain(newCategory);\n};\n\nexport const updateProductCategory = async (id: string, name: string, description: string): Promise<ProductCategory> => {\n  await productCategoriesService.update(id, { name, description });\n  const updatedCategory = await productCategoriesService.getById(id);\n  if (!updatedCategory) {\n    throw new Error('Product category not found after update');\n  }\n  return convertFirestoreDocToPlain(updatedCategory);\n};\n\nexport const deleteProductCategory = async (id: string): Promise<{ success: boolean }> => {\n  await productCategoriesService.delete(id);\n  return { success: true };\n};\n\n// Quotation functions\nexport const getQuotations = async (): Promise<Quotation[]> => {\n  const quotations = await quotationService.getWithQuery({\n    orderBy: { field: 'createdAt', direction: 'desc' }\n  });\n  return quotations.map(q => convertFirestoreDocToPlain(q));\n};\n\nexport const getQuotationById = async (id: string): Promise<Quotation | undefined> => {\n  const quotation = await quotationService.getById(id);\n  return quotation ? convertFirestoreDocToPlain(quotation) : undefined;\n};\n\nexport const addQuotation = async (quotationData: Omit<Quotation, 'id' | 'createdAt' | 'quotationNumber'>, quotationPrefix: string): Promise<Quotation> => {\n  console.log('Data service received prefix:', quotationPrefix);\n  const prefix = quotationPrefix?.trim() || 'QUO';\n  console.log('Final prefix being used:', prefix);\n  const quotationNumber = await quotationService.generateQuotationNumber(prefix);\n  console.log('Generated quotation number:', quotationNumber);\n  \n  const id = await quotationService.create({\n    ...quotationData,\n    quotationNumber\n  });\n  \n  const newQuotation = await quotationService.getById(id);\n  if (!newQuotation) {\n    throw new Error('Failed to create quotation');\n  }\n  \n  return convertFirestoreDocToPlain(newQuotation);\n};\n\nexport const updateQuotation = async (id: string, quotationData: Partial<Quotation>): Promise<Quotation> => {\n  await quotationService.update(id, quotationData);\n  const updatedQuotation = await quotationService.getById(id);\n  if (!updatedQuotation) {\n    throw new Error('Quotation not found after update');\n  }\n  return convertFirestoreDocToPlain(updatedQuotation);\n};\n\nexport const deleteQuotation = async (id: string): Promise<{ success: boolean }> => {\n  await quotationService.delete(id);\n  return { success: true };\n};\n\n// Quotation Template functions\nexport const getQuotationTemplates = async (): Promise<QuotationTemplate[]> => {\n  const templates = await quotationTemplatesService.getAll();\n  return templates.map(template => convertFirestoreDocToPlain(template));\n};\n\nexport const getQuotationTemplateById = async (id: string): Promise<QuotationTemplate | undefined> => {\n  const template = await quotationTemplatesService.getById(id);\n  return template ? convertFirestoreDocToPlain(template) : undefined;\n};\n\nexport const addQuotationTemplate = async (templateData: Omit<QuotationTemplate, 'id'>): Promise<QuotationTemplate> => {\n  const id = await quotationTemplatesService.create({\n    ...templateData,\n    isDefault: false\n  });\n  \n  const newTemplate = await quotationTemplatesService.getById(id);\n  if (!newTemplate) {\n    throw new Error('Failed to create quotation template');\n  }\n  \n  return convertFirestoreDocToPlain(newTemplate);\n};\n\nexport const updateQuotationTemplate = async (id: string, templateData: QuotationTemplate): Promise<QuotationTemplate> => {\n  await quotationTemplatesService.update(id, templateData);\n  const updatedTemplate = await quotationTemplatesService.getById(id);\n  if (!updatedTemplate) {\n    throw new Error('Template not found after update');\n  }\n  return convertFirestoreDocToPlain(updatedTemplate);\n};\n\nexport const deleteQuotationTemplate = async (id: string): Promise<{ success: boolean }> => {\n  await quotationTemplatesService.delete(id);\n  return { success: true };\n};\n\n// Employee Role functions\nexport const getEmployeeRoles = async (): Promise<EmployeeRole[]> => {\n  const roles = await employeeRolesService.getAll();\n  return roles.map(role => convertFirestoreDocToPlain(role));\n};\n\nexport const addEmployeeRole = async (name: string): Promise<EmployeeRole> => {\n  const id = await employeeRolesService.create({ name });\n  \n  const newRole = await employeeRolesService.getById(id);\n  if (!newRole) {\n    throw new Error('Failed to create employee role');\n  }\n  \n  return convertFirestoreDocToPlain(newRole);\n};\n\nexport const deleteEmployeeRole = async (id: string): Promise<{ success: boolean }> => {\n  await employeeRolesService.delete(id);\n  return { success: true };\n};\n\n// Department functions\nexport const getDepartments = async (): Promise<Department[]> => {\n  const departments = await departmentsService.getAll();\n  return departments.map(dept => convertFirestoreDocToPlain(dept));\n};\n\nexport const addDepartment = async (name: string): Promise<Department> => {\n  const id = await departmentsService.create({ name });\n  \n  const newDepartment = await departmentsService.getById(id);\n  if (!newDepartment) {\n    throw new Error('Failed to create department');\n  }\n  \n  return convertFirestoreDocToPlain(newDepartment);\n};\n\nexport const deleteDepartment = async (id: string): Promise<{ success: boolean }> => {\n  await departmentsService.delete(id);\n  return { success: true };\n};\n\n// Count functions\nexport const getLeadsCount = async (): Promise<number> => {\n  return await leadService.count();\n};\n\nexport const getQuotationsCount = async (): Promise<number> => {\n  return await quotationService.count();\n};\n\nexport const getProductsCount = async (): Promise<number> => {\n  return await productService.count();\n};\n\nexport const getEmployeesCount = async (): Promise<number> => {\n  return await employeeService.count();\n};\n\n// Count by status functions\nexport const getLeadsCountByStatus = async (status: Lead['status']): Promise<number> => {\n  return await leadService.count({\n    where: [{ field: 'status', operator: '==', value: status }]\n  });\n};\n\nexport const getQuotationsCountByStatus = async (status: Quotation['status']): Promise<number> => {\n  return await quotationService.count({\n    where: [{ field: 'status', operator: '==', value: status }]\n  });\n};\n\nexport const getActiveProductsCount = async (): Promise<number> => {\n  return await productService.count({\n    where: [{ field: 'isActive', operator: '==', value: true }]\n  });\n};\n\nexport const getActiveEmployeesCount = async (): Promise<number> => {\n  return await employeeService.count({\n    where: [{ field: 'isActive', operator: '==', value: true }]\n  });\n};\n"],"names":[],"mappings":";;;;;;IAuSa,cAAA,WAAA,GAAA,CAAA,GAAA,yNAAA,CAAA,wBAAA,EAAA,8CAAA,yNAAA,CAAA,aAAA,EAAA,KAAA,GAAA,yNAAA,CAAA,mBAAA,EAAA","debugId":null}},
    {"offset": {"line": 206, "column": 0}, "map": {"version":3,"sources":["file:///Users/gauravshukla/Downloads/ll/src/lib/dashboard-data.ts"],"sourcesContent":["import { Lead, Activity, Product, Quotation } from '@/lib/types';\nimport { \n  getLeads,\n  getQuotations,\n  getProducts\n} from './firestore-data-service';\nimport { parseISO, format, subMonths, differenceInDays } from 'date-fns';\n\n// Optimized types for dashboard\nexport type DashboardMetrics = {\n  totalLeads: number;\n  totalQuotations: number;\n  totalProducts: number;\n  statusBreakdown: { name: string; value: number }[];\n  sourceDistribution: { name: string; count: number }[];\n  averageConversionTime: number;\n  productDemand: { name: string; count: number }[];\n  quotationsByMonth: { month: string; count: number }[];\n  recentActivities: { lead: Pick<Lead, 'id' | 'name' | 'company'>; activity: Activity }[];\n};\n\n// Single optimized function to get all dashboard data\nexport async function getDashboardData(): Promise<DashboardMetrics> {\n  try {\n    // Fetch only the essential data in parallel\n    const [leads, quotations, products] = await Promise.all([\n      getLeads(),\n      getQuotations(), \n      getProducts()\n    ]);\n\n    // Data is already converted to plain objects by the service functions\n    // Calculate metrics efficiently\n    const metrics = calculateDashboardMetrics(leads, quotations, products);\n    \n    return metrics;\n  } catch (error) {\n    console.error('Error fetching dashboard data:', error);\n    // Return empty state on error\n    return {\n      totalLeads: 0,\n      totalQuotations: 0,\n      totalProducts: 0,\n      statusBreakdown: [],\n      sourceDistribution: [],\n      averageConversionTime: 0,\n      productDemand: [],\n      quotationsByMonth: [],\n      recentActivities: []\n    };\n  }\n}\n\nfunction calculateDashboardMetrics(\n  leads: Lead[], \n  quotations: Quotation[], \n  products: Product[]\n): DashboardMetrics {\n  \n  // Basic counts\n  const totalLeads = leads.length;\n  const totalQuotations = quotations.length;\n  const totalProducts = products.length;\n\n  // Status breakdown\n  const statusCounts = new Map<string, number>();\n  const sourceCounts = new Map<string, number>();\n  const productCounts = new Map<string, number>();\n  \n  let totalConversionDays = 0;\n  let convertedCount = 0;\n\n  // Single pass through leads for multiple calculations\n  leads.forEach(lead => {\n    // Status breakdown\n    const status = lead.status;\n    statusCounts.set(status, (statusCounts.get(status) || 0) + 1);\n    \n    // Source distribution\n    const source = lead.source || 'Unknown';\n    sourceCounts.set(source, (sourceCounts.get(source) || 0) + 1);\n    \n    // Product demand\n    if (lead.products) {\n      lead.products.forEach(p => {\n        productCounts.set(p.productId, (productCounts.get(p.productId) || 0) + 1);\n      });\n    }\n\n    // Conversion time calculation\n    if (lead.status === 'Closed - Won') {\n      const creationDate = parseISO(lead.createdAt);\n      const conversionDate = getConversionDate(lead);\n      \n      if (conversionDate) {\n        totalConversionDays += differenceInDays(conversionDate, creationDate);\n        convertedCount++;\n      }\n    }\n  });\n\n  // Format status breakdown\n  const statusBreakdown = [\n    { name: \"New\", value: statusCounts.get(\"New\") || 0 },\n    { name: \"Discussion\", value: statusCounts.get(\"In Discussion\") || 0 },\n    { name: \"Negotiation\", value: statusCounts.get(\"Negotiation\") || 0 },\n    { name: \"Won\", value: statusCounts.get(\"Closed - Won\") || 0 },\n    { name: \"Lost\", value: statusCounts.get(\"Closed - Lost\") || 0 },\n  ];\n\n  // Source distribution\n  const sourceDistribution = Array.from(sourceCounts.entries())\n    .map(([source, count]) => ({ name: source, count }))\n    .sort((a, b) => b.count - a.count);\n\n  // Product demand with names\n  const productDemand = Array.from(productCounts.entries())\n    .map(([productId, count]) => {\n      const product = products.find(p => p.id === productId);\n      return {\n        name: product ? product.name : 'Unknown Product',\n        count: count\n      };\n    })\n    .sort((a, b) => b.count - a.count);\n\n  // Average conversion time\n  const averageConversionTime = convertedCount > 0 \n    ? Math.round(totalConversionDays / convertedCount) \n    : 0;\n\n  // Quotations by month (last 12 months)\n  const twelveMonthsAgo = subMonths(new Date(), 11);\n  const monthlyCounts: { [key: string]: number } = {};\n  \n  // Initialize last 12 months\n  for (let i = 0; i < 12; i++) {\n    const monthKey = format(subMonths(new Date(), i), 'MMM yyyy');\n    monthlyCounts[monthKey] = 0;\n  }\n\n  quotations.forEach(q => {\n    const qDate = parseISO(q.createdAt);\n    if (qDate >= twelveMonthsAgo) {\n      const monthKey = format(qDate, 'MMM yyyy');\n      if (monthlyCounts.hasOwnProperty(monthKey)) {\n        monthlyCounts[monthKey]++;\n      }\n    }\n  });\n\n  const quotationsByMonth = Object.entries(monthlyCounts)\n    .map(([month, count]) => ({ month, count }))\n    .sort((a, b) => parseISO(format(new Date(a.month), 'yyyy-MM-dd')).getTime() - parseISO(format(new Date(b.month), 'yyyy-MM-dd')).getTime());\n\n  // Recent activities (limit to 5 and only include essential lead data)\n  const allActivities = leads.flatMap(lead => \n    lead.activities.map(activity => ({ \n      lead: { \n        id: lead.id, \n        name: lead.name, \n        company: lead.company \n      }, \n      activity \n    }))\n  );\n  \n  const recentActivities = allActivities\n    .sort((a, b) => {\n      const aDate = new Date(a.activity.date.toString()).getTime();\n      const bDate = new Date(b.activity.date.toString()).getTime();\n      return bDate - aDate;\n    })\n    .slice(0, 5);\n\n  return {\n    totalLeads,\n    totalQuotations,\n    totalProducts,\n    statusBreakdown,\n    sourceDistribution,\n    averageConversionTime,\n    productDemand,\n    quotationsByMonth,\n    recentActivities\n  };\n}\n\nfunction getConversionDate(lead: Lead): Date | null {\n  if (lead.status !== 'Closed - Won') return null;\n  \n  // Find the activity where status was changed to 'Closed - Won'\n  const statusChangeActivity = lead.activities.find(a => \n    a.notes && a.notes.includes(\"Status changed from\") && a.notes.includes(`to \"${'Closed - Won'}\"`)\n  );\n\n  if (statusChangeActivity) {\n    return parseISO(statusChangeActivity.date);\n  }\n  \n  // Fallback: use the date of the last activity if no explicit status change is found\n  if (lead.activities.length > 0) {\n    // Activities are sorted by date descending, so the first one is the latest\n    return parseISO(lead.activities[0].date);\n  }\n  \n  return null;\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 389, "column": 0}, "map": {"version":3,"sources":["file:///Users/gauravshukla/Downloads/ll/src/app/dashboard-chart.tsx"],"sourcesContent":["'use client';\n\nimport { useRouter } from 'next/navigation';\nimport {\n  BarChart,\n  Bar,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  ResponsiveContainer,\n  Cell,\n} from 'recharts';\n\nconst statusColors: { [key: string]: string } = {\n  New: 'hsl(var(--chart-1))',\n  'In Discussion': 'hsl(var(--chart-2))',\n  Negotiation: 'hsl(var(--chart-3))',\n  'Closed - Won': 'hsl(var(--chart-4))',\n  'Closed - Lost': 'hsl(var(--chart-5))',\n};\n\ntype ChartData = {\n    name: string;\n    value: number;\n}\n\n// Map display names to actual status values for filtering\nconst statusMapping: { [key: string]: string } = {\n  'New': 'New',\n  'Discussion': 'In Discussion',\n  'Negotiation': 'Negotiation',\n  'Won': 'Closed - Won',\n  'Lost': 'Closed - Lost',\n};\n\nconst statusToColor = (status: string) => {\n    if (status === 'Discussion') return statusColors['In Discussion'];\n    if (status === 'Won') return statusColors['Closed - Won'];\n    if (status === 'Lost') return statusColors['Closed - Lost'];\n    return statusColors[status] || '#8884d8';\n  };\n\nexport default function DashboardChart({ data }: { data: ChartData[] }) {\n  const router = useRouter();\n\n  const handleBarClick = (data: any) => {\n    if (data && data.activePayload && data.activePayload.length > 0) {\n      const statusName = data.activePayload[0].payload.name;\n      const actualStatus = statusMapping[statusName] || statusName;\n      // Navigate to leads page with status filter\n      router.push(`/leads?status=${encodeURIComponent(actualStatus)}`);\n    }\n  };\n\n  return (\n    <ResponsiveContainer width=\"100%\" height={350}>\n      <BarChart data={data} onClick={handleBarClick} style={{ cursor: 'pointer' }}>\n        <CartesianGrid strokeDasharray=\"3 3\" vertical={false} />\n        <XAxis\n          dataKey=\"name\"\n          stroke=\"#888888\"\n          fontSize={12}\n          tickLine={false}\n          axisLine={false}\n        />\n        <YAxis\n          stroke=\"#888888\"\n          fontSize={12}\n          tickLine={false}\n          axisLine={false}\n          tickFormatter={(value) => `${value}`}\n        />\n        <Tooltip\n          cursor={{ fill: 'hsl(var(--muted))' }}\n          contentStyle={{\n            backgroundColor: 'hsl(var(--background))',\n            border: '1px solid hsl(var(--border))',\n          }}\n        />\n        <Bar dataKey=\"value\" radius={[4, 4, 0, 0]}>\n          {data.map((entry, index) => (\n            <Cell\n              key={`cell-${index}`}\n              fill={statusToColor(entry.name)}\n            />\n          ))}\n        </Bar>\n      </BarChart>\n    </ResponsiveContainer>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;AAHA;;;AAcA,MAAM,eAA0C;IAC9C,KAAK;IACL,iBAAiB;IACjB,aAAa;IACb,gBAAgB;IAChB,iBAAiB;AACnB;AAOA,0DAA0D;AAC1D,MAAM,gBAA2C;IAC/C,OAAO;IACP,cAAc;IACd,eAAe;IACf,OAAO;IACP,QAAQ;AACV;AAEA,MAAM,gBAAgB,CAAC;IACnB,IAAI,WAAW,cAAc,OAAO,YAAY,CAAC,gBAAgB;IACjE,IAAI,WAAW,OAAO,OAAO,YAAY,CAAC,eAAe;IACzD,IAAI,WAAW,QAAQ,OAAO,YAAY,CAAC,gBAAgB;IAC3D,OAAO,YAAY,CAAC,OAAO,IAAI;AACjC;AAEa,SAAS,eAAe,EAAE,IAAI,EAAyB;;IACpE,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IAEvB,MAAM,iBAAiB,CAAC;QACtB,IAAI,QAAQ,KAAK,aAAa,IAAI,KAAK,aAAa,CAAC,MAAM,GAAG,GAAG;YAC/D,MAAM,aAAa,KAAK,aAAa,CAAC,EAAE,CAAC,OAAO,CAAC,IAAI;YACrD,MAAM,eAAe,aAAa,CAAC,WAAW,IAAI;YAClD,4CAA4C;YAC5C,OAAO,IAAI,CAAC,CAAC,cAAc,EAAE,mBAAmB,eAAe;QACjE;IACF;IAEA,qBACE,6LAAC,sKAAA,CAAA,sBAAmB;QAAC,OAAM;QAAO,QAAQ;kBACxC,cAAA,6LAAC,uJAAA,CAAA,WAAQ;YAAC,MAAM;YAAM,SAAS;YAAgB,OAAO;gBAAE,QAAQ;YAAU;;8BACxE,6LAAC,gKAAA,CAAA,gBAAa;oBAAC,iBAAgB;oBAAM,UAAU;;;;;;8BAC/C,6LAAC,wJAAA,CAAA,QAAK;oBACJ,SAAQ;oBACR,QAAO;oBACP,UAAU;oBACV,UAAU;oBACV,UAAU;;;;;;8BAEZ,6LAAC,wJAAA,CAAA,QAAK;oBACJ,QAAO;oBACP,UAAU;oBACV,UAAU;oBACV,UAAU;oBACV,eAAe,CAAC,QAAU,GAAG,OAAO;;;;;;8BAEtC,6LAAC,0JAAA,CAAA,UAAO;oBACN,QAAQ;wBAAE,MAAM;oBAAoB;oBACpC,cAAc;wBACZ,iBAAiB;wBACjB,QAAQ;oBACV;;;;;;8BAEF,6LAAC,sJAAA,CAAA,MAAG;oBAAC,SAAQ;oBAAQ,QAAQ;wBAAC;wBAAG;wBAAG;wBAAG;qBAAE;8BACtC,KAAK,GAAG,CAAC,CAAC,OAAO,sBAChB,6LAAC,uJAAA,CAAA,OAAI;4BAEH,MAAM,cAAc,MAAM,IAAI;2BADzB,CAAC,KAAK,EAAE,OAAO;;;;;;;;;;;;;;;;;;;;;AAQlC;GAhDwB;;QACP,qIAAA,CAAA,YAAS;;;KADF","debugId":null}},
    {"offset": {"line": 541, "column": 0}, "map": {"version":3,"sources":["file:///Users/gauravshukla/Downloads/ll/src/app/product-demand-chart.tsx"],"sourcesContent":["'use client';\n\nimport {\n  BarChart,\n  Bar,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  ResponsiveContainer,\n} from 'recharts';\n\ntype ChartData = {\n    name: string;\n    count: number;\n}\n\nexport default function ProductDemandChart({ data }: { data: ChartData[] }) {\n  if (data.length === 0) {\n    return (\n        <div className=\"text-center text-muted-foreground py-10\">\n            No product data available to display.\n        </div>\n    );\n  }\n  return (\n    <ResponsiveContainer width=\"100%\" height={350}>\n      <BarChart data={data}>\n        <CartesianGrid strokeDasharray=\"3 3\" vertical={false} />\n        <XAxis\n          dataKey=\"name\"\n          stroke=\"#888888\"\n          fontSize={12}\n          tickLine={false}\n          axisLine={false}\n          angle={-45}\n          textAnchor=\"end\"\n          height={60}\n        />\n        <YAxis\n          stroke=\"#888888\"\n          fontSize={12}\n          tickLine={false}\n          axisLine={false}\n          tickFormatter={(value) => `${value}`}\n          allowDecimals={false}\n        />\n        <Tooltip\n          cursor={{ fill: 'hsl(var(--muted))' }}\n          contentStyle={{\n            backgroundColor: 'hsl(var(--background))',\n            border: '1px solid hsl(var(--border))',\n          }}\n        />\n        <Bar dataKey=\"count\" fill=\"hsl(var(--primary))\" radius={[4, 4, 0, 0]} />\n      </BarChart>\n    </ResponsiveContainer>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAFA;;;AAiBe,SAAS,mBAAmB,EAAE,IAAI,EAAyB;IACxE,IAAI,KAAK,MAAM,KAAK,GAAG;QACrB,qBACI,6LAAC;YAAI,WAAU;sBAA0C;;;;;;IAI/D;IACA,qBACE,6LAAC,sKAAA,CAAA,sBAAmB;QAAC,OAAM;QAAO,QAAQ;kBACxC,cAAA,6LAAC,uJAAA,CAAA,WAAQ;YAAC,MAAM;;8BACd,6LAAC,gKAAA,CAAA,gBAAa;oBAAC,iBAAgB;oBAAM,UAAU;;;;;;8BAC/C,6LAAC,wJAAA,CAAA,QAAK;oBACJ,SAAQ;oBACR,QAAO;oBACP,UAAU;oBACV,UAAU;oBACV,UAAU;oBACV,OAAO,CAAC;oBACR,YAAW;oBACX,QAAQ;;;;;;8BAEV,6LAAC,wJAAA,CAAA,QAAK;oBACJ,QAAO;oBACP,UAAU;oBACV,UAAU;oBACV,UAAU;oBACV,eAAe,CAAC,QAAU,GAAG,OAAO;oBACpC,eAAe;;;;;;8BAEjB,6LAAC,0JAAA,CAAA,UAAO;oBACN,QAAQ;wBAAE,MAAM;oBAAoB;oBACpC,cAAc;wBACZ,iBAAiB;wBACjB,QAAQ;oBACV;;;;;;8BAEF,6LAAC,sJAAA,CAAA,MAAG;oBAAC,SAAQ;oBAAQ,MAAK;oBAAsB,QAAQ;wBAAC;wBAAG;wBAAG;wBAAG;qBAAE;;;;;;;;;;;;;;;;;AAI5E;KAzCwB","debugId":null}},
    {"offset": {"line": 657, "column": 0}, "map": {"version":3,"sources":["file:///Users/gauravshukla/Downloads/ll/src/app/average-conversion-time-chart.tsx"],"sourcesContent":["\n'use client';\n\nimport {\n  RadialBarChart,\n  RadialBar,\n  PolarAngleAxis,\n  ResponsiveContainer,\n} from 'recharts';\n\nexport default function AverageConversionTimeChart({ timeInDays }: { timeInDays: number }) {\n  const data = [{ name: 'Conversion Time', value: timeInDays }];\n\n  return (\n    <ResponsiveContainer width=\"100%\" height={150}>\n      <RadialBarChart\n        innerRadius=\"80%\"\n        outerRadius=\"100%\"\n        barSize={10}\n        data={data}\n        startAngle={90}\n        endAngle={-270}\n      >\n        <PolarAngleAxis\n          type=\"number\"\n          domain={[0, Math.max(timeInDays, 30)]} // Ensure a reasonable max value\n          angleAxisId={0}\n          tick={false}\n        />\n        <RadialBar\n          background\n          dataKey=\"value\"\n          cornerRadius={10}\n          fill=\"hsl(var(--primary))\"\n        />\n        <text\n          x=\"50%\"\n          y=\"50%\"\n          textAnchor=\"middle\"\n          dominantBaseline=\"middle\"\n          className=\"fill-foreground text-3xl font-bold\"\n        >\n          {timeInDays}\n        </text>\n        <text\n          x=\"50%\"\n          y=\"65%\"\n          textAnchor=\"middle\"\n          dominantBaseline=\"middle\"\n          className=\"fill-muted-foreground text-sm\"\n        >\n          Days\n        </text>\n      </RadialBarChart>\n    </ResponsiveContainer>\n  );\n}\n"],"names":[],"mappings":";;;;AAGA;AAAA;AAAA;AAAA;AAFA;;;AASe,SAAS,2BAA2B,EAAE,UAAU,EAA0B;IACvF,MAAM,OAAO;QAAC;YAAE,MAAM;YAAmB,OAAO;QAAW;KAAE;IAE7D,qBACE,6LAAC,sKAAA,CAAA,sBAAmB;QAAC,OAAM;QAAO,QAAQ;kBACxC,cAAA,6LAAC,6JAAA,CAAA,iBAAc;YACb,aAAY;YACZ,aAAY;YACZ,SAAS;YACT,MAAM;YACN,YAAY;YACZ,UAAU,CAAC;;8BAEX,6LAAC,6JAAA,CAAA,iBAAc;oBACb,MAAK;oBACL,QAAQ;wBAAC;wBAAG,KAAK,GAAG,CAAC,YAAY;qBAAI;oBACrC,aAAa;oBACb,MAAM;;;;;;8BAER,6LAAC,wJAAA,CAAA,YAAS;oBACR,UAAU;oBACV,SAAQ;oBACR,cAAc;oBACd,MAAK;;;;;;8BAEP,6LAAC;oBACC,GAAE;oBACF,GAAE;oBACF,YAAW;oBACX,kBAAiB;oBACjB,WAAU;8BAET;;;;;;8BAEH,6LAAC;oBACC,GAAE;oBACF,GAAE;oBACF,YAAW;oBACX,kBAAiB;oBACjB,WAAU;8BACX;;;;;;;;;;;;;;;;;AAMT;KA9CwB","debugId":null}},
    {"offset": {"line": 757, "column": 0}, "map": {"version":3,"sources":["file:///Users/gauravshukla/Downloads/ll/src/app/quotations-by-month-chart.tsx"],"sourcesContent":["\n'use client';\n\nimport {\n  BarChart,\n  Bar,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  ResponsiveContainer,\n} from 'recharts';\n\ntype ChartData = {\n  month: string;\n  count: number;\n}\n\nexport default function QuotationsByMonthChart({ data }: { data: ChartData[] }) {\n  if (data.length === 0) {\n    return (\n        <div className=\"text-center text-muted-foreground py-10\">\n            No quotation data available for the last 12 months.\n        </div>\n    );\n  }\n  return (\n    <ResponsiveContainer width=\"100%\" height={350}>\n      <BarChart data={data}>\n        <CartesianGrid strokeDasharray=\"3 3\" vertical={false} />\n        <XAxis\n          dataKey=\"month\"\n          stroke=\"#888888\"\n          fontSize={12}\n          tickLine={false}\n          axisLine={false}\n        />\n        <YAxis\n          stroke=\"#888888\"\n          fontSize={12}\n          tickLine={false}\n          axisLine={false}\n          tickFormatter={(value) => `${value}`}\n          allowDecimals={false}\n        />\n        <Tooltip\n          cursor={{ fill: 'hsl(var(--muted))' }}\n          contentStyle={{\n            backgroundColor: 'hsl(var(--background))',\n            border: '1px solid hsl(var(--border))',\n          }}\n        />\n        <Bar dataKey=\"count\" fill=\"hsl(var(--primary))\" radius={[4, 4, 0, 0]} />\n      </BarChart>\n    </ResponsiveContainer>\n  );\n}\n"],"names":[],"mappings":";;;;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAFA;;;AAiBe,SAAS,uBAAuB,EAAE,IAAI,EAAyB;IAC5E,IAAI,KAAK,MAAM,KAAK,GAAG;QACrB,qBACI,6LAAC;YAAI,WAAU;sBAA0C;;;;;;IAI/D;IACA,qBACE,6LAAC,sKAAA,CAAA,sBAAmB;QAAC,OAAM;QAAO,QAAQ;kBACxC,cAAA,6LAAC,uJAAA,CAAA,WAAQ;YAAC,MAAM;;8BACd,6LAAC,gKAAA,CAAA,gBAAa;oBAAC,iBAAgB;oBAAM,UAAU;;;;;;8BAC/C,6LAAC,wJAAA,CAAA,QAAK;oBACJ,SAAQ;oBACR,QAAO;oBACP,UAAU;oBACV,UAAU;oBACV,UAAU;;;;;;8BAEZ,6LAAC,wJAAA,CAAA,QAAK;oBACJ,QAAO;oBACP,UAAU;oBACV,UAAU;oBACV,UAAU;oBACV,eAAe,CAAC,QAAU,GAAG,OAAO;oBACpC,eAAe;;;;;;8BAEjB,6LAAC,0JAAA,CAAA,UAAO;oBACN,QAAQ;wBAAE,MAAM;oBAAoB;oBACpC,cAAc;wBACZ,iBAAiB;wBACjB,QAAQ;oBACV;;;;;;8BAEF,6LAAC,sJAAA,CAAA,MAAG;oBAAC,SAAQ;oBAAQ,MAAK;oBAAsB,QAAQ;wBAAC;wBAAG;wBAAG;wBAAG;qBAAE;;;;;;;;;;;;;;;;;AAI5E;KAtCwB","debugId":null}},
    {"offset": {"line": 870, "column": 0}, "map": {"version":3,"sources":["file:///Users/gauravshukla/Downloads/ll/src/app/source-distribution-chart.tsx"],"sourcesContent":["'use client';\n\nimport { useRouter } from 'next/navigation';\nimport {\n  BarChart,\n  Bar,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  ResponsiveContainer,\n  Cell,\n} from 'recharts';\n\n// Different color scheme for sources\nconst sourceColors = [\n  'hsl(var(--chart-1))',\n  'hsl(var(--chart-2))',\n  'hsl(var(--chart-3))',\n  'hsl(var(--chart-4))',\n  'hsl(var(--chart-5))',\n  '#8884d8',\n  '#82ca9d',\n  '#ffc658',\n  '#ff7c7c',\n  '#8dd1e1',\n];\n\ntype SourceChartData = {\n    name: string;\n    count: number;\n}\n\nexport default function SourceDistributionChart({ data }: { data: SourceChartData[] }) {\n  const router = useRouter();\n\n  const handleBarClick = (data: any) => {\n    if (data && data.activePayload && data.activePayload.length > 0) {\n      const sourceName = data.activePayload[0].payload.name;\n      // Navigate to leads page with source filter\n      router.push(`/leads?source=${encodeURIComponent(sourceName)}`);\n    }\n  };\n\n  const getSourceColor = (index: number) => {\n    return sourceColors[index % sourceColors.length];\n  };\n\n  // Handle empty data case\n  if (!data || data.length === 0) {\n    return (\n      <div className=\"flex items-center justify-center h-[350px] text-muted-foreground\">\n        No source data available\n      </div>\n    );\n  }\n\n  return (\n    <ResponsiveContainer width=\"100%\" height={350}>\n      <BarChart data={data} onClick={handleBarClick} style={{ cursor: 'pointer' }}>\n        <CartesianGrid strokeDasharray=\"3 3\" vertical={false} />\n        <XAxis\n          dataKey=\"name\"\n          stroke=\"#888888\"\n          fontSize={12}\n          tickLine={false}\n          axisLine={false}\n          angle={-45}\n          textAnchor=\"end\"\n          height={80}\n        />\n        <YAxis\n          stroke=\"#888888\"\n          fontSize={12}\n          tickLine={false}\n          axisLine={false}\n          tickFormatter={(value) => `${value}`}\n        />\n        <Tooltip\n          cursor={{ fill: 'hsl(var(--muted))' }}\n          contentStyle={{\n            backgroundColor: 'hsl(var(--background))',\n            border: '1px solid hsl(var(--border))',\n          }}\n        />\n        <Bar dataKey=\"count\" radius={[4, 4, 0, 0]}>\n          {data.map((entry, index) => (\n            <Cell\n              key={`cell-${index}`}\n              fill={getSourceColor(index)}\n            />\n          ))}\n        </Bar>\n      </BarChart>\n    </ResponsiveContainer>\n  );\n}"],"names":[],"mappings":";;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;AAHA;;;AAcA,qCAAqC;AACrC,MAAM,eAAe;IACnB;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAOc,SAAS,wBAAwB,EAAE,IAAI,EAA+B;;IACnF,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IAEvB,MAAM,iBAAiB,CAAC;QACtB,IAAI,QAAQ,KAAK,aAAa,IAAI,KAAK,aAAa,CAAC,MAAM,GAAG,GAAG;YAC/D,MAAM,aAAa,KAAK,aAAa,CAAC,EAAE,CAAC,OAAO,CAAC,IAAI;YACrD,4CAA4C;YAC5C,OAAO,IAAI,CAAC,CAAC,cAAc,EAAE,mBAAmB,aAAa;QAC/D;IACF;IAEA,MAAM,iBAAiB,CAAC;QACtB,OAAO,YAAY,CAAC,QAAQ,aAAa,MAAM,CAAC;IAClD;IAEA,yBAAyB;IACzB,IAAI,CAAC,QAAQ,KAAK,MAAM,KAAK,GAAG;QAC9B,qBACE,6LAAC;YAAI,WAAU;sBAAmE;;;;;;IAItF;IAEA,qBACE,6LAAC,sKAAA,CAAA,sBAAmB;QAAC,OAAM;QAAO,QAAQ;kBACxC,cAAA,6LAAC,uJAAA,CAAA,WAAQ;YAAC,MAAM;YAAM,SAAS;YAAgB,OAAO;gBAAE,QAAQ;YAAU;;8BACxE,6LAAC,gKAAA,CAAA,gBAAa;oBAAC,iBAAgB;oBAAM,UAAU;;;;;;8BAC/C,6LAAC,wJAAA,CAAA,QAAK;oBACJ,SAAQ;oBACR,QAAO;oBACP,UAAU;oBACV,UAAU;oBACV,UAAU;oBACV,OAAO,CAAC;oBACR,YAAW;oBACX,QAAQ;;;;;;8BAEV,6LAAC,wJAAA,CAAA,QAAK;oBACJ,QAAO;oBACP,UAAU;oBACV,UAAU;oBACV,UAAU;oBACV,eAAe,CAAC,QAAU,GAAG,OAAO;;;;;;8BAEtC,6LAAC,0JAAA,CAAA,UAAO;oBACN,QAAQ;wBAAE,MAAM;oBAAoB;oBACpC,cAAc;wBACZ,iBAAiB;wBACjB,QAAQ;oBACV;;;;;;8BAEF,6LAAC,sJAAA,CAAA,MAAG;oBAAC,SAAQ;oBAAQ,QAAQ;wBAAC;wBAAG;wBAAG;wBAAG;qBAAE;8BACtC,KAAK,GAAG,CAAC,CAAC,OAAO,sBAChB,6LAAC,uJAAA,CAAA,OAAI;4BAEH,MAAM,eAAe;2BADhB,CAAC,KAAK,EAAE,OAAO;;;;;;;;;;;;;;;;;;;;;AAQlC;GA/DwB;;QACP,qIAAA,CAAA,YAAS;;;KADF","debugId":null}},
    {"offset": {"line": 1030, "column": 0}, "map": {"version":3,"sources":["file:///Users/gauravshukla/Downloads/ll/src/app/page.tsx"],"sourcesContent":["\n'use client';\nimport * as React from 'react';\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { getDashboardData, DashboardMetrics } from '@/lib/dashboard-data';\nimport {\n  Users,\n  Briefcase,\n  Handshake,\n  User,\n  Package,\n  FileText,\n  ShoppingCart,\n} from \"lucide-react\";\nimport { format, parseISO } from \"date-fns\";\nimport DashboardChart from \"./dashboard-chart\";\nimport ProductDemandChart from './product-demand-chart';\nimport AverageConversionTimeChart from './average-conversion-time-chart';\nimport QuotationsByMonthChart from './quotations-by-month-chart';\nimport SourceDistributionChart from './source-distribution-chart';\n\n\n// We can't render the time on the server, as it may be in a different timezone than the client.\n// Instead, we can render it on the client after the initial render.\nfunction ClientTime({ date }: { date: string }) {\n  const [time, setTime] = React.useState<string | null>(null);\n\n  React.useEffect(() => {\n    setTime(format(parseISO(date), \"p\"));\n  }, [date]);\n\n  if (!time) {\n    return null;\n  }\n  return (\n    <Badge variant=\"outline\" className=\"ml-auto shrink-0\">\n      {time}\n    </Badge>\n  );\n}\nfunction Dashboard({ data }: { data: DashboardMetrics }) {\n    const { \n      totalLeads, \n      totalQuotations, \n      totalProducts, \n      statusBreakdown, \n      sourceDistribution, \n      averageConversionTime, \n      productDemand, \n      quotationsByMonth, \n      recentActivities \n    } = data;\n    \n    // Calculate individual status counts for display cards\n    const inDiscussion = statusBreakdown.find(s => s.name === \"Discussion\")?.value || 0;\n    const negotiation = statusBreakdown.find(s => s.name === \"Negotiation\")?.value || 0;\n    const closedWon = statusBreakdown.find(s => s.name === \"Won\")?.value || 0;\n    \n  return (\n    <>\n      <div className=\"flex items-center justify-between space-y-2\">\n        <h2 className=\"text-3xl font-bold tracking-tight\">Dashboard</h2>\n      </div>\n      <div className=\"grid gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6\">\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Total Leads</CardTitle>\n            <Users className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{totalLeads}</div>\n            <p className=\"text-xs text-muted-foreground\">\n              All leads in the system\n            </p>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Total Quotations</CardTitle>\n            <FileText className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{totalQuotations}</div>\n            <p className=\"text-xs text-muted-foreground\">\n              All quotations created\n            </p>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Total Products</CardTitle>\n            <Package className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{totalProducts}</div>\n            <p className=\"text-xs text-muted-foreground\">\n              Products in catalog\n            </p>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">In Discussion</CardTitle>\n            <Briefcase className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{inDiscussion}</div>\n            <p className=\"text-xs text-muted-foreground\">\n              Leads currently in discussion\n            </p>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">In Negotiation</CardTitle>\n            <Handshake className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{negotiation}</div>\n            <p className=\"text-xs text-muted-foreground\">\n              Leads in negotiation phase\n            </p>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Closed Won</CardTitle>\n            <ShoppingCart className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{closedWon}</div>\n            <p className=\"text-xs text-muted-foreground\">\n              Successfully closed deals\n            </p>\n          </CardContent>\n        </Card>\n      </div>\n\n      <div className=\"grid gap-4 lg:grid-cols-2 xl:grid-cols-7\">\n        <Card className=\"xl:col-span-4\">\n          <CardHeader>\n            <CardTitle>Leads Overview</CardTitle>\n            <CardDescription>A summary of leads by current status. Click on bars to filter leads by status.</CardDescription>\n          </CardHeader>\n          <CardContent className=\"pl-2\">\n            <DashboardChart data={statusBreakdown} />\n          </CardContent>\n        </Card>\n        <div className=\"xl:col-span-3 grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-1 gap-4\">\n            <Card className=\"sm:col-span-1 xl:col-span-1\">\n                <CardHeader>\n                    <CardTitle>Average Conversion Time</CardTitle>\n                    <CardDescription>\n                    Average time from lead creation to closing a deal.\n                    </CardDescription>\n                </CardHeader>\n                <CardContent className=\"flex items-center justify-center\">\n                   <AverageConversionTimeChart timeInDays={averageConversionTime} />\n                </CardContent>\n            </Card>\n            <Card className=\"sm:col-span-2 xl:col-span-1\">\n            <CardHeader>\n                <CardTitle>Recent Activities</CardTitle>\n                <CardDescription>\n                A log of the most recent interactions with leads.\n                </CardDescription>\n            </CardHeader>\n            <CardContent>\n                <div className=\"space-y-4\">\n                {recentActivities.map(({ lead, activity }) => (\n                    <div key={activity.id} className=\"flex items-start gap-4\">\n                    <div className=\"flex h-9 w-9 items-center justify-center rounded-full bg-muted text-muted-foreground border shrink-0\">\n                        <User className=\"h-5 w-5\" />\n                    </div>\n                    <div className=\"grid gap-1 text-sm\">\n                        <div className=\"font-medium\">\n                        {lead.name}\n                        <span className=\"font-normal text-muted-foreground\"> from {lead.company}</span>\n                        </div>\n                        <p className=\"text-muted-foreground\">{activity.type}</p>\n                        <p className=\"text-xs text-muted-foreground\">\n                        {format(parseISO(activity.date), \"PPP\")}\n                        </p>\n                    </div>\n                    <ClientTime date={activity.date} />\n                    </div>\n                ))}\n                </div>\n            </CardContent>\n            </Card>\n        </div>\n      </div>\n      <div className=\"grid gap-4 md:grid-cols-2\">\n        <Card>\n            <CardHeader>\n              <CardTitle>Quotations Sent by Month</CardTitle>\n              <CardDescription>\n                Number of quotations created over the last 12 months.\n              </CardDescription>\n            </CardHeader>\n            <CardContent>\n              <QuotationsByMonthChart data={quotationsByMonth} />\n            </CardContent>\n          </Card>\n        <Card>\n            <CardHeader>\n              <CardTitle>Source-wise Leads Distribution</CardTitle>\n              <CardDescription>\n                Number of leads by source. Click on bars to filter leads by source.\n              </CardDescription>\n            </CardHeader>\n            <CardContent className=\"pl-2\">\n              <SourceDistributionChart data={sourceDistribution} />\n            </CardContent>\n          </Card>\n      </div>\n      <div className=\"grid gap-4 md:grid-cols-2\">\n        <Card>\n            <CardHeader>\n              <CardTitle>Product Demand</CardTitle>\n              <CardDescription>\n                Number of leads interested in each product.\n              </CardDescription>\n            </CardHeader>\n            <CardContent>\n              <ProductDemandChart data={productDemand} />\n            </CardContent>\n          </Card>\n      </div>\n    </>\n  );\n}\n\n\nexport default function DashboardPage() {\n    const [data, setData] = React.useState<DashboardMetrics | null>(null);\n    const [isLoading, setIsLoading] = React.useState(true);\n    const [error, setError] = React.useState<string | null>(null);\n\n    React.useEffect(() => {\n      async function fetchData() {\n        try {\n          setIsLoading(true);\n          setError(null);\n          const dashboardData = await getDashboardData();\n          setData(dashboardData);\n        } catch (error) {\n          console.error('Failed to fetch dashboard data:', error);\n          setError('Failed to load dashboard data. Please try again.');\n        } finally {\n          setIsLoading(false);\n        }\n      }\n      \n      fetchData();\n    }, []);\n\n    if (isLoading) {\n        return (\n            <div className=\"flex-1 space-y-4 pt-6\">\n                <div className=\"flex items-center justify-between space-y-2\">\n                    <h2 className=\"text-3xl font-bold tracking-tight\">Dashboard</h2>\n                </div>\n                <div className=\"text-center text-muted-foreground py-10\">\n                    Loading dashboard...\n                </div>\n            </div>\n        );\n    }\n\n    if (error || !data) {\n        return (\n            <div className=\"flex-1 space-y-4 pt-6\">\n                <div className=\"flex items-center justify-between space-y-2\">\n                    <h2 className=\"text-3xl font-bold tracking-tight\">Dashboard</h2>\n                </div>\n                <div className=\"text-center text-muted-foreground py-10\">\n                    {error || 'Failed to load dashboard data'}\n                </div>\n            </div>\n        );\n    }\n  \n    return <Dashboard data={data} />;\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}